(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Rp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ab={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=Symbol.for("react.transitional.element"),n1=Symbol.for("react.fragment");function ob(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:t1,type:t,key:r,ref:e!==void 0?e:null,props:n}}$u.Fragment=n1;$u.jsx=ob;$u.jsxs=ob;ab.exports=$u;var g=ab.exports,lb={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=Symbol.for("react.transitional.element"),r1=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),s1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),o1=Symbol.for("react.consumer"),l1=Symbol.for("react.context"),c1=Symbol.for("react.forward_ref"),u1=Symbol.for("react.suspense"),d1=Symbol.for("react.memo"),cb=Symbol.for("react.lazy"),By=Symbol.iterator;function h1(t){return t===null||typeof t!="object"?null:(t=By&&t[By]||t["@@iterator"],typeof t=="function"?t:null)}var ub={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},db=Object.assign,hb={};function ta(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fb(){}fb.prototype=ta.prototype;function Dp(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}var Np=Dp.prototype=new fb;Np.constructor=Dp;db(Np,ta.prototype);Np.isPureReactComponent=!0;var zy=Array.isArray,ke={H:null,A:null,T:null,S:null,V:null},pb=Object.prototype.hasOwnProperty;function Op(t,e,n,r,i,s){return n=s.ref,{$$typeof:Cp,type:t,key:e,ref:n!==void 0?n:null,props:s}}function f1(t,e){return Op(t.type,e,void 0,void 0,void 0,t.props)}function Mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cp}function p1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hy=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p1(""+t.key):e.toString(36)}function Fy(){}function g1(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Fy,Fy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ts(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Cp:case r1:a=!0;break;case cb:return a=t._init,ts(a(t._payload),e,n,r,i)}}if(a)return i=i(t),a=r===""?"."+Xd(t,0):r,zy(i)?(n="",a!=null&&(n=a.replace(Hy,"$&/")+"/"),ts(i,e,n,"",function(u){return u})):i!=null&&(Mp(i)&&(i=f1(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(Hy,"$&/")+"/")+a)),e.push(i)),1;a=0;var o=r===""?".":r+":";if(zy(t))for(var c=0;c<t.length;c++)r=t[c],s=o+Xd(r,c),a+=ts(r,e,n,s,i);else if(c=h1(t),typeof c=="function")for(t=c.call(t),c=0;!(r=t.next()).done;)r=r.value,s=o+Xd(r,c++),a+=ts(r,e,n,s,i);else if(s==="object"){if(typeof t.then=="function")return ts(g1(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Xl(t,e,n){if(t==null)return t;var r=[],i=0;return ts(t,r,"","",function(s){return e.call(n,s,i++)}),r}function m1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function y1(){}oe.Children={map:Xl,forEach:function(t,e,n){Xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xl(t,function(){e++}),e},toArray:function(t){return Xl(t,function(e){return e})||[]},only:function(t){if(!Mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=ta;oe.Fragment=i1;oe.Profiler=a1;oe.PureComponent=Dp;oe.StrictMode=s1;oe.Suspense=u1;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ke.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=db({},t.props),i=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(i=""+e.key),e)!pb.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return Op(t.type,i,void 0,void 0,s,r)};oe.createContext=function(t){return t={$$typeof:l1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:o1,_context:t},t};oe.createElement=function(t,e,n){var r,i={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)pb.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return Op(t,s,void 0,void 0,null,i)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:c1,render:t}};oe.isValidElement=Mp;oe.lazy=function(t){return{$$typeof:cb,_payload:{_status:-1,_result:t},_init:m1}};oe.memo=function(t,e){return{$$typeof:d1,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=ke.T,n={};ke.T=n;try{var r=t(),i=ke.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(y1,Gy)}catch(s){Gy(s)}finally{ke.T=e}};oe.unstable_useCacheRefresh=function(){return ke.H.useCacheRefresh()};oe.use=function(t){return ke.H.use(t)};oe.useActionState=function(t,e,n){return ke.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return ke.H.useCallback(t,e)};oe.useContext=function(t){return ke.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return ke.H.useDeferredValue(t,e)};oe.useEffect=function(t,e,n){var r=ke.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};oe.useId=function(){return ke.H.useId()};oe.useImperativeHandle=function(t,e,n){return ke.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return ke.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return ke.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return ke.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return ke.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return ke.H.useReducer(t,e,n)};oe.useRef=function(t){return ke.H.useRef(t)};oe.useState=function(t){return ke.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return ke.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return ke.H.useTransition()};oe.version="19.1.1";lb.exports=oe;var L=lb.exports;const Ge=Rp(L);var gb={exports:{}},Yu={},mb={exports:{}},yb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var G=z.length;z.push(q);e:for(;0<G;){var ie=G-1>>>1,ae=z[ie];if(0<i(ae,q))z[ie]=q,z[G]=ae,G=ie;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],G=z.pop();if(G!==q){z[0]=G;e:for(var ie=0,ae=z.length,it=ae>>>1;ie<it;){var Xe=2*(ie+1)-1,Ee=z[Xe],jt=Xe+1,Ze=z[jt];if(0>i(Ee,G))jt<ae&&0>i(Ze,Ee)?(z[ie]=Ze,z[jt]=G,ie=jt):(z[ie]=Ee,z[Xe]=G,ie=Xe);else if(jt<ae&&0>i(Ze,G))z[ie]=Ze,z[jt]=G,ie=jt;else break e}}return q}function i(z,q){var G=z.sortIndex-q.sortIndex;return G!==0?G:z.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,p=null,f=3,m=!1,A=!1,D=!1,R=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(z){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=z)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function M(z){if(D=!1,N(z),!A)if(n(c)!==null)A=!0,V||(V=!0,O());else{var q=n(u);q!==null&&$(M,q.startTime-z)}}var V=!1,w=-1,v=5,x=-1;function S(){return R?!0:!(t.unstable_now()-x<v)}function I(){if(R=!1,V){var z=t.unstable_now();x=z;var q=!0;try{e:{A=!1,D&&(D=!1,b(w),w=-1),m=!0;var G=f;try{t:{for(N(z),p=n(c);p!==null&&!(p.expirationTime>z&&S());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,f=p.priorityLevel;var ae=ie(p.expirationTime<=z);if(z=t.unstable_now(),typeof ae=="function"){p.callback=ae,N(z),q=!0;break t}p===n(c)&&r(c),N(z)}else r(c);p=n(c)}if(p!==null)q=!0;else{var it=n(u);it!==null&&$(M,it.startTime-z),q=!1}}break e}finally{p=null,f=G,m=!1}q=void 0}}finally{q?O():V=!1}}}var O;if(typeof T=="function")O=function(){T(I)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ee=C.port2;C.port1.onmessage=I,O=function(){ee.postMessage(null)}}else O=function(){_(I,0)};function $(z,q){w=_(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var G=f;f=q;try{return z()}finally{f=G}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=f;f=z;try{return q()}finally{f=G}},t.unstable_scheduleCallback=function(z,q,G){var ie=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ie+G:ie):G=ie,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,z={id:d++,callback:q,priorityLevel:z,startTime:G,expirationTime:ae,sortIndex:-1},G>ie?(z.sortIndex=G,e(u,z),n(c)===null&&z===n(u)&&(D?(b(w),w=-1):D=!0,$(M,G-ie))):(z.sortIndex=ae,e(c,z),A||m||(A=!0,V||(V=!0,O()))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var q=f;return function(){var G=f;f=q;try{return z.apply(this,arguments)}finally{f=G}}}})(yb);mb.exports=yb;var v1=mb.exports,vb={exports:{}},Lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=L;function _b(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function br(){}var kt={d:{f:br,r:function(){throw Error(_b(522))},D:br,C:br,L:br,m:br,X:br,S:br,M:br},p:0,findDOMNode:null},b1=Symbol.for("react.portal");function E1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b1,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var eo=_1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ku(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=kt;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(_b(299));return E1(t,e,null,n)};Lt.flushSync=function(t){var e=eo.T,n=kt.p;try{if(eo.T=null,kt.p=2,t)return t()}finally{eo.T=e,kt.p=n,kt.d.f()}};Lt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,kt.d.C(t,e))};Lt.prefetchDNS=function(t){typeof t=="string"&&kt.d.D(t)};Lt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Ku(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?kt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):n==="script"&&kt.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Lt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ku(e.as,e.crossOrigin);kt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&kt.d.M(t)};Lt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Ku(n,e.crossOrigin);kt.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Lt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ku(e.as,e.crossOrigin);kt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else kt.d.m(t)};Lt.requestFormReset=function(t){kt.d.r(t)};Lt.unstable_batchedUpdates=function(t,e){return t(e)};Lt.useFormState=function(t,e,n){return eo.H.useFormState(t,e,n)};Lt.useFormStatus=function(){return eo.H.useHostTransitionStatus()};Lt.version="19.1.1";function bb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bb)}catch(t){console.error(t)}}bb(),vb.exports=Lt;var Qu=vb.exports;const T1=Rp(Qu);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=v1,Eb=L,w1=Qu;function j(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Tb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qy(t){if(tl(t)!==t)throw Error(j(188))}function S1(t){var e=t.alternate;if(!e){if(e=tl(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qy(i),t;if(s===r)return qy(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Sb(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Sb(t),e!==null)return e;t=t.sibling}return null}var Oe=Object.assign,x1=Symbol.for("react.element"),Zl=Symbol.for("react.transitional.element"),qa=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),xb=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),A1=Symbol.for("react.provider"),Ab=Symbol.for("react.consumer"),Qn=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.suspense_list"),Vp=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),sf=Symbol.for("react.activity"),I1=Symbol.for("react.memo_cache_sentinel"),$y=Symbol.iterator;function Ma(t){return t===null||typeof t!="object"?null:(t=$y&&t[$y]||t["@@iterator"],typeof t=="function"?t:null)}var R1=Symbol.for("react.client.reference");function af(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R1?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case tf:return"Profiler";case xb:return"StrictMode";case nf:return"Suspense";case rf:return"SuspenseList";case sf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case qa:return"Portal";case Qn:return(t.displayName||"Context")+".Provider";case Ab:return(t._context.displayName||"Context")+".Consumer";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vp:return e=t.displayName||null,e!==null?e:af(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return af(t(e))}catch{}}return null}var $a=Array.isArray,J=Eb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=w1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wi={pending:!1,data:null,method:null,action:null},of=[],cs=-1;function Bn(t){return{current:t}}function ut(t){0>cs||(t.current=of[cs],of[cs]=null,cs--)}function Le(t,e){cs++,of[cs]=t.current,t.current=e}var Nn=Bn(null),wo=Bn(null),Ur=Bn(null),Hc=Bn(null);function Fc(t,e){switch(Le(Ur,e),Le(wo,t),Le(Nn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?X0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=X0(e),t=FT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ut(Nn),Le(Nn,t)}function Ms(){ut(Nn),ut(wo),ut(Ur)}function lf(t){t.memoizedState!==null&&Le(Hc,t);var e=Nn.current,n=FT(e,t.type);e!==n&&(Le(wo,t),Le(Nn,n))}function Gc(t){wo.current===t&&(ut(Nn),ut(wo)),Hc.current===t&&(ut(Hc),Mo._currentValue=wi)}var cf=Object.prototype.hasOwnProperty,kp=rt.unstable_scheduleCallback,Zd=rt.unstable_cancelCallback,C1=rt.unstable_shouldYield,D1=rt.unstable_requestPaint,On=rt.unstable_now,N1=rt.unstable_getCurrentPriorityLevel,Ib=rt.unstable_ImmediatePriority,Rb=rt.unstable_UserBlockingPriority,qc=rt.unstable_NormalPriority,O1=rt.unstable_LowPriority,Cb=rt.unstable_IdlePriority,M1=rt.log,P1=rt.unstable_setDisableYieldValue,nl=null,Xt=null;function Pr(t){if(typeof M1=="function"&&P1(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(nl,t)}catch{}}var Zt=Math.clz32?Math.clz32:L1,V1=Math.log,k1=Math.LN2;function L1(t){return t>>>=0,t===0?32:31-(V1(t)/k1|0)|0}var Jl=256,ec=4194304;function yi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Wu(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~s,r!==0?i=yi(r):(a&=o,a!==0?i=yi(a):n||(n=o&~t,n!==0&&(i=yi(n))))):(o=r&~s,o!==0?i=yi(o):a!==0?i=yi(a):n||(n=r&~t,n!==0&&(i=yi(n)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:i}function rl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function j1(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Db(){var t=Jl;return Jl<<=1,!(Jl&4194048)&&(Jl=256),t}function Nb(){var t=ec;return ec<<=1,!(ec&62914560)&&(ec=4194304),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function il(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function U1(t,e,n,r,i,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Zt(n),p=1<<d;o[d]=0,c[d]=-1;var f=u[d];if(f!==null)for(u[d]=null,d=0;d<f.length;d++){var m=f[d];m!==null&&(m.lane&=-536870913)}n&=~p}r!==0&&Ob(t,r,0),s!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function Ob(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-Zt(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function Mb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function Lp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function jp(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Pb(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:JT(t.type))}function B1(t,e){var n=_e.p;try{return _e.p=t,e()}finally{_e.p=n}}var ai=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ai,Ht="__reactProps$"+ai,na="__reactContainer$"+ai,uf="__reactEvents$"+ai,z1="__reactListeners$"+ai,H1="__reactHandles$"+ai,Yy="__reactResources$"+ai,sl="__reactMarker$"+ai;function Up(t){delete t[Rt],delete t[Ht],delete t[uf],delete t[z1],delete t[H1]}function us(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[na]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ev(t);t!==null;){if(n=t[Rt])return n;t=ev(t)}return e}t=n,n=t.parentNode}return null}function ra(t){if(t=t[Rt]||t[na]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Ya(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(j(33))}function Es(t){var e=t[Yy];return e||(e=t[Yy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function lt(t){t[sl]=!0}var Vb=new Set,kb={};function Hi(t,e){Ps(t,e),Ps(t+"Capture",e)}function Ps(t,e){for(kb[t]=e,t=0;t<e.length;t++)Vb.add(e[t])}var F1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ky={},Qy={};function G1(t){return cf.call(Qy,t)?!0:cf.call(Ky,t)?!1:F1.test(t)?Qy[t]=!0:(Ky[t]=!0,!1)}function bc(t,e,n){if(G1(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function tc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function qn(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var eh,Wy;function ns(t){if(eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||"",Wy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eh+t+Wy}var th=!1;function nh(t,e){if(!t||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(m){var f=m}Reflect.construct(t,[],p)}else{try{p.call()}catch(m){f=m}t.call(p.prototype)}}else{try{throw Error()}catch(m){f=m}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(m){if(m&&f&&typeof m.stack=="string")return[m.stack,f.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var c=a.split(`
`),u=o.split(`
`);for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===u.length)for(r=c.length-1,i=u.length-1;1<=r&&0<=i&&c[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==u[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==u[i]){var d=`
`+c[r].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=r&&0<=i);break}}}finally{th=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ns(n):""}function q1(t){switch(t.tag){case 26:case 27:case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return nh(t.type,!1);case 11:return nh(t.type.render,!1);case 1:return nh(t.type,!0);case 31:return ns("Activity");default:return""}}function Xy(t){try{var e="";do e+=q1(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $1(t){var e=Lb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $c(t){t._valueTracker||(t._valueTracker=$1(t))}function jb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Y1=/[\n"\\]/g;function dn(t){return t.replace(Y1,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function df(t,e,n,r,i,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ln(e)):t.value!==""+ln(e)&&(t.value=""+ln(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?hf(t,a,ln(e)):n!=null?hf(t,a,ln(n)):r!=null&&t.removeAttribute("value"),i==null&&s!=null&&(t.defaultChecked=!!s),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+ln(o):t.removeAttribute("name")}function Ub(t,e,n,r,i,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+ln(n):"",e=e!=null?""+ln(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function hf(t,e,n){e==="number"&&Yc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ts(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bb(t,e,n){if(e!=null&&(e=""+ln(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ln(n):""}function zb(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(j(92));if($a(r)){if(1<r.length)throw Error(j(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=ln(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Vs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var K1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zy(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||K1.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Hb(t,e,n){if(e!=null&&typeof e!="object")throw Error(j(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&Zy(t,i,r)}else for(var s in e)e.hasOwnProperty(s)&&Zy(t,s,e[s])}function Bp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ec(t){return W1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ff=null;function zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ds=null,ws=null;function Jy(t){var e=ra(t);if(e&&(t=e.stateNode)){var n=t[Ht]||null;e:switch(t=e.stateNode,e.type){case"input":if(df(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Ht]||null;if(!i)throw Error(j(90));df(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&jb(r)}break e;case"textarea":Bb(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}}}var rh=!1;function Fb(t,e,n){if(rh)return t(e,n);rh=!0;try{var r=t(e);return r}finally{if(rh=!1,(ds!==null||ws!==null)&&(ad(),ds&&(e=ds,t=ws,ws=ds=null,Jy(e),t)))for(e=0;e<t.length;e++)Jy(t[e])}}function So(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Ht]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=!1;if(or)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){pf=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{pf=!1}var Vr=null,Hp=null,Tc=null;function Gb(){if(Tc)return Tc;var t,e=Hp,n=e.length,r,i="value"in Vr?Vr.value:Vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Tc=i.slice(t,1<r?1-r:void 0)}function wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nc(){return!0}function e0(){return!1}function Ft(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nc:e0,this.isPropagationStopped=e0,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=Ft(Fi),al=Oe({},Fi,{view:0,detail:0}),X1=Ft(al),ih,sh,Va,Zu=Oe({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Va&&(Va&&t.type==="mousemove"?(ih=t.screenX-Va.screenX,sh=t.screenY-Va.screenY):sh=ih=0,Va=t),ih)},movementY:function(t){return"movementY"in t?t.movementY:sh}}),t0=Ft(Zu),Z1=Oe({},Zu,{dataTransfer:0}),J1=Ft(Z1),eI=Oe({},al,{relatedTarget:0}),ah=Ft(eI),tI=Oe({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=Ft(tI),rI=Oe({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iI=Ft(rI),sI=Oe({},Fi,{data:0}),n0=Ft(sI),aI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lI[t])?!!e[t]:!1}function Fp(){return cI}var uI=Oe({},al,{key:function(t){if(t.key){var e=aI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fp,charCode:function(t){return t.type==="keypress"?wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dI=Ft(uI),hI=Oe({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r0=Ft(hI),fI=Oe({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fp}),pI=Ft(fI),gI=Oe({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=Ft(gI),yI=Oe({},Zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=Ft(yI),_I=Oe({},Fi,{newState:0,oldState:0}),bI=Ft(_I),EI=[9,13,27,32],Gp=or&&"CompositionEvent"in window,to=null;or&&"documentMode"in document&&(to=document.documentMode);var TI=or&&"TextEvent"in window&&!to,qb=or&&(!Gp||to&&8<to&&11>=to),i0=" ",s0=!1;function $b(t,e){switch(t){case"keyup":return EI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function wI(t,e){switch(t){case"compositionend":return Yb(e);case"keypress":return e.which!==32?null:(s0=!0,i0);case"textInput":return t=e.data,t===i0&&s0?null:t;default:return null}}function SI(t,e){if(hs)return t==="compositionend"||!Gp&&$b(t,e)?(t=Gb(),Tc=Hp=Vr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qb&&e.locale!=="ko"?null:e.data;default:return null}}var xI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xI[t.type]:e==="textarea"}function Kb(t,e,n,r){ds?ws?ws.push(r):ws=[r]:ds=r,e=du(e,"onChange"),0<e.length&&(n=new Xu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,xo=null;function AI(t){BT(t,0)}function Ju(t){var e=Ya(t);if(jb(e))return t}function o0(t,e){if(t==="change")return e}var Qb=!1;if(or){var oh;if(or){var lh="oninput"in document;if(!lh){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),lh=typeof l0.oninput=="function"}oh=lh}else oh=!1;Qb=oh&&(!document.documentMode||9<document.documentMode)}function c0(){no&&(no.detachEvent("onpropertychange",Wb),xo=no=null)}function Wb(t){if(t.propertyName==="value"&&Ju(xo)){var e=[];Kb(e,xo,t,zp(t)),Fb(AI,e)}}function II(t,e,n){t==="focusin"?(c0(),no=e,xo=n,no.attachEvent("onpropertychange",Wb)):t==="focusout"&&c0()}function RI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(xo)}function CI(t,e){if(t==="click")return Ju(e)}function DI(t,e){if(t==="input"||t==="change")return Ju(e)}function NI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rn=typeof Object.is=="function"?Object.is:NI;function Ao(t,e){if(rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cf.call(e,i)||!rn(t[i],e[i]))return!1}return!0}function u0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d0(t,e){var n=u0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u0(n)}}function Xb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zb(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Yc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yc(t.document)}return e}function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var OI=or&&"documentMode"in document&&11>=document.documentMode,fs=null,gf=null,ro=null,mf=!1;function h0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mf||fs==null||fs!==Yc(r)||(r=fs,"selectionStart"in r&&qp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&Ao(ro,r)||(ro=r,r=du(gf,"onSelect"),0<r.length&&(e=new Xu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function gi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ps={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},ch={},Jb={};or&&(Jb=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Gi(t){if(ch[t])return ch[t];if(!ps[t])return t;var e=ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jb)return ch[t]=e[n];return t}var eE=Gi("animationend"),tE=Gi("animationiteration"),nE=Gi("animationstart"),MI=Gi("transitionrun"),PI=Gi("transitionstart"),VI=Gi("transitioncancel"),rE=Gi("transitionend"),iE=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function An(t,e){iE.set(t,e),Hi(e,[t])}var f0=new WeakMap;function hn(t,e){if(typeof t=="object"&&t!==null){var n=f0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Xy(e)},f0.set(t,e),e)}return{value:t,source:e,stack:Xy(e)}}var on=[],gs=0,$p=0;function ed(){for(var t=gs,e=$p=gs=0;e<t;){var n=on[e];on[e++]=null;var r=on[e];on[e++]=null;var i=on[e];on[e++]=null;var s=on[e];if(on[e++]=null,r!==null&&i!==null){var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}s!==0&&sE(n,i,s)}}function td(t,e,n,r){on[gs++]=t,on[gs++]=e,on[gs++]=n,on[gs++]=r,$p|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Yp(t,e,n,r){return td(t,e,n,r),Kc(t)}function ia(t,e){return td(t,null,null,e),Kc(t)}function sE(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(i=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,i&&e!==null&&(i=31-Zt(n),t=s.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),s):null}function Kc(t){if(50<po)throw po=0,jf=null,Error(j(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ms={};function kI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,r){return new kI(t,e,n,r)}function Kp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rr(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function aE(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Sc(t,e,n,r,i,s){var a=0;if(r=t,typeof t=="function")Kp(t)&&(a=1);else if(typeof t=="string")a=jR(t,n,Nn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sf:return t=Qt(31,n,e,i),t.elementType=sf,t.lanes=s,t;case ls:return Si(n.children,i,s,e);case xb:a=8,i|=24;break;case tf:return t=Qt(12,n,e,i|2),t.elementType=tf,t.lanes=s,t;case nf:return t=Qt(13,n,e,i),t.elementType=nf,t.lanes=s,t;case rf:return t=Qt(19,n,e,i),t.elementType=rf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A1:case Qn:a=10;break e;case Ab:a=9;break e;case Pp:a=11;break e;case Vp:a=14;break e;case Sr:a=16,r=null;break e}a=29,n=Error(j(130,t===null?"null":typeof t,"")),r=null}return e=Qt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Si(t,e,n,r){return t=Qt(7,t,r,e),t.lanes=n,t}function uh(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function dh(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ys=[],vs=0,Qc=null,Wc=0,cn=[],un=0,xi=null,Wn=1,Xn="";function vi(t,e){ys[vs++]=Wc,ys[vs++]=Qc,Qc=t,Wc=e}function oE(t,e,n){cn[un++]=Wn,cn[un++]=Xn,cn[un++]=xi,xi=t;var r=Wn;t=Xn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var s=32-Zt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Wn=1<<32-Zt(e)+i|n<<i|r,Xn=s+t}else Wn=1<<s|n<<i|r,Xn=t}function Qp(t){t.return!==null&&(vi(t,1),oE(t,1,0))}function Wp(t){for(;t===Qc;)Qc=ys[--vs],ys[vs]=null,Wc=ys[--vs],ys[vs]=null;for(;t===xi;)xi=cn[--un],cn[un]=null,Xn=cn[--un],cn[un]=null,Wn=cn[--un],cn[un]=null}var Vt=null,ze=null,ve=!1,Ai=null,Rn=!1,vf=Error(j(519));function Ni(t){var e=Error(j(418,""));throw Io(hn(e,t)),vf}function p0(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Rt]=t,e[Ht]=r,n){case"dialog":ce("cancel",e),ce("close",e);break;case"iframe":case"object":case"embed":ce("load",e);break;case"video":case"audio":for(n=0;n<Do.length;n++)ce(Do[n],e);break;case"source":ce("error",e);break;case"img":case"image":case"link":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"input":ce("invalid",e),Ub(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),$c(e);break;case"select":ce("invalid",e);break;case"textarea":ce("invalid",e),zb(e,r.value,r.defaultValue,r.children),$c(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||HT(e.textContent,n)?(r.popover!=null&&(ce("beforetoggle",e),ce("toggle",e)),r.onScroll!=null&&ce("scroll",e),r.onScrollEnd!=null&&ce("scrollend",e),r.onClick!=null&&(e.onclick=cd),e=!0):e=!1,e||Ni(t)}function g0(t){for(Vt=t.return;Vt;)switch(Vt.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Vt=Vt.return}}function ka(t){if(t!==Vt)return!1;if(!ve)return g0(t),ve=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Gf(t.type,t.memoizedProps)),n=!n),n&&ze&&Ni(t),g0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){ze=Sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}ze=null}}else e===27?(e=ze,oi(t.type)?(t=Yf,Yf=null,ze=t):ze=e):ze=Vt?Sn(t.stateNode.nextSibling):null;return!0}function ol(){ze=Vt=null,ve=!1}function m0(){var t=Ai;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),Ai=null),t}function Io(t){Ai===null?Ai=[t]:Ai.push(t)}var _f=Bn(null),qi=null,Zn=null;function Ar(t,e,n){Le(_f,e._currentValue),e._currentValue=n}function ir(t){t._currentValue=_f.current,ut(_f)}function bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ef(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){var a=i.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=i;for(var c=0;c<e.length;c++)if(o.context===e[c]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),bf(s.return,n,t),r||(a=null);break e}s=o.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(j(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),bf(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function ll(t,e,n,r){t=null;for(var i=e,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(j(387));if(a=a.memoizedProps,a!==null){var o=i.type;rn(i.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(i===Hc.current){if(a=i.alternate,a===null)throw Error(j(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Mo):t=[Mo])}i=i.return}t!==null&&Ef(e,t,n,r),e.flags|=262144}function Xc(t){for(t=t.firstContext;t!==null;){if(!rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Oi(t){qi=t,Zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return lE(qi,t)}function rc(t,e){return qi===null&&Oi(t),lE(t,e)}function lE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zn===null){if(t===null)throw Error(j(308));Zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zn=Zn.next=e;return n}var LI=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},jI=rt.unstable_scheduleCallback,UI=rt.unstable_NormalPriority,Je={$$typeof:Qn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xp(){return{controller:new LI,data:new Map,refCount:0}}function cl(t){t.refCount--,t.refCount===0&&jI(UI,function(){t.controller.abort()})}var io=null,Tf=0,ks=0,Ss=null;function BI(t,e){if(io===null){var n=io=[];Tf=0,ks=bg(),Ss={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Tf++,e.then(y0,y0),e}function y0(){if(--Tf===0&&io!==null){Ss!==null&&(Ss.status="fulfilled");var t=io;io=null,ks=0,Ss=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function zI(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var v0=J.S;J.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&BI(t,e),v0!==null&&v0(t,e)};var Ii=Bn(null);function Zp(){var t=Ii.current;return t!==null?t:De.pooledCache}function xc(t,e){e===null?Le(Ii,Ii.current):Le(Ii,e.pool)}function cE(){var t=Zp();return t===null?null:{parent:Je._currentValue,pool:t}}var ul=Error(j(460)),uE=Error(j(474)),nd=Error(j(542)),wf={then:function(){}};function _0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ic(){}function dE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ic,ic),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,E0(t),t;default:if(typeof e.status=="string")e.then(ic,ic);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(j(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,E0(t),t}throw so=e,ul}}var so=null;function b0(){if(so===null)throw Error(j(459));var t=so;return so=null,t}function E0(t){if(t===ul||t===nd)throw Error(j(483))}var xr=!1;function Jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Kc(t),sE(t,null,n),e}return td(t,r,e,n),Kc(t)}function ao(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mb(t,n)}}function hh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var xf=!1;function oo(){if(xf){var t=Ss;if(t!==null)throw t}}function lo(t,e,n,r){xf=!1;var i=t.updateQueue;xr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,d=u=c=null,o=s;do{var f=o.lane&-536870913,m=f!==o.lane;if(m?(ge&f)===f:(r&f)===f){f!==0&&f===ks&&(xf=!0),d!==null&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var A=t,D=o;f=e;var R=n;switch(D.tag){case 1:if(A=D.payload,typeof A=="function"){p=A.call(R,p,f);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=D.payload,f=typeof A=="function"?A.call(R,p,f):A,f==null)break e;p=Oe({},p,f);break e;case 2:xr=!0}}f=o.callback,f!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=p):d=d.next=m,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);d===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,s===null&&(i.shared.lanes=0),ti|=a,t.lanes=a,t.memoizedState=p}}function hE(t,e){if(typeof t!="function")throw Error(j(191,t));t.call(e)}function fE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)hE(n[t],e)}var Ls=Bn(null),Zc=Bn(0);function T0(t,e){t=ur,Le(Zc,t),Le(Ls,e),ur=t|e.baseLanes}function Af(){Le(Zc,ur),Le(Ls,Ls.current)}function eg(){ur=Zc.current,ut(Ls),ut(Zc)}var Jr=0,le=null,Ae=null,Qe=null,Jc=!1,xs=!1,Mi=!1,eu=0,Ro=0,As=null,HI=0;function qe(){throw Error(j(321))}function tg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rn(t[n],e[n]))return!1;return!0}function ng(t,e,n,r,i,s){return Jr=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,J.H=t===null||t.memoizedState===null?GE:qE,Mi=!1,s=n(r,i),Mi=!1,xs&&(s=gE(e,n,r,i)),pE(t),s}function pE(t){J.H=tu;var e=Ae!==null&&Ae.next!==null;if(Jr=0,Qe=Ae=le=null,Jc=!1,Ro=0,As=null,e)throw Error(j(300));t===null||ct||(t=t.dependencies,t!==null&&Xc(t)&&(ct=!0))}function gE(t,e,n,r){le=t;var i=0;do{if(xs&&(As=null),Ro=0,xs=!1,25<=i)throw Error(j(301));if(i+=1,Qe=Ae=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}J.H=QI,s=e(n,r)}while(xs);return s}function FI(){var t=J.H,e=t.useState()[0];return e=typeof e.then=="function"?dl(e):e,t=t.useState()[0],(Ae!==null?Ae.memoizedState:null)!==t&&(le.flags|=1024),e}function rg(){var t=eu!==0;return eu=0,t}function ig(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function sg(t){if(Jc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Jc=!1}Jr=0,Qe=Ae=le=null,xs=!1,Ro=eu=0,As=null}function Ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?le.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function We(){if(Ae===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Qe===null?le.memoizedState:Qe.next;if(e!==null)Qe=e,Ae=t;else{if(t===null)throw le.alternate===null?Error(j(467)):Error(j(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Qe===null?le.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function ag(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(t){var e=Ro;return Ro+=1,As===null&&(As=[]),t=dE(As,t,e),e=le,(Qe===null?e.memoizedState:Qe.next)===null&&(e=e.alternate,J.H=e===null||e.memoizedState===null?GE:qE),t}function rd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dl(t);if(t.$$typeof===Qn)return Ct(t)}throw Error(j(438,String(t)))}function og(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=le.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=ag(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=I1;return e.index++,n}function lr(t,e){return typeof e=="function"?e(t):e}function Ac(t){var e=We();return lg(e,Ae,t)}function lg(t,e,n){var r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=n;var i=t.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}e.baseQueue=i=s,r.pending=null}if(s=t.baseState,i===null)t.memoizedState=s;else{e=i.next;var o=a=null,c=null,u=e,d=!1;do{var p=u.lane&-536870913;if(p!==u.lane?(ge&p)===p:(Jr&p)===p){var f=u.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===ks&&(d=!0);else if((Jr&f)===f){u=u.next,f===ks&&(d=!0);continue}else p={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=p,a=s):c=c.next=p,le.lanes|=f,ti|=f;p=u.action,Mi&&n(s,p),s=u.hasEagerState?u.eagerState:n(s,p)}else f={lane:p,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=f,a=s):c=c.next=f,le.lanes|=p,ti|=p;u=u.next}while(u!==null&&u!==e);if(c===null?a=s:c.next=o,!rn(s,t.memoizedState)&&(ct=!0,d&&(n=Ss,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=c,r.lastRenderedState=s}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function fh(t){var e=We(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);rn(s,e.memoizedState)||(ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function mE(t,e,n){var r=le,i=We(),s=ve;if(s){if(n===void 0)throw Error(j(407));n=n()}else n=e();var a=!rn((Ae||i).memoizedState,n);a&&(i.memoizedState=n,ct=!0),i=i.queue;var o=_E.bind(null,r,i,t);if(hl(2048,8,o,[t]),i.getSnapshot!==e||a||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,js(9,id(),vE.bind(null,r,i,n,e),null),De===null)throw Error(j(349));s||Jr&124||yE(r,e,n)}return n}function yE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=ag(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vE(t,e,n,r){e.value=n,e.getSnapshot=r,bE(e)&&EE(t)}function _E(t,e,n){return n(function(){bE(e)&&EE(t)})}function bE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rn(t,n)}catch{return!0}}function EE(t){var e=ia(t,2);e!==null&&en(e,t,2)}function If(t){var e=Ut();if(typeof t=="function"){var n=t;if(t=n(),Mi){Pr(!0);try{n()}finally{Pr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:t},e}function TE(t,e,n,r){return t.baseState=n,lg(t,Ae,typeof r=="function"?r:lr)}function GI(t,e,n,r,i){if(sd(t))throw Error(j(485));if(t=e.action,t!==null){var s={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};J.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,wE(e,s)):(s.next=n.next,e.pending=n.next=s)}}function wE(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var s=J.T,a={};J.T=a;try{var o=n(i,r),c=J.S;c!==null&&c(a,o),w0(t,e,o)}catch(u){Rf(t,e,u)}finally{J.T=s}}else try{s=n(i,r),w0(t,e,s)}catch(u){Rf(t,e,u)}}function w0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){S0(t,e,r)},function(r){return Rf(t,e,r)}):S0(t,e,n)}function S0(t,e,n){e.status="fulfilled",e.value=n,SE(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,wE(t,n)))}function Rf(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,SE(e),e=e.next;while(e!==r)}t.action=null}function SE(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function xE(t,e){return e}function x0(t,e){if(ve){var n=De.formState;if(n!==null){e:{var r=le;if(ve){if(ze){t:{for(var i=ze,s=Rn;i.nodeType!==8;){if(!s){i=null;break t}if(i=Sn(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){ze=Sn(i.nextSibling),r=i.data==="F!";break e}}Ni(r)}r=!1}r&&(e=n[0])}}return n=Ut(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xE,lastRenderedState:e},n.queue=r,n=zE.bind(null,le,r),r.dispatch=n,r=If(!1),s=hg.bind(null,le,!1,r.queue),r=Ut(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=GI.bind(null,le,i,s,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function A0(t){var e=We();return AE(e,Ae,t)}function AE(t,e,n){if(e=lg(t,e,xE)[0],t=Ac(lr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=dl(e)}catch(a){throw a===ul?nd:a}else r=e;e=We();var i=e.queue,s=i.dispatch;return n!==e.memoizedState&&(le.flags|=2048,js(9,id(),qI.bind(null,i,n),null)),[r,s,t]}function qI(t,e){t.action=e}function I0(t){var e=We(),n=Ae;if(n!==null)return AE(e,n,t);We(),e=e.memoizedState,n=We();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function js(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=le.updateQueue,e===null&&(e=ag(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function id(){return{destroy:void 0,resource:void 0}}function IE(){return We().memoizedState}function Ic(t,e,n,r){var i=Ut();r=r===void 0?null:r,le.flags|=t,i.memoizedState=js(1|e,id(),n,r)}function hl(t,e,n,r){var i=We();r=r===void 0?null:r;var s=i.memoizedState.inst;Ae!==null&&r!==null&&tg(r,Ae.memoizedState.deps)?i.memoizedState=js(e,s,n,r):(le.flags|=t,i.memoizedState=js(1|e,s,n,r))}function R0(t,e){Ic(8390656,8,t,e)}function RE(t,e){hl(2048,8,t,e)}function CE(t,e){return hl(4,2,t,e)}function DE(t,e){return hl(4,4,t,e)}function NE(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OE(t,e,n){n=n!=null?n.concat([t]):null,hl(4,4,NE.bind(null,e,t),n)}function cg(){}function ME(t,e){var n=We();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&tg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PE(t,e){var n=We();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&tg(e,r[1]))return r[0];if(r=t(),Mi){Pr(!0);try{t()}finally{Pr(!1)}}return n.memoizedState=[r,e],r}function ug(t,e,n){return n===void 0||Jr&1073741824?t.memoizedState=e:(t.memoizedState=n,t=ST(),le.lanes|=t,ti|=t,n)}function VE(t,e,n,r){return rn(n,e)?n:Ls.current!==null?(t=ug(t,n,r),rn(t,e)||(ct=!0),t):Jr&42?(t=ST(),le.lanes|=t,ti|=t,e):(ct=!0,t.memoizedState=n)}function kE(t,e,n,r,i){var s=_e.p;_e.p=s!==0&&8>s?s:8;var a=J.T,o={};J.T=o,hg(t,!1,e,n);try{var c=i(),u=J.S;if(u!==null&&u(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=zI(c,r);co(t,e,d,Jt(t))}else co(t,e,r,Jt(t))}catch(p){co(t,e,{then:function(){},status:"rejected",reason:p},Jt())}finally{_e.p=s,J.T=a}}function $I(){}function Cf(t,e,n,r){if(t.tag!==5)throw Error(j(476));var i=LE(t).queue;kE(t,i,e,wi,n===null?$I:function(){return jE(t),n(r)})}function LE(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:wi,baseState:wi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:wi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function jE(t){var e=LE(t).next.queue;co(t,e,{},Jt())}function dg(){return Ct(Mo)}function UE(){return We().memoizedState}function BE(){return We().memoizedState}function YI(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Jt();t=Br(n);var r=zr(e,t,n);r!==null&&(en(r,e,n),ao(r,e,n)),e={cache:Xp()},t.payload=e;return}e=e.return}}function KI(t,e,n){var r=Jt();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},sd(t)?HE(e,n):(n=Yp(t,e,n,r),n!==null&&(en(n,t,r),FE(n,e,r)))}function zE(t,e,n){var r=Jt();co(t,e,n,r)}function co(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(sd(t))HE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,rn(o,a))return td(t,e,i,0),De===null&&ed(),!1}catch{}finally{}if(n=Yp(t,e,i,r),n!==null)return en(n,t,r),FE(n,e,r),!0}return!1}function hg(t,e,n,r){if(r={lane:2,revertLane:bg(),action:r,hasEagerState:!1,eagerState:null,next:null},sd(t)){if(e)throw Error(j(479))}else e=Yp(t,n,r,2),e!==null&&en(e,t,2)}function sd(t){var e=t.alternate;return t===le||e!==null&&e===le}function HE(t,e){xs=Jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FE(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mb(t,n)}}var tu={readContext:Ct,use:rd,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe},GE={readContext:Ct,use:rd,useCallback:function(t,e){return Ut().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:R0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ic(4194308,4,NE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ic(4194308,4,t,e)},useInsertionEffect:function(t,e){Ic(4,2,t,e)},useMemo:function(t,e){var n=Ut();e=e===void 0?null:e;var r=t();if(Mi){Pr(!0);try{t()}finally{Pr(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Ut();if(n!==void 0){var i=n(e);if(Mi){Pr(!0);try{n(e)}finally{Pr(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=KI.bind(null,le,t),[r.memoizedState,t]},useRef:function(t){var e=Ut();return t={current:t},e.memoizedState=t},useState:function(t){t=If(t);var e=t.queue,n=zE.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:cg,useDeferredValue:function(t,e){var n=Ut();return ug(n,t,e)},useTransition:function(){var t=If(!1);return t=kE.bind(null,le,t.queue,!0,!1),Ut().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=le,i=Ut();if(ve){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),De===null)throw Error(j(349));ge&124||yE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,R0(_E.bind(null,r,s,t),[t]),r.flags|=2048,js(9,id(),vE.bind(null,r,s,n,e),null),n},useId:function(){var t=Ut(),e=De.identifierPrefix;if(ve){var n=Xn,r=Wn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=""+e+"R"+n,n=eu++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=HI++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:dg,useFormState:x0,useActionState:x0,useOptimistic:function(t){var e=Ut();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=hg.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:og,useCacheRefresh:function(){return Ut().memoizedState=YI.bind(null,le)}},qE={readContext:Ct,use:rd,useCallback:ME,useContext:Ct,useEffect:RE,useImperativeHandle:OE,useInsertionEffect:CE,useLayoutEffect:DE,useMemo:PE,useReducer:Ac,useRef:IE,useState:function(){return Ac(lr)},useDebugValue:cg,useDeferredValue:function(t,e){var n=We();return VE(n,Ae.memoizedState,t,e)},useTransition:function(){var t=Ac(lr)[0],e=We().memoizedState;return[typeof t=="boolean"?t:dl(t),e]},useSyncExternalStore:mE,useId:UE,useHostTransitionStatus:dg,useFormState:A0,useActionState:A0,useOptimistic:function(t,e){var n=We();return TE(n,Ae,t,e)},useMemoCache:og,useCacheRefresh:BE},QI={readContext:Ct,use:rd,useCallback:ME,useContext:Ct,useEffect:RE,useImperativeHandle:OE,useInsertionEffect:CE,useLayoutEffect:DE,useMemo:PE,useReducer:fh,useRef:IE,useState:function(){return fh(lr)},useDebugValue:cg,useDeferredValue:function(t,e){var n=We();return Ae===null?ug(n,t,e):VE(n,Ae.memoizedState,t,e)},useTransition:function(){var t=fh(lr)[0],e=We().memoizedState;return[typeof t=="boolean"?t:dl(t),e]},useSyncExternalStore:mE,useId:UE,useHostTransitionStatus:dg,useFormState:I0,useActionState:I0,useOptimistic:function(t,e){var n=We();return Ae!==null?TE(n,Ae,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:og,useCacheRefresh:BE},Is=null,Co=0;function sc(t){var e=Co;return Co+=1,Is===null&&(Is=[]),dE(Is,t,e)}function La(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ac(t,e){throw e.$$typeof===x1?Error(j(525)):(t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function C0(t){var e=t._init;return e(t._payload)}function $E(t){function e(_,b){if(t){var T=_.deletions;T===null?(_.deletions=[b],_.flags|=16):T.push(b)}}function n(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function r(_){for(var b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function i(_,b){return _=rr(_,b),_.index=0,_.sibling=null,_}function s(_,b,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<b?(_.flags|=67108866,b):T):(_.flags|=67108866,b)):(_.flags|=1048576,b)}function a(_){return t&&_.alternate===null&&(_.flags|=67108866),_}function o(_,b,T,N){return b===null||b.tag!==6?(b=uh(T,_.mode,N),b.return=_,b):(b=i(b,T),b.return=_,b)}function c(_,b,T,N){var M=T.type;return M===ls?d(_,b,T.props.children,N,T.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Sr&&C0(M)===b.type)?(b=i(b,T.props),La(b,T),b.return=_,b):(b=Sc(T.type,T.key,T.props,null,_.mode,N),La(b,T),b.return=_,b)}function u(_,b,T,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=dh(T,_.mode,N),b.return=_,b):(b=i(b,T.children||[]),b.return=_,b)}function d(_,b,T,N,M){return b===null||b.tag!==7?(b=Si(T,_.mode,N,M),b.return=_,b):(b=i(b,T),b.return=_,b)}function p(_,b,T){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=uh(""+b,_.mode,T),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zl:return T=Sc(b.type,b.key,b.props,null,_.mode,T),La(T,b),T.return=_,T;case qa:return b=dh(b,_.mode,T),b.return=_,b;case Sr:var N=b._init;return b=N(b._payload),p(_,b,T)}if($a(b)||Ma(b))return b=Si(b,_.mode,T,null),b.return=_,b;if(typeof b.then=="function")return p(_,sc(b),T);if(b.$$typeof===Qn)return p(_,rc(_,b),T);ac(_,b)}return null}function f(_,b,T,N){var M=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return M!==null?null:o(_,b,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Zl:return T.key===M?c(_,b,T,N):null;case qa:return T.key===M?u(_,b,T,N):null;case Sr:return M=T._init,T=M(T._payload),f(_,b,T,N)}if($a(T)||Ma(T))return M!==null?null:d(_,b,T,N,null);if(typeof T.then=="function")return f(_,b,sc(T),N);if(T.$$typeof===Qn)return f(_,b,rc(_,T),N);ac(_,T)}return null}function m(_,b,T,N,M){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return _=_.get(T)||null,o(b,_,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Zl:return _=_.get(N.key===null?T:N.key)||null,c(b,_,N,M);case qa:return _=_.get(N.key===null?T:N.key)||null,u(b,_,N,M);case Sr:var V=N._init;return N=V(N._payload),m(_,b,T,N,M)}if($a(N)||Ma(N))return _=_.get(T)||null,d(b,_,N,M,null);if(typeof N.then=="function")return m(_,b,T,sc(N),M);if(N.$$typeof===Qn)return m(_,b,T,rc(b,N),M);ac(b,N)}return null}function A(_,b,T,N){for(var M=null,V=null,w=b,v=b=0,x=null;w!==null&&v<T.length;v++){w.index>v?(x=w,w=null):x=w.sibling;var S=f(_,w,T[v],N);if(S===null){w===null&&(w=x);break}t&&w&&S.alternate===null&&e(_,w),b=s(S,b,v),V===null?M=S:V.sibling=S,V=S,w=x}if(v===T.length)return n(_,w),ve&&vi(_,v),M;if(w===null){for(;v<T.length;v++)w=p(_,T[v],N),w!==null&&(b=s(w,b,v),V===null?M=w:V.sibling=w,V=w);return ve&&vi(_,v),M}for(w=r(w);v<T.length;v++)x=m(w,_,v,T[v],N),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?v:x.key),b=s(x,b,v),V===null?M=x:V.sibling=x,V=x);return t&&w.forEach(function(I){return e(_,I)}),ve&&vi(_,v),M}function D(_,b,T,N){if(T==null)throw Error(j(151));for(var M=null,V=null,w=b,v=b=0,x=null,S=T.next();w!==null&&!S.done;v++,S=T.next()){w.index>v?(x=w,w=null):x=w.sibling;var I=f(_,w,S.value,N);if(I===null){w===null&&(w=x);break}t&&w&&I.alternate===null&&e(_,w),b=s(I,b,v),V===null?M=I:V.sibling=I,V=I,w=x}if(S.done)return n(_,w),ve&&vi(_,v),M;if(w===null){for(;!S.done;v++,S=T.next())S=p(_,S.value,N),S!==null&&(b=s(S,b,v),V===null?M=S:V.sibling=S,V=S);return ve&&vi(_,v),M}for(w=r(w);!S.done;v++,S=T.next())S=m(w,_,v,S.value,N),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?v:S.key),b=s(S,b,v),V===null?M=S:V.sibling=S,V=S);return t&&w.forEach(function(O){return e(_,O)}),ve&&vi(_,v),M}function R(_,b,T,N){if(typeof T=="object"&&T!==null&&T.type===ls&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Zl:e:{for(var M=T.key;b!==null;){if(b.key===M){if(M=T.type,M===ls){if(b.tag===7){n(_,b.sibling),N=i(b,T.props.children),N.return=_,_=N;break e}}else if(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Sr&&C0(M)===b.type){n(_,b.sibling),N=i(b,T.props),La(N,T),N.return=_,_=N;break e}n(_,b);break}else e(_,b);b=b.sibling}T.type===ls?(N=Si(T.props.children,_.mode,N,T.key),N.return=_,_=N):(N=Sc(T.type,T.key,T.props,null,_.mode,N),La(N,T),N.return=_,_=N)}return a(_);case qa:e:{for(M=T.key;b!==null;){if(b.key===M)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(_,b.sibling),N=i(b,T.children||[]),N.return=_,_=N;break e}else{n(_,b);break}else e(_,b);b=b.sibling}N=dh(T,_.mode,N),N.return=_,_=N}return a(_);case Sr:return M=T._init,T=M(T._payload),R(_,b,T,N)}if($a(T))return A(_,b,T,N);if(Ma(T)){if(M=Ma(T),typeof M!="function")throw Error(j(150));return T=M.call(T),D(_,b,T,N)}if(typeof T.then=="function")return R(_,b,sc(T),N);if(T.$$typeof===Qn)return R(_,b,rc(_,T),N);ac(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,b!==null&&b.tag===6?(n(_,b.sibling),N=i(b,T),N.return=_,_=N):(n(_,b),N=uh(T,_.mode,N),N.return=_,_=N),a(_)):n(_,b)}return function(_,b,T,N){try{Co=0;var M=R(_,b,T,N);return Is=null,M}catch(w){if(w===ul||w===nd)throw w;var V=Qt(29,w,null,_.mode);return V.lanes=N,V.return=_,V}finally{}}}var Us=$E(!0),YE=$E(!1),vn=Bn(null),Mn=null;function Ir(t){var e=t.alternate;Le(et,et.current&1),Le(vn,t),Mn===null&&(e===null||Ls.current!==null||e.memoizedState!==null)&&(Mn=t)}function KE(t){if(t.tag===22){if(Le(et,et.current),Le(vn,t),Mn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Mn=t)}}else Rr()}function Rr(){Le(et,et.current),Le(vn,vn.current)}function Jn(t){ut(vn),Mn===t&&(Mn=null),ut(et)}var et=Bn(0);function nu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||$f(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ph(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Df={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Br(r);i.payload=e,n!=null&&(i.callback=n),e=zr(t,i,r),e!==null&&(en(e,t,r),ao(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Br(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zr(t,i,r),e!==null&&(en(e,t,r),ao(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Br(n);r.tag=2,e!=null&&(r.callback=e),e=zr(t,r,n),e!==null&&(en(e,t,n),ao(e,t,n))}};function D0(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ao(n,r)||!Ao(i,s):!0}function N0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function Pi(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=Oe({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function QE(t){ru(t)}function WE(t){console.error(t)}function XE(t){ru(t)}function iu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function O0(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Nf(t,e,n){return n=Br(n),n.tag=3,n.payload={element:null},n.callback=function(){iu(t,e)},n}function ZE(t){return t=Br(t),t.tag=3,t}function JE(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=r.value;t.payload=function(){return i(s)},t.callback=function(){O0(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){O0(e,n,r),typeof i!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function WI(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&ll(e,n,i,!0),n=vn.current,n!==null){switch(n.tag){case 13:return Mn===null?Uf():n.alternate===null&&He===0&&(He=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===wf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),xh(t,r,i)),!1;case 22:return n.flags|=65536,r===wf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),xh(t,r,i)),!1}throw Error(j(435,n.tag))}return xh(t,r,i),Uf(),!1}if(ve)return e=vn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==vf&&(t=Error(j(422),{cause:r}),Io(hn(t,n)))):(r!==vf&&(e=Error(j(423),{cause:r}),Io(hn(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=hn(r,n),i=Nf(t.stateNode,r,i),hh(t,i),He!==4&&(He=2)),!1;var s=Error(j(520),{cause:r});if(s=hn(s,n),fo===null?fo=[s]:fo.push(s),He!==4&&(He=2),e===null)return!0;r=hn(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Nf(n.stateNode,r,t),hh(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Hr===null||!Hr.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=ZE(i),JE(i,t,n,r),hh(n,i),!1}n=n.return}while(n!==null);return!1}var eT=Error(j(461)),ct=!1;function pt(t,e,n,r){e.child=t===null?YE(e,null,n,r):Us(e,t.child,n,r)}function M0(t,e,n,r,i){n=n.render;var s=e.ref;if("ref"in r){var a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}else a=r;return Oi(e),r=ng(t,e,n,a,s,i),o=rg(),t!==null&&!ct?(ig(t,e,i),cr(t,e,i)):(ve&&o&&Qp(e),e.flags|=1,pt(t,e,r,i),e.child)}function P0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kp(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,tT(t,e,s,r,i)):(t=Sc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!fg(t,i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(a,r)&&t.ref===e.ref)return cr(t,e,i)}return e.flags|=1,t=rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function tT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ao(s,r)&&t.ref===e.ref)if(ct=!1,e.pendingProps=r=s,fg(t,i))t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,cr(t,e,i)}return Of(t,e,n,r,i)}function nT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;e.childLanes=s&~r}else e.childLanes=0,e.child=null;return V0(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&xc(e,s!==null?s.cachePool:null),s!==null?T0(e,s):Af(),KE(e);else return e.lanes=e.childLanes=536870912,V0(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(xc(e,s.cachePool),T0(e,s),Rr(),e.memoizedState=null):(t!==null&&xc(e,null),Af(),Rr());return pt(t,e,i,n),e.child}function V0(t,e,n,r){var i=Zp();return i=i===null?null:{parent:Je._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&xc(e,null),Af(),KE(e),t!==null&&ll(t,e,r,!0),null}function Rc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Of(t,e,n,r,i){return Oi(e),n=ng(t,e,n,r,void 0,i),r=rg(),t!==null&&!ct?(ig(t,e,i),cr(t,e,i)):(ve&&r&&Qp(e),e.flags|=1,pt(t,e,n,i),e.child)}function k0(t,e,n,r,i,s){return Oi(e),e.updateQueue=null,n=gE(e,r,n,i),pE(t),r=rg(),t!==null&&!ct?(ig(t,e,s),cr(t,e,s)):(ve&&r&&Qp(e),e.flags|=1,pt(t,e,n,s),e.child)}function L0(t,e,n,r,i){if(Oi(e),e.stateNode===null){var s=ms,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ct(a)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Df,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},Jp(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ct(a):ms,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(ph(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Df.enqueueReplaceState(s,s.state,null),lo(e,r,s,i),oo(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,c=Pi(n,o);s.props=c;var u=s.context,d=n.contextType;a=ms,typeof d=="object"&&d!==null&&(a=Ct(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||u!==a)&&N0(e,s,r,a),xr=!1;var f=e.memoizedState;s.state=f,lo(e,r,s,i),oo(),u=e.memoizedState,o||f!==u||xr?(typeof p=="function"&&(ph(e,n,p,r),u=e.memoizedState),(c=xr||D0(e,n,c,r,f,u,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=a,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Sf(t,e),a=e.memoizedProps,d=Pi(n,a),s.props=d,p=e.pendingProps,f=s.context,u=n.contextType,c=ms,typeof u=="object"&&u!==null&&(c=Ct(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||f!==c)&&N0(e,s,r,c),xr=!1,f=e.memoizedState,s.state=f,lo(e,r,s,i),oo();var m=e.memoizedState;a!==p||f!==m||xr||t!==null&&t.dependencies!==null&&Xc(t.dependencies)?(typeof o=="function"&&(ph(e,n,o,r),m=e.memoizedState),(d=xr||D0(e,n,d,r,f,m,c)||t!==null&&t.dependencies!==null&&Xc(t.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,Rc(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=Us(e,t.child,null,i),e.child=Us(e,null,n,i)):pt(t,e,n,i),e.memoizedState=s.state,t=e.child):t=cr(t,e,i),t}function j0(t,e,n,r){return ol(),e.flags|=256,pt(t,e,n,r),e.child}var gh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mh(t){return{baseLanes:t,cachePool:cE()}}function yh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=pn),t}function rT(t,e,n){var r=e.pendingProps,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(et.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(ve){if(i?Ir(e):Rr(),ve){var o=ze,c;if(c=o){e:{for(c=o,o=Rn;c.nodeType!==8;){if(!o){o=null;break e}if(c=Sn(c.nextSibling),c===null){o=null;break e}}o=c}o!==null?(e.memoizedState={dehydrated:o,treeContext:xi!==null?{id:Wn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},c=Qt(18,null,null,0),c.stateNode=o,c.return=e,e.child=c,Vt=e,ze=null,c=!0):c=!1}c||Ni(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return $f(o)?e.lanes=32:e.lanes=536870912,null;Jn(e)}return o=r.children,r=r.fallback,i?(Rr(),i=e.mode,o=su({mode:"hidden",children:o},i),r=Si(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,i=e.child,i.memoizedState=mh(n),i.childLanes=yh(t,a,n),e.memoizedState=gh,r):(Ir(e),Mf(e,o))}if(c=t.memoizedState,c!==null&&(o=c.dehydrated,o!==null)){if(s)e.flags&256?(Ir(e),e.flags&=-257,e=vh(t,e,n)):e.memoizedState!==null?(Rr(),e.child=t.child,e.flags|=128,e=null):(Rr(),i=r.fallback,o=e.mode,r=su({mode:"visible",children:r.children},o),i=Si(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Us(e,t.child,null,n),r=e.child,r.memoizedState=mh(n),r.childLanes=yh(t,a,n),e.memoizedState=gh,e=i);else if(Ir(e),$f(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,r=Error(j(419)),r.stack="",r.digest=a,Io({value:r,source:null,stack:null}),e=vh(t,e,n)}else if(ct||ll(t,e,n,!1),a=(n&t.childLanes)!==0,ct||a){if(a=De,a!==null&&(r=n&-n,r=r&42?1:Lp(r),r=r&(a.suspendedLanes|n)?0:r,r!==0&&r!==c.retryLane))throw c.retryLane=r,ia(t,r),en(a,t,r),eT;o.data==="$?"||Uf(),e=vh(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,ze=Sn(o.nextSibling),Vt=e,ve=!0,Ai=null,Rn=!1,t!==null&&(cn[un++]=Wn,cn[un++]=Xn,cn[un++]=xi,Wn=t.id,Xn=t.overflow,xi=e),e=Mf(e,r.children),e.flags|=4096);return e}return i?(Rr(),i=r.fallback,o=e.mode,c=t.child,u=c.sibling,r=rr(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,u!==null?i=rr(u,i):(i=Si(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o===null?o=mh(n):(c=o.cachePool,c!==null?(u=Je._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=cE(),o={baseLanes:o.baseLanes|n,cachePool:c}),i.memoizedState=o,i.childLanes=yh(t,a,n),e.memoizedState=gh,r):(Ir(e),n=t.child,t=n.sibling,n=rr(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Mf(t,e){return e=su({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function su(t,e){return t=Qt(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vh(t,e,n){return Us(e,t.child,null,n),t=Mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bf(t.return,e,n)}function _h(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pt(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U0(t,n,e);else if(t.tag===19)U0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(Le(et,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_h(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_h(e,!0,n,null,s);break;case"together":_h(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(n&e.childLanes))if(t!==null){if(ll(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Xc(t)))}function XI(t,e,n){switch(e.tag){case 3:Fc(e,e.stateNode.containerInfo),Ar(e,Je,t.memoizedState.cache),ol();break;case 27:case 5:lf(e);break;case 4:Fc(e,e.stateNode.containerInfo);break;case 10:Ar(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Ir(e),e.flags|=128,null):n&e.child.childLanes?rT(t,e,n):(Ir(e),t=cr(t,e,n),t!==null?t.sibling:null);Ir(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(ll(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return iT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,nT(t,e,n);case 24:Ar(e,Je,t.memoizedState.cache)}return cr(t,e,n)}function sT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ct=!0;else{if(!fg(t,n)&&!(e.flags&128))return ct=!1,XI(t,e,n);ct=!!(t.flags&131072)}else ct=!1,ve&&e.flags&1048576&&oE(e,Wc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")Kp(r)?(t=Pi(r,t),e.tag=1,e=L0(null,e,r,t,n)):(e.tag=0,e=Of(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===Pp){e.tag=11,e=M0(null,e,r,t,n);break e}else if(i===Vp){e.tag=14,e=P0(null,e,r,t,n);break e}}throw e=af(r)||r,Error(j(306,e,""))}}return e;case 0:return Of(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Pi(r,e.pendingProps),L0(t,e,r,i,n);case 3:e:{if(Fc(e,e.stateNode.containerInfo),t===null)throw Error(j(387));r=e.pendingProps;var s=e.memoizedState;i=s.element,Sf(t,e),lo(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Ar(e,Je,r),r!==s.cache&&Ef(e,[Je],n,!0),oo(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=j0(t,e,r,n);break e}else if(r!==i){i=hn(Error(j(424)),e),Io(i),e=j0(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ze=Sn(t.firstChild),Vt=e,ve=!0,Ai=null,Rn=!0,n=YE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ol(),r===i){e=cr(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 26:return Rc(t,e),t===null?(n=nv(e.type,null,e.pendingProps,null))?e.memoizedState=n:ve||(n=e.type,t=e.pendingProps,r=hu(Ur.current).createElement(n),r[Rt]=e,r[Ht]=t,_t(r,n,t),lt(r),e.stateNode=r):e.memoizedState=nv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lf(e),t===null&&ve&&(r=e.stateNode=qT(e.type,e.pendingProps,Ur.current),Vt=e,Rn=!0,i=ze,oi(e.type)?(Yf=i,ze=Sn(r.firstChild)):ze=i),pt(t,e,e.pendingProps.children,n),Rc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ve&&((i=r=ze)&&(r=xR(r,e.type,e.pendingProps,Rn),r!==null?(e.stateNode=r,Vt=e,ze=Sn(r.firstChild),Rn=!1,i=!0):i=!1),i||Ni(e)),lf(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,r=s.children,Gf(i,s)?r=null:a!==null&&Gf(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=ng(t,e,FI,null,null,n),Mo._currentValue=i),Rc(t,e),pt(t,e,r,n),e.child;case 6:return t===null&&ve&&((t=n=ze)&&(n=AR(n,e.pendingProps,Rn),n!==null?(e.stateNode=n,Vt=e,ze=null,t=!0):t=!1),t||Ni(e)),null;case 13:return rT(t,e,n);case 4:return Fc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Us(e,null,r,n):pt(t,e,r,n),e.child;case 11:return M0(t,e,e.type,e.pendingProps,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Ar(e,e.type,r.value),pt(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Oi(e),i=Ct(i),r=r(i),e.flags|=1,pt(t,e,r,n),e.child;case 14:return P0(t,e,e.type,e.pendingProps,n);case 15:return tT(t,e,e.type,e.pendingProps,n);case 19:return iT(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=su(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=rr(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return nT(t,e,n);case 24:return Oi(e),r=Ct(Je),t===null?(i=Zp(),i===null&&(i=De,s=Xp(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),e.memoizedState={parent:r,cache:i},Jp(e),Ar(e,Je,i)):(t.lanes&n&&(Sf(t,e),lo(e,null,null,n),oo()),i=t.memoizedState,s=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Ar(e,Je,r)):(r=s.cache,Ar(e,Je,r),r!==i.cache&&Ef(e,[Je],n,!0))),pt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(j(156,e.tag))}function $n(t){t.flags|=4}function B0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!KT(e)){if(e=vn.current,e!==null&&((ge&4194048)===ge?Mn!==null:(ge&62914560)!==ge&&!(ge&536870912)||e!==Mn))throw so=wf,uE;t.flags|=8192}}function oc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Nb():536870912,t.lanes|=e,Bs|=e)}function ja(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZI(t,e,n){var r=e.pendingProps;switch(Wp(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return je(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),ir(Je),Ms(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ka(e)?$n(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,m0())),je(e),null;case 26:return n=e.memoizedState,t===null?($n(e),n!==null?(je(e),B0(e,n)):(je(e),e.flags&=-16777217)):n?n!==t.memoizedState?($n(e),je(e),B0(e,n)):(je(e),e.flags&=-16777217):(t.memoizedProps!==r&&$n(e),je(e),e.flags&=-16777217),null;case 27:Gc(e),n=Ur.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&$n(e);else{if(!r){if(e.stateNode===null)throw Error(j(166));return je(e),null}t=Nn.current,ka(e)?p0(e):(t=qT(i,r,n),e.stateNode=t,$n(e))}return je(e),null;case 5:if(Gc(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&$n(e);else{if(!r){if(e.stateNode===null)throw Error(j(166));return je(e),null}if(t=Nn.current,ka(e))p0(e);else{switch(i=hu(Ur.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Rt]=e,t[Ht]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(_t(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&$n(e)}}return je(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&$n(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(t=Ur.current,ka(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Vt,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Rt]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||HT(t.nodeValue,n)),t||Ni(e)}else t=hu(t).createTextNode(r),t[Rt]=e,e.stateNode=t}return je(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=ka(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Rt]=e}else ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),i=!1}else i=m0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Jn(e),e):(Jn(e),null)}if(Jn(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),oc(e,e.updateQueue),je(e),null;case 4:return Ms(),t===null&&Eg(e.stateNode.containerInfo),je(e),null;case 10:return ir(e.type),je(e),null;case 19:if(ut(et),i=e.memoizedState,i===null)return je(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)ja(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=nu(t),s!==null){for(e.flags|=128,ja(i,!1),t=s.updateQueue,e.updateQueue=t,oc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)aE(n,t),n=n.sibling;return Le(et,et.current&1|2),e.child}t=t.sibling}i.tail!==null&&On()>ou&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=nu(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,oc(e,t),ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ve)return je(e),null}else 2*On()-i.renderingStartTime>ou&&n!==536870912&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=On(),e.sibling=null,t=et.current,Le(et,r?t&1|2:t&1),e):(je(e),null);case 22:case 23:return Jn(e),eg(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),n=e.updateQueue,n!==null&&oc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&ut(Ii),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ir(Je),je(e),null;case 25:return null;case 30:return null}throw Error(j(156,e.tag))}function JI(t,e){switch(Wp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ir(Je),Ms(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Gc(e),null;case 13:if(Jn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(et),null;case 4:return Ms(),null;case 10:return ir(e.type),null;case 22:case 23:return Jn(e),eg(),t!==null&&ut(Ii),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ir(Je),null;case 25:return null;default:return null}}function aT(t,e){switch(Wp(e),e.tag){case 3:ir(Je),Ms();break;case 26:case 27:case 5:Gc(e);break;case 4:Ms();break;case 13:Jn(e);break;case 19:ut(et);break;case 10:ir(e.type);break;case 22:case 23:Jn(e),eg(),t!==null&&ut(Ii);break;case 24:ir(Je)}}function fl(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){Re(e,e.return,o)}}function ei(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var s=i.next;r=s;do{if((r.tag&t)===t){var a=r.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,i=e;var c=n,u=o;try{u()}catch(d){Re(i,c,d)}}}r=r.next}while(r!==s)}}catch(d){Re(e,e.return,d)}}function oT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{fE(e,n)}catch(r){Re(t,t.return,r)}}}function lT(t,e,n){n.props=Pi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){Re(t,e,r)}}function uo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){Re(t,e,i)}}function Cn(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){Re(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Re(t,e,i)}else n.current=null}function cT(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Re(t,t.return,i)}}function bh(t,e,n){try{var r=t.stateNode;bR(r,t.type,n,e),r[Ht]=e}catch(i){Re(t,t.return,i)}}function uT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&oi(t.type)||t.tag===4}function Eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cd));else if(r!==4&&(r===27&&oi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}function au(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&oi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(au(t,e,n),t=t.sibling;t!==null;)au(t,e,n),t=t.sibling}function dT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);_t(e,r,n),e[Rt]=t,e[Ht]=n}catch(s){Re(t,t.return,s)}}var Kn=!1,$e=!1,Th=!1,z0=typeof WeakSet=="function"?WeakSet:Set,ot=null;function eR(t,e){if(t=t.containerInfo,Hf=mu,t=Zb(t),qp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,p=t,f=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)f=p,p=m;for(;;){if(p===t)break t;if(f===n&&++u===i&&(o=a),f===s&&++d===r&&(c=a),(m=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ff={focusedElem:t,selectionRange:n},mu=!1,ot=e;ot!==null;)if(e=ot,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,ot=t;else for(;ot!==null;){switch(e=ot,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var A=Pi(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(A,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(D){Re(n,n.return,D)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)qf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(j(163))}if(t=e.sibling,t!==null){t.return=e.return,ot=t;break}ot=e.return}}function hT(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Er(t,n),r&4&&fl(5,n);break;case 1:if(Er(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Re(n,n.return,a)}else{var i=Pi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Re(n,n.return,a)}}r&64&&oT(n),r&512&&uo(n,n.return);break;case 3:if(Er(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{fE(t,e)}catch(a){Re(n,n.return,a)}}break;case 27:e===null&&r&4&&dT(n);case 26:case 5:Er(t,n),e===null&&r&4&&cT(n),r&512&&uo(n,n.return);break;case 12:Er(t,n);break;case 13:Er(t,n),r&4&&gT(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=cR.bind(null,n),IR(t,n))));break;case 22:if(r=n.memoizedState!==null||Kn,!r){e=e!==null&&e.memoizedState!==null||$e,i=Kn;var s=$e;Kn=r,($e=e)&&!s?wr(t,n,(n.subtreeFlags&8772)!==0):Er(t,n),Kn=i,$e=s}break;case 30:break;default:Er(t,n)}}function fT(t){var e=t.alternate;e!==null&&(t.alternate=null,fT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Up(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,Bt=!1;function Yn(t,e,n){for(n=n.child;n!==null;)pT(t,e,n),n=n.sibling}function pT(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(nl,n)}catch{}switch(n.tag){case 26:$e||Cn(n,e),Yn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:$e||Cn(n,e);var r=Ve,i=Bt;oi(n.type)&&(Ve=n.stateNode,Bt=!1),Yn(t,e,n),go(n.stateNode),Ve=r,Bt=i;break;case 5:$e||Cn(n,e);case 6:if(r=Ve,i=Bt,Ve=null,Yn(t,e,n),Ve=r,Bt=i,Ve!==null)if(Bt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(s){Re(n,e,s)}else try{Ve.removeChild(n.stateNode)}catch(s){Re(n,e,s)}break;case 18:Ve!==null&&(Bt?(t=Ve,J0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ko(t)):J0(Ve,n.stateNode));break;case 4:r=Ve,i=Bt,Ve=n.stateNode.containerInfo,Bt=!0,Yn(t,e,n),Ve=r,Bt=i;break;case 0:case 11:case 14:case 15:$e||ei(2,n,e),$e||ei(4,n,e),Yn(t,e,n);break;case 1:$e||(Cn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&lT(n,e,r)),Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:$e=(r=$e)||n.memoizedState!==null,Yn(t,e,n),$e=r;break;default:Yn(t,e,n)}}function gT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ko(t)}catch(n){Re(e,e.return,n)}}function tR(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new z0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new z0),e;default:throw Error(j(435,t.tag))}}function wh(t,e){var n=tR(t);e.forEach(function(r){var i=uR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(oi(o.type)){Ve=o.stateNode,Bt=!1;break e}break;case 5:Ve=o.stateNode,Bt=!1;break e;case 3:case 4:Ve=o.stateNode.containerInfo,Bt=!0;break e}o=o.return}if(Ve===null)throw Error(j(160));pT(s,a,i),Ve=null,Bt=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)mT(e,t),e=e.sibling}var En=null;function mT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$t(e,t),Yt(t),r&4&&(ei(3,t,t.return),fl(3,t),ei(5,t,t.return));break;case 1:$t(e,t),Yt(t),r&512&&($e||n===null||Cn(n,n.return)),r&64&&Kn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=En;if($t(e,t),Yt(t),r&512&&($e||n===null||Cn(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":s=i.getElementsByTagName("title")[0],(!s||s[sl]||s[Rt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),_t(s,r,n),s[Rt]=t,lt(s),r=s;break e;case"link":var a=iv("link","href",i).get(r+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=i.createElement(r),_t(s,r,n),i.head.appendChild(s);break;case"meta":if(a=iv("meta","content",i).get(r+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=i.createElement(r),_t(s,r,n),i.head.appendChild(s);break;default:throw Error(j(468,r))}s[Rt]=t,lt(s),r=s}t.stateNode=r}else sv(i,t.type,t.stateNode);else t.stateNode=rv(i,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?sv(i,t.type,t.stateNode):rv(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&bh(t,t.memoizedProps,n.memoizedProps)}break;case 27:$t(e,t),Yt(t),r&512&&($e||n===null||Cn(n,n.return)),n!==null&&r&4&&bh(t,t.memoizedProps,n.memoizedProps);break;case 5:if($t(e,t),Yt(t),r&512&&($e||n===null||Cn(n,n.return)),t.flags&32){i=t.stateNode;try{Vs(i,"")}catch(m){Re(t,t.return,m)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,bh(t,i,n!==null?n.memoizedProps:i)),r&1024&&(Th=!0);break;case 6:if($t(e,t),Yt(t),r&4){if(t.stateNode===null)throw Error(j(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(m){Re(t,t.return,m)}}break;case 3:if(Nc=null,i=En,En=fu(e.containerInfo),$t(e,t),En=i,Yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ko(e.containerInfo)}catch(m){Re(t,t.return,m)}Th&&(Th=!1,yT(t));break;case 4:r=En,En=fu(t.stateNode.containerInfo),$t(e,t),Yt(t),En=r;break;case 12:$t(e,t),Yt(t);break;case 13:$t(e,t),Yt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(vg=On()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,wh(t,r)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=Kn,d=$e;if(Kn=u||i,$e=d||c,$t(e,t),$e=d,Kn=u,Yt(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||Kn||$e||_i(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,i)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var p=c.memoizedProps.style,f=p!=null&&p.hasOwnProperty("display")?p.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(m){Re(c,c.return,m)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Re(c,c.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,wh(t,n))));break;case 19:$t(e,t),Yt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,wh(t,r)));break;case 30:break;case 21:break;default:$t(e,t),Yt(t)}}function Yt(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(uT(r)){n=r;break}r=r.return}if(n==null)throw Error(j(160));switch(n.tag){case 27:var i=n.stateNode,s=Eh(t);au(t,s,i);break;case 5:var a=n.stateNode;n.flags&32&&(Vs(a,""),n.flags&=-33);var o=Eh(t);au(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Eh(t);Pf(t,u,c);break;default:throw Error(j(161))}}catch(d){Re(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;yT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Er(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)hT(t,e.alternate,e),e=e.sibling}function _i(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ei(4,e,e.return),_i(e);break;case 1:Cn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&lT(e,e.return,n),_i(e);break;case 27:go(e.stateNode);case 26:case 5:Cn(e,e.return),_i(e);break;case 22:e.memoizedState===null&&_i(e);break;case 30:_i(e);break;default:_i(e)}t=t.sibling}}function wr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:wr(i,s,n),fl(4,s);break;case 1:if(wr(i,s,n),r=s,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(u){Re(r,r.return,u)}if(r=s,i=r.updateQueue,i!==null){var o=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)hE(c[i],o)}catch(u){Re(r,r.return,u)}}n&&a&64&&oT(s),uo(s,s.return);break;case 27:dT(s);case 26:case 5:wr(i,s,n),n&&r===null&&a&4&&cT(s),uo(s,s.return);break;case 12:wr(i,s,n);break;case 13:wr(i,s,n),n&&a&4&&gT(i,s);break;case 22:s.memoizedState===null&&wr(i,s,n),uo(s,s.return);break;case 30:break;default:wr(i,s,n)}e=e.sibling}}function pg(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&cl(n))}function gg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cl(t))}function In(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vT(t,e,n,r),e=e.sibling}function vT(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:In(t,e,n,r),i&2048&&fl(9,e);break;case 1:In(t,e,n,r);break;case 3:In(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cl(t)));break;case 12:if(i&2048){In(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Re(e,e.return,c)}}else In(t,e,n,r);break;case 13:In(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?In(t,e,n,r):ho(t,e):s._visibility&2?In(t,e,n,r):(s._visibility|=2,rs(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&pg(a,e);break;case 24:In(t,e,n,r),i&2048&&gg(e.alternate,e);break;default:In(t,e,n,r)}}function rs(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,o=n,c=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:rs(s,a,o,c,i),fl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?rs(s,a,o,c,i):ho(s,a):(d._visibility|=2,rs(s,a,o,c,i)),i&&u&2048&&pg(a.alternate,a);break;case 24:rs(s,a,o,c,i),i&&u&2048&&gg(a.alternate,a);break;default:rs(s,a,o,c,i)}e=e.sibling}}function ho(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:ho(n,r),i&2048&&pg(r.alternate,r);break;case 24:ho(n,r),i&2048&&gg(r.alternate,r);break;default:ho(n,r)}e=e.sibling}}var Ka=8192;function Ji(t){if(t.subtreeFlags&Ka)for(t=t.child;t!==null;)_T(t),t=t.sibling}function _T(t){switch(t.tag){case 26:Ji(t),t.flags&Ka&&t.memoizedState!==null&&BR(En,t.memoizedState,t.memoizedProps);break;case 5:Ji(t);break;case 3:case 4:var e=En;En=fu(t.stateNode.containerInfo),Ji(t),En=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Ka,Ka=16777216,Ji(t),Ka=e):Ji(t));break;default:Ji(t)}}function bT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ua(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];ot=r,TT(r,t)}bT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ET(t),t=t.sibling}function ET(t){switch(t.tag){case 0:case 11:case 15:Ua(t),t.flags&2048&&ei(9,t,t.return);break;case 3:Ua(t);break;case 12:Ua(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Cc(t)):Ua(t);break;default:Ua(t)}}function Cc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];ot=r,TT(r,t)}bT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ei(8,e,e.return),Cc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Cc(e));break;default:Cc(e)}t=t.sibling}}function TT(t,e){for(;ot!==null;){var n=ot;switch(n.tag){case 0:case 11:case 15:ei(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:cl(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,ot=r;else e:for(n=t;ot!==null;){r=ot;var i=r.sibling,s=r.return;if(fT(r),r===n){ot=null;break e}if(i!==null){i.return=s,ot=i;break e}ot=s}}}var nR={getCacheForType:function(t){var e=Ct(Je),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},rR=typeof WeakMap=="function"?WeakMap:Map,we=0,De=null,ue=null,ge=0,Te=0,Kt=null,kr=!1,sa=!1,mg=!1,ur=0,He=0,ti=0,Ri=0,yg=0,pn=0,Bs=0,fo=null,zt=null,Vf=!1,vg=0,ou=1/0,lu=null,Hr=null,mt=0,Fr=null,zs=null,Rs=0,kf=0,Lf=null,wT=null,po=0,jf=null;function Jt(){if(we&2&&ge!==0)return ge&-ge;if(J.T!==null){var t=ks;return t!==0?t:bg()}return Pb()}function ST(){pn===0&&(pn=!(ge&536870912)||ve?Db():536870912);var t=vn.current;return t!==null&&(t.flags|=32),pn}function en(t,e,n){(t===De&&(Te===2||Te===9)||t.cancelPendingCommit!==null)&&(Hs(t,0),Lr(t,ge,pn,!1)),il(t,n),(!(we&2)||t!==De)&&(t===De&&(!(we&2)&&(Ri|=n),He===4&&Lr(t,ge,pn,!1)),zn(t))}function xT(t,e,n){if(we&6)throw Error(j(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||rl(t,e),i=r?aR(t,e):Sh(t,e,!0),s=r;do{if(i===0){sa&&!r&&Lr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!iR(n)){i=Sh(t,e,!1),s=!1;continue}if(i===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;i=fo;var c=o.current.memoizedState.isDehydrated;if(c&&(Hs(o,a).flags|=256),a=Sh(o,a,!1),a!==2){if(mg&&!c){o.errorRecoveryDisabledLanes|=s,Ri|=s,i=4;break e}s=zt,zt=i,s!==null&&(zt===null?zt=s:zt.push.apply(zt,s))}i=a}if(s=!1,i!==2)continue}}if(i===1){Hs(t,0),Lr(t,e,0,!0);break}e:{switch(r=t,s=i,s){case 0:case 1:throw Error(j(345));case 4:if((e&4194048)!==e)break;case 6:Lr(r,e,pn,!kr);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(j(329))}if((e&62914560)===e&&(i=vg+300-On(),10<i)){if(Lr(r,e,pn,!kr),Wu(r,0,!0)!==0)break e;r.timeoutHandle=GT(H0.bind(null,r,n,zt,lu,Vf,e,pn,Ri,Bs,kr,s,2,-0,0),i);break e}H0(r,n,zt,lu,Vf,e,pn,Ri,Bs,kr,s,0,-0,0)}}break}while(!0);zn(t)}function H0(t,e,n,r,i,s,a,o,c,u,d,p,f,m){if(t.timeoutHandle=-1,p=e.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Oo={stylesheets:null,count:0,unsuspend:UR},_T(e),p=zR(),p!==null)){t.cancelPendingCommit=p(G0.bind(null,t,e,s,n,r,i,a,o,c,d,1,f,m)),Lr(t,s,a,!u);return}G0(t,e,s,n,r,i,a,o,c)}function iR(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rn(s(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e,n,r){e&=~yg,e&=~Ri,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var s=31-Zt(i),a=1<<s;r[s]=-1,i&=~a}n!==0&&Ob(t,n,e)}function ad(){return we&6?!0:(pl(0),!1)}function _g(){if(ue!==null){if(Te===0)var t=ue.return;else t=ue,Zn=qi=null,sg(t),Is=null,Co=0,t=ue;for(;t!==null;)aT(t.alternate,t),t=t.return;ue=null}}function Hs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,TR(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),_g(),De=t,ue=n=rr(t.current,null),ge=e,Te=0,Kt=null,kr=!1,sa=rl(t,e),mg=!1,Bs=pn=yg=Ri=ti=He=0,zt=fo=null,Vf=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-Zt(r),s=1<<i;e|=t[i],r&=~s}return ur=e,ed(),n}function AT(t,e){le=null,J.H=tu,e===ul||e===nd?(e=b0(),Te=3):e===uE?(e=b0(),Te=4):Te=e===eT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Kt=e,ue===null&&(He=1,iu(t,hn(e,t.current)))}function IT(){var t=J.H;return J.H=tu,t===null?tu:t}function RT(){var t=J.A;return J.A=nR,t}function Uf(){He=4,kr||(ge&4194048)!==ge&&vn.current!==null||(sa=!0),!(ti&134217727)&&!(Ri&134217727)||De===null||Lr(De,ge,pn,!1)}function Sh(t,e,n){var r=we;we|=2;var i=IT(),s=RT();(De!==t||ge!==e)&&(lu=null,Hs(t,e)),e=!1;var a=He;e:do try{if(Te!==0&&ue!==null){var o=ue,c=Kt;switch(Te){case 8:_g(),a=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(e=!0);var u=Te;if(Te=0,Kt=null,_s(t,o,c,u),n&&sa){a=0;break e}break;default:u=Te,Te=0,Kt=null,_s(t,o,c,u)}}sR(),a=He;break}catch(d){AT(t,d)}while(!0);return e&&t.shellSuspendCounter++,Zn=qi=null,we=r,J.H=i,J.A=s,ue===null&&(De=null,ge=0,ed()),a}function sR(){for(;ue!==null;)CT(ue)}function aR(t,e){var n=we;we|=2;var r=IT(),i=RT();De!==t||ge!==e?(lu=null,ou=On()+500,Hs(t,e)):sa=rl(t,e);e:do try{if(Te!==0&&ue!==null){e=ue;var s=Kt;t:switch(Te){case 1:Te=0,Kt=null,_s(t,e,s,1);break;case 2:case 9:if(_0(s)){Te=0,Kt=null,F0(e);break}e=function(){Te!==2&&Te!==9||De!==t||(Te=7),zn(t)},s.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:_0(s)?(Te=0,Kt=null,F0(e)):(Te=0,Kt=null,_s(t,e,s,7));break;case 5:var a=null;switch(ue.tag){case 26:a=ue.memoizedState;case 5:case 27:var o=ue;if(!a||KT(a)){Te=0,Kt=null;var c=o.sibling;if(c!==null)ue=c;else{var u=o.return;u!==null?(ue=u,od(u)):ue=null}break t}}Te=0,Kt=null,_s(t,e,s,5);break;case 6:Te=0,Kt=null,_s(t,e,s,6);break;case 8:_g(),He=6;break e;default:throw Error(j(462))}}oR();break}catch(d){AT(t,d)}while(!0);return Zn=qi=null,J.H=r,J.A=i,we=n,ue!==null?0:(De=null,ge=0,ed(),He)}function oR(){for(;ue!==null&&!C1();)CT(ue)}function CT(t){var e=sT(t.alternate,t,ur);t.memoizedProps=t.pendingProps,e===null?od(t):ue=e}function F0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=k0(n,e,e.pendingProps,e.type,void 0,ge);break;case 11:e=k0(n,e,e.pendingProps,e.type.render,e.ref,ge);break;case 5:sg(e);default:aT(n,e),e=ue=aE(e,ur),e=sT(n,e,ur)}t.memoizedProps=t.pendingProps,e===null?od(t):ue=e}function _s(t,e,n,r){Zn=qi=null,sg(e),Is=null,Co=0;var i=e.return;try{if(WI(t,i,e,n,ge)){He=1,iu(t,hn(n,t.current)),ue=null;return}}catch(s){if(i!==null)throw ue=i,s;He=1,iu(t,hn(n,t.current)),ue=null;return}e.flags&32768?(ve||r===1?t=!0:sa||ge&536870912?t=!1:(kr=t=!0,(r===2||r===9||r===3||r===6)&&(r=vn.current,r!==null&&r.tag===13&&(r.flags|=16384))),DT(e,t)):od(e)}function od(t){var e=t;do{if(e.flags&32768){DT(e,kr);return}t=e.return;var n=ZI(e.alternate,e,ur);if(n!==null){ue=n;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);He===0&&(He=5)}function DT(t,e){do{var n=JI(t.alternate,t);if(n!==null){n.flags&=32767,ue=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ue=t;return}ue=t=n}while(t!==null);He=6,ue=null}function G0(t,e,n,r,i,s,a,o,c){t.cancelPendingCommit=null;do ld();while(mt!==0);if(we&6)throw Error(j(327));if(e!==null){if(e===t.current)throw Error(j(177));if(s=e.lanes|e.childLanes,s|=$p,U1(t,n,s,a,o,c),t===De&&(ue=De=null,ge=0),zs=e,Fr=t,Rs=n,kf=s,Lf=i,wT=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,dR(qc,function(){return VT(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=J.T,J.T=null,i=_e.p,_e.p=2,a=we,we|=4;try{eR(t,e,n)}finally{we=a,_e.p=i,J.T=r}}mt=1,NT(),OT(),MT()}}function NT(){if(mt===1){mt=0;var t=Fr,e=zs,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=J.T,J.T=null;var r=_e.p;_e.p=2;var i=we;we|=4;try{mT(e,t);var s=Ff,a=Zb(t.containerInfo),o=s.focusedElem,c=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Xb(o.ownerDocument.documentElement,o)){if(c!==null&&qp(o)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(d,o.value.length);else{var p=o.ownerDocument||document,f=p&&p.defaultView||window;if(f.getSelection){var m=f.getSelection(),A=o.textContent.length,D=Math.min(c.start,A),R=c.end===void 0?D:Math.min(c.end,A);!m.extend&&D>R&&(a=R,R=D,D=a);var _=d0(o,D),b=d0(o,R);if(_&&b&&(m.rangeCount!==1||m.anchorNode!==_.node||m.anchorOffset!==_.offset||m.focusNode!==b.node||m.focusOffset!==b.offset)){var T=p.createRange();T.setStart(_.node,_.offset),m.removeAllRanges(),D>R?(m.addRange(T),m.extend(b.node,b.offset)):(T.setEnd(b.node,b.offset),m.addRange(T))}}}}for(p=[],m=o;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<p.length;o++){var N=p[o];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}mu=!!Hf,Ff=Hf=null}finally{we=i,_e.p=r,J.T=n}}t.current=e,mt=2}}function OT(){if(mt===2){mt=0;var t=Fr,e=zs,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=J.T,J.T=null;var r=_e.p;_e.p=2;var i=we;we|=4;try{hT(t,e.alternate,e)}finally{we=i,_e.p=r,J.T=n}}mt=3}}function MT(){if(mt===4||mt===3){mt=0,D1();var t=Fr,e=zs,n=Rs,r=wT;e.subtreeFlags&10256||e.flags&10256?mt=5:(mt=0,zs=Fr=null,PT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Hr=null),jp(n),e=e.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(nl,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=J.T,i=_e.p,_e.p=2,J.T=null;try{for(var s=t.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{J.T=e,_e.p=i}}Rs&3&&ld(),zn(t),i=t.pendingLanes,n&4194090&&i&42?t===jf?po++:(po=0,jf=t):po=0,pl(0)}}function PT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,cl(e)))}function ld(t){return NT(),OT(),MT(),VT()}function VT(){if(mt!==5)return!1;var t=Fr,e=kf;kf=0;var n=jp(Rs),r=J.T,i=_e.p;try{_e.p=32>n?32:n,J.T=null,n=Lf,Lf=null;var s=Fr,a=Rs;if(mt=0,zs=Fr=null,Rs=0,we&6)throw Error(j(331));var o=we;if(we|=4,ET(s.current),vT(s,s.current,a,n),we=o,pl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(nl,s)}catch{}return!0}finally{_e.p=i,J.T=r,PT(t,e)}}function q0(t,e,n){e=hn(n,e),e=Nf(t.stateNode,e,2),t=zr(t,e,2),t!==null&&(il(t,2),zn(t))}function Re(t,e,n){if(t.tag===3)q0(t,t,n);else for(;e!==null;){if(e.tag===3){q0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hr===null||!Hr.has(r))){t=hn(n,t),n=ZE(2),r=zr(e,n,2),r!==null&&(JE(n,r,e,t),il(r,2),zn(r));break}}e=e.return}}function xh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(mg=!0,i.add(n),t=lR.bind(null,t,e,n),e.then(t,t))}function lR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,De===t&&(ge&n)===n&&(He===4||He===3&&(ge&62914560)===ge&&300>On()-vg?!(we&2)&&Hs(t,0):yg|=n,Bs===ge&&(Bs=0)),zn(t)}function kT(t,e){e===0&&(e=Nb()),t=ia(t,e),t!==null&&(il(t,e),zn(t))}function cR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kT(t,n)}function uR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(j(314))}r!==null&&r.delete(e),kT(t,n)}function dR(t,e){return kp(t,e)}var cu=null,is=null,Bf=!1,uu=!1,Ah=!1,Ci=0;function zn(t){t!==is&&t.next===null&&(is===null?cu=is=t:is=is.next=t),uu=!0,Bf||(Bf=!0,fR())}function pl(t,e){if(!Ah&&uu){Ah=!0;do for(var n=!1,r=cu;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-Zt(42|t)+1)-1,s&=i&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,$0(r,s))}else s=ge,s=Wu(r,r===De?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(s&3)||rl(r,s)||(n=!0,$0(r,s));r=r.next}while(n);Ah=!1}}function hR(){LT()}function LT(){uu=Bf=!1;var t=0;Ci!==0&&(ER()&&(t=Ci),Ci=0);for(var e=On(),n=null,r=cu;r!==null;){var i=r.next,s=jT(r,e);s===0?(r.next=null,n===null?cu=i:n.next=i,i===null&&(is=n)):(n=r,(t!==0||s&3)&&(uu=!0)),r=i}pl(t)}function jT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Zt(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=j1(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}if(e=De,n=ge,n=Wu(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Te===2||Te===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Zd(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||rl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Zd(r),jp(n)){case 2:case 8:n=Rb;break;case 32:n=qc;break;case 268435456:n=Cb;break;default:n=qc}return r=UT.bind(null,t),n=kp(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Zd(r),t.callbackPriority=2,t.callbackNode=null,2}function UT(t,e){if(mt!==0&&mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ld()&&t.callbackNode!==n)return null;var r=ge;return r=Wu(t,t===De?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(xT(t,r,e),jT(t,On()),t.callbackNode!=null&&t.callbackNode===n?UT.bind(null,t):null)}function $0(t,e){if(ld())return null;xT(t,e,!0)}function fR(){wR(function(){we&6?kp(Ib,hR):LT()})}function bg(){return Ci===0&&(Ci=Db()),Ci}function Y0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ec(""+t)}function K0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function pR(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var s=Y0((i[Ht]||null).action),a=r.submitter;a&&(e=(e=a[Ht]||null)?Y0(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Xu("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ci!==0){var c=a?K0(i,a):new FormData(i);Cf(n,{pending:!0,data:c,method:i.method,action:s},null,c)}}else typeof s=="function"&&(o.preventDefault(),c=a?K0(i,a):new FormData(i),Cf(n,{pending:!0,data:c,method:i.method,action:s},s,c))},currentTarget:i}]})}}for(var Ih=0;Ih<yf.length;Ih++){var Rh=yf[Ih],gR=Rh.toLowerCase(),mR=Rh[0].toUpperCase()+Rh.slice(1);An(gR,"on"+mR)}An(eE,"onAnimationEnd");An(tE,"onAnimationIteration");An(nE,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(MI,"onTransitionRun");An(PI,"onTransitionStart");An(VI,"onTransitionCancel");An(rE,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Do));function BT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(d){ru(d)}i.currentTarget=null,s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(d){ru(d)}i.currentTarget=null,s=c}}}}function ce(t,e){var n=e[uf];n===void 0&&(n=e[uf]=new Set);var r=t+"__bubble";n.has(r)||(zT(e,t,2,!1),n.add(r))}function Ch(t,e,n){var r=0;e&&(r|=4),zT(n,t,r,e)}var lc="_reactListening"+Math.random().toString(36).slice(2);function Eg(t){if(!t[lc]){t[lc]=!0,Vb.forEach(function(n){n!=="selectionchange"&&(yR.has(n)||Ch(n,!1,t),Ch(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lc]||(e[lc]=!0,Ch("selectionchange",!1,e))}}function zT(t,e,n,r){switch(JT(e)){case 2:var i=GR;break;case 8:i=qR;break;default:i=xg}n=i.bind(null,e,n,t),i=void 0,!pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;o!==null;){if(a=us(o),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){r=s=a;continue e}o=o.parentNode}}r=r.return}Fb(function(){var u=s,d=zp(n),p=[];e:{var f=iE.get(t);if(f!==void 0){var m=Xu,A=t;switch(t){case"keypress":if(wc(n)===0)break e;case"keydown":case"keyup":m=dI;break;case"focusin":A="focus",m=ah;break;case"focusout":A="blur",m=ah;break;case"beforeblur":case"afterblur":m=ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=t0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=pI;break;case eE:case tE:case nE:m=nI;break;case rE:m=mI;break;case"scroll":case"scrollend":m=X1;break;case"wheel":m=vI;break;case"copy":case"cut":case"paste":m=iI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=r0;break;case"toggle":case"beforetoggle":m=bI}var D=(e&4)!==0,R=!D&&(t==="scroll"||t==="scrollend"),_=D?f!==null?f+"Capture":null:f;D=[];for(var b=u,T;b!==null;){var N=b;if(T=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||T===null||_===null||(N=So(b,_),N!=null&&D.push(No(b,N,T))),R)break;b=b.return}0<D.length&&(f=new m(f,A,null,n,d),p.push({event:f,listeners:D}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==ff&&(A=n.relatedTarget||n.fromElement)&&(us(A)||A[na]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(A=n.relatedTarget||n.toElement,m=u,A=A?us(A):null,A!==null&&(R=tl(A),D=A.tag,A!==R||D!==5&&D!==27&&D!==6)&&(A=null)):(m=null,A=u),m!==A)){if(D=t0,N="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(D=r0,N="onPointerLeave",_="onPointerEnter",b="pointer"),R=m==null?f:Ya(m),T=A==null?f:Ya(A),f=new D(N,b+"leave",m,n,d),f.target=R,f.relatedTarget=T,N=null,us(d)===u&&(D=new D(_,b+"enter",A,n,d),D.target=T,D.relatedTarget=R,N=D),R=N,m&&A)t:{for(D=m,_=A,b=0,T=D;T;T=es(T))b++;for(T=0,N=_;N;N=es(N))T++;for(;0<b-T;)D=es(D),b--;for(;0<T-b;)_=es(_),T--;for(;b--;){if(D===_||_!==null&&D===_.alternate)break t;D=es(D),_=es(_)}D=null}else D=null;m!==null&&Q0(p,f,m,D,!1),A!==null&&R!==null&&Q0(p,R,A,D,!0)}}e:{if(f=u?Ya(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=o0;else if(a0(f))if(Qb)M=DI;else{M=RI;var V=II}else m=f.nodeName,!m||m.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&Bp(u.elementType)&&(M=o0):M=CI;if(M&&(M=M(t,u))){Kb(p,M,n,d);break e}V&&V(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&hf(f,"number",f.value)}switch(V=u?Ya(u):window,t){case"focusin":(a0(V)||V.contentEditable==="true")&&(fs=V,gf=u,ro=null);break;case"focusout":ro=gf=fs=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,h0(p,n,d);break;case"selectionchange":if(OI)break;case"keydown":case"keyup":h0(p,n,d)}var w;if(Gp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hs?$b(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(qb&&n.locale!=="ko"&&(hs||v!=="onCompositionStart"?v==="onCompositionEnd"&&hs&&(w=Gb()):(Vr=d,Hp="value"in Vr?Vr.value:Vr.textContent,hs=!0)),V=du(u,v),0<V.length&&(v=new n0(v,t,null,n,d),p.push({event:v,listeners:V}),w?v.data=w:(w=Yb(n),w!==null&&(v.data=w)))),(w=TI?wI(t,n):SI(t,n))&&(v=du(u,"onBeforeInput"),0<v.length&&(V=new n0("onBeforeInput","beforeinput",null,n,d),p.push({event:V,listeners:v}),V.data=w)),pR(p,t,u,n,d)}BT(p,e)})}function No(t,e,n){return{instance:t,listener:e,currentTarget:n}}function du(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=So(t,n),i!=null&&r.unshift(No(t,i,s)),i=So(t,e),i!=null&&r.push(No(t,i,s))),t.tag===3)return r;t=t.return}return[]}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Q0(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(o=o.tag,c!==null&&c===r)break;o!==5&&o!==26&&o!==27||u===null||(c=u,i?(u=So(n,s),u!=null&&a.unshift(No(n,u,c))):i||(u=So(n,s),u!=null&&a.push(No(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var vR=/\r\n?/g,_R=/\u0000|\uFFFD/g;function W0(t){return(typeof t=="string"?t:""+t).replace(vR,`
`).replace(_R,"")}function HT(t,e){return e=W0(e),W0(t)===e}function cd(){}function xe(t,e,n,r,i,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Vs(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Vs(t,""+r);break;case"className":tc(t,"class",r);break;case"tabIndex":tc(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":tc(t,n,r);break;case"style":Hb(t,r,s);break;case"data":if(e!=="object"){tc(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Ec(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&xe(t,e,"name",i.name,i,null),xe(t,e,"formEncType",i.formEncType,i,null),xe(t,e,"formMethod",i.formMethod,i,null),xe(t,e,"formTarget",i.formTarget,i,null)):(xe(t,e,"encType",i.encType,i,null),xe(t,e,"method",i.method,i,null),xe(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Ec(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=cd);break;case"onScroll":r!=null&&ce("scroll",t);break;case"onScrollEnd":r!=null&&ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(j(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=Ec(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":ce("beforetoggle",t),ce("toggle",t),bc(t,"popover",r);break;case"xlinkActuate":qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":qn(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":qn(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":qn(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":qn(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":bc(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Q1.get(n)||n,bc(t,n,r))}}function zf(t,e,n,r,i,s){switch(n){case"style":Hb(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(j(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Vs(t,r):(typeof r=="number"||typeof r=="bigint")&&Vs(t,""+r);break;case"onScroll":r!=null&&ce("scroll",t);break;case"onScrollEnd":r!=null&&ce("scrollend",t);break;case"onClick":r!=null&&(t.onclick=cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kb.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),s=t[Ht]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,i),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):bc(t,n,r)}}}function _t(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",t),ce("load",t);var r=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:xe(t,e,s,a,n,null)}}i&&xe(t,e,"srcSet",n.srcSet,n,null),r&&xe(t,e,"src",n.src,n,null);return;case"input":ce("invalid",t);var o=s=a=i=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case"name":i=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(j(137,e));break;default:xe(t,e,r,d,n,null)}}Ub(t,s,o,c,u,a,i,!1),$c(t);return;case"select":ce("invalid",t),r=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":r=o;default:xe(t,e,i,o,n,null)}e=s,n=a,t.multiple=!!r,e!=null?Ts(t,!!r,e,!1):n!=null&&Ts(t,!!r,n,!0);return;case"textarea":ce("invalid",t),s=i=r=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":r=o;break;case"defaultValue":i=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(j(91));break;default:xe(t,e,a,o,n,null)}zb(t,r,i,s),$c(t);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:xe(t,e,c,r,n,null)}return;case"dialog":ce("beforetoggle",t),ce("toggle",t),ce("cancel",t),ce("close",t);break;case"iframe":case"object":ce("load",t);break;case"video":case"audio":for(r=0;r<Do.length;r++)ce(Do[r],t);break;case"image":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"embed":case"source":case"link":ce("error",t),ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:xe(t,e,u,r,n,null)}return;default:if(Bp(e)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&zf(t,e,d,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&xe(t,e,o,r,n,null))}function bR(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,o=null,c=null,u=null,d=null;for(m in n){var p=n[m];if(n.hasOwnProperty(m)&&p!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=p;default:r.hasOwnProperty(m)||xe(t,e,m,null,r,p)}}for(var f in r){var m=r[f];if(p=n[f],r.hasOwnProperty(f)&&(m!=null||p!=null))switch(f){case"type":s=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":a=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(j(137,e));break;default:m!==p&&xe(t,e,f,m,r,p)}}df(t,a,o,c,u,d,s,i);return;case"select":m=a=o=f=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(s)||xe(t,e,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(s!=null||c!=null))switch(i){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==c&&xe(t,e,i,s,r,c)}e=o,n=a,r=m,f!=null?Ts(t,!!n,f,!1):!!r!=!!n&&(e!=null?Ts(t,!!n,e,!0):Ts(t,!!n,n?[]:"",!1));return;case"textarea":m=f=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:xe(t,e,o,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(i!=null||s!=null))switch(a){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(j(91));break;default:i!==s&&xe(t,e,a,i,r,s)}Bb(t,f,m);return;case"option":for(var A in n)if(f=n[A],n.hasOwnProperty(A)&&f!=null&&!r.hasOwnProperty(A))switch(A){case"selected":t.selected=!1;break;default:xe(t,e,A,null,r,f)}for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(f!=null||m!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:xe(t,e,c,f,r,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in n)f=n[D],n.hasOwnProperty(D)&&f!=null&&!r.hasOwnProperty(D)&&xe(t,e,D,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(f!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(j(137,e));break;default:xe(t,e,u,f,r,m)}return;default:if(Bp(e)){for(var R in n)f=n[R],n.hasOwnProperty(R)&&f!==void 0&&!r.hasOwnProperty(R)&&zf(t,e,R,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||f===void 0&&m===void 0||zf(t,e,d,f,r,m);return}}for(var _ in n)f=n[_],n.hasOwnProperty(_)&&f!=null&&!r.hasOwnProperty(_)&&xe(t,e,_,null,r,f);for(p in r)f=r[p],m=n[p],!r.hasOwnProperty(p)||f===m||f==null&&m==null||xe(t,e,p,f,r,m)}var Hf=null,Ff=null;function hu(t){return t.nodeType===9?t:t.ownerDocument}function X0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Gf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nh=null;function ER(){var t=window.event;return t&&t.type==="popstate"?t===Nh?!1:(Nh=t,!0):(Nh=null,!1)}var GT=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,Z0=typeof Promise=="function"?Promise:void 0,wR=typeof queueMicrotask=="function"?queueMicrotask:typeof Z0<"u"?function(t){return Z0.resolve(null).then(t).catch(SR)}:GT;function SR(t){setTimeout(function(){throw t})}function oi(t){return t==="head"}function J0(t,e){var n=e,r=0,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<r&&8>r){n=r;var a=t.ownerDocument;if(n&1&&go(a.documentElement),n&2&&go(a.body),n&4)for(n=a.head,go(n),a=n.firstChild;a;){var o=a.nextSibling,c=a.nodeName;a[sl]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(i===0){t.removeChild(s),ko(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);ko(e)}function qf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":qf(n),Up(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function xR(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[sl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Sn(t.nextSibling),t===null)break}return null}function AR(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Sn(t.nextSibling),t===null))return null;return t}function $f(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function IR(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Yf=null;function ev(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function qT(t,e,n){switch(e=hu(n),t){case"html":if(t=e.documentElement,!t)throw Error(j(452));return t;case"head":if(t=e.head,!t)throw Error(j(453));return t;case"body":if(t=e.body,!t)throw Error(j(454));return t;default:throw Error(j(451))}}function go(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Up(t)}var _n=new Map,tv=new Set;function fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gr=_e.d;_e.d={f:RR,r:CR,D:DR,C:NR,L:OR,m:MR,X:VR,S:PR,M:kR};function RR(){var t=gr.f(),e=ad();return t||e}function CR(t){var e=ra(t);e!==null&&e.tag===5&&e.type==="form"?jE(e):gr.r(t)}var aa=typeof document>"u"?null:document;function $T(t,e,n){var r=aa;if(r&&typeof e=="string"&&e){var i=dn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),tv.has(i)||(tv.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),_t(e,"link",t),lt(e),r.head.appendChild(e)))}}function DR(t){gr.D(t),$T("dns-prefetch",t,null)}function NR(t,e){gr.C(t,e),$T("preconnect",t,e)}function OR(t,e,n){gr.L(t,e,n);var r=aa;if(r&&t&&e){var i='link[rel="preload"][as="'+dn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+dn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+dn(n.imageSizes)+'"]')):i+='[href="'+dn(t)+'"]';var s=i;switch(e){case"style":s=Fs(t);break;case"script":s=oa(t)}_n.has(s)||(t=Oe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),_n.set(s,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(gl(s))||e==="script"&&r.querySelector(ml(s))||(e=r.createElement("link"),_t(e,"link",t),lt(e),r.head.appendChild(e)))}}function MR(t,e){gr.m(t,e);var n=aa;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+dn(r)+'"][href="'+dn(t)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=oa(t)}if(!_n.has(s)&&(t=Oe({rel:"modulepreload",href:t},e),_n.set(s,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ml(s)))return}r=n.createElement("link"),_t(r,"link",t),lt(r),n.head.appendChild(r)}}}function PR(t,e,n){gr.S(t,e,n);var r=aa;if(r&&t){var i=Es(r).hoistableStyles,s=Fs(t);e=e||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(gl(s)))o.loading=5;else{t=Oe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=_n.get(s))&&Tg(t,n);var c=a=r.createElement("link");lt(c),_t(c,"link",t),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Dc(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}}function VR(t,e){gr.X(t,e);var n=aa;if(n&&t){var r=Es(n).hoistableScripts,i=oa(t),s=r.get(i);s||(s=n.querySelector(ml(i)),s||(t=Oe({src:t,async:!0},e),(e=_n.get(i))&&wg(t,e),s=n.createElement("script"),lt(s),_t(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function kR(t,e){gr.M(t,e);var n=aa;if(n&&t){var r=Es(n).hoistableScripts,i=oa(t),s=r.get(i);s||(s=n.querySelector(ml(i)),s||(t=Oe({src:t,async:!0,type:"module"},e),(e=_n.get(i))&&wg(t,e),s=n.createElement("script"),lt(s),_t(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function nv(t,e,n,r){var i=(i=Ur.current)?fu(i):null;if(!i)throw Error(j(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Fs(n.href),n=Es(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Fs(n.href);var s=Es(i).hoistableStyles,a=s.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=i.querySelector(gl(t)))&&!s._p&&(a.instance=s,a.state.loading=5),_n.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_n.set(t,n),s||LR(i,t,n,a.state))),e&&r===null)throw Error(j(528,""));return a}if(e&&r!==null)throw Error(j(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=oa(n),n=Es(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,t))}}function Fs(t){return'href="'+dn(t)+'"'}function gl(t){return'link[rel="stylesheet"]['+t+"]"}function YT(t){return Oe({},t,{"data-precedence":t.precedence,precedence:null})}function LR(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),_t(e,"link",n),lt(e),t.head.appendChild(e))}function oa(t){return'[src="'+dn(t)+'"]'}function ml(t){return"script[async]"+t}function rv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+dn(n.href)+'"]');if(r)return e.instance=r,lt(r),r;var i=Oe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),lt(r),_t(r,"style",i),Dc(r,n.precedence,t),e.instance=r;case"stylesheet":i=Fs(n.href);var s=t.querySelector(gl(i));if(s)return e.state.loading|=4,e.instance=s,lt(s),s;r=YT(n),(i=_n.get(i))&&Tg(r,i),s=(t.ownerDocument||t).createElement("link"),lt(s);var a=s;return a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),_t(s,"link",r),e.state.loading|=4,Dc(s,n.precedence,t),e.instance=s;case"script":return s=oa(n.src),(i=t.querySelector(ml(s)))?(e.instance=i,lt(i),i):(r=n,(i=_n.get(s))&&(r=Oe({},n),wg(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),lt(i),_t(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(j(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Dc(r,n.precedence,t));return e.instance}function Dc(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===e)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Tg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Nc=null;function iv(t,e,n){if(Nc===null){var r=new Map,i=Nc=new Map;i.set(n,r)}else i=Nc,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var s=n[i];if(!(s[sl]||s[Rt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function sv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function jR(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function KT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Oo=null;function UR(){}function BR(t,e,n){if(Oo===null)throw Error(j(475));var r=Oo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=Fs(n.href),s=t.querySelector(gl(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=pu.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=s,lt(s);return}s=t.ownerDocument||t,n=YT(n),(i=_n.get(i))&&Tg(n,i),s=s.createElement("link"),lt(s);var a=s;a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),_t(s,"link",n),e.instance=s}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=pu.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function zR(){if(Oo===null)throw Error(j(475));var t=Oo;return t.stylesheets&&t.count===0&&Kf(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Kf(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function pu(){if(this.count--,this.count===0){if(this.stylesheets)Kf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var gu=null;function Kf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,gu=new Map,e.forEach(HR,t),gu=null,pu.call(t))}function HR(t,e){if(!(e.state.loading&4)){var n=gu.get(t);if(n)var r=n.get(null);else{n=new Map,gu.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}i=e.instance,a=i.getAttribute("data-precedence"),s=n.get(a)||r,s===r&&n.set(null,i),n.set(a,i),this.count++,r=pu.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Mo={$$typeof:Qn,Provider:null,Consumer:null,_currentValue:wi,_currentValue2:wi,_threadCount:0};function FR(t,e,n,r,i,s,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.hiddenUpdates=Jd(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function QT(t,e,n,r,i,s,a,o,c,u,d,p){return t=new FR(t,e,n,a,o,c,u,p),e=1,s===!0&&(e|=24),s=Qt(3,null,null,e),t.current=s,s.stateNode=t,e=Xp(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},Jp(s),t}function WT(t){return t?(t=ms,t):ms}function XT(t,e,n,r,i,s){i=WT(i),r.context===null?r.context=i:r.pendingContext=i,r=Br(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=zr(t,r,e),n!==null&&(en(n,t,e),ao(n,t,e))}function av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sg(t,e){av(t,e),(t=t.alternate)&&av(t,e)}function ZT(t){if(t.tag===13){var e=ia(t,67108864);e!==null&&en(e,t,67108864),Sg(t,67108864)}}var mu=!0;function GR(t,e,n,r){var i=J.T;J.T=null;var s=_e.p;try{_e.p=2,xg(t,e,n,r)}finally{_e.p=s,J.T=i}}function qR(t,e,n,r){var i=J.T;J.T=null;var s=_e.p;try{_e.p=8,xg(t,e,n,r)}finally{_e.p=s,J.T=i}}function xg(t,e,n,r){if(mu){var i=Qf(r);if(i===null)Dh(t,e,r,yu,n),ov(t,r);else if(YR(i,t,e,n,r))r.stopPropagation();else if(ov(t,r),e&4&&-1<$R.indexOf(t)){for(;i!==null;){var s=ra(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=yi(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var c=1<<31-Zt(a);o.entanglements[1]|=c,a&=~c}zn(s),!(we&6)&&(ou=On()+500,pl(0))}}break;case 13:o=ia(s,2),o!==null&&en(o,s,2),ad(),Sg(s,2)}if(s=Qf(r),s===null&&Dh(t,e,r,yu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dh(t,e,r,null,n)}}function Qf(t){return t=zp(t),Ag(t)}var yu=null;function Ag(t){if(yu=null,t=us(t),t!==null){var e=tl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=wb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return yu=t,null}function JT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(N1()){case Ib:return 2;case Rb:return 8;case qc:case O1:return 32;case Cb:return 268435456;default:return 32}default:return 32}}var Wf=!1,Gr=null,qr=null,$r=null,Po=new Map,Vo=new Map,Cr=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ov(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(e.pointerId)}}function Ba(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ra(e),e!==null&&ZT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YR(t,e,n,r,i){switch(e){case"focusin":return Gr=Ba(Gr,t,e,n,r,i),!0;case"dragenter":return qr=Ba(qr,t,e,n,r,i),!0;case"mouseover":return $r=Ba($r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Po.set(s,Ba(Po.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vo.set(s,Ba(Vo.get(s)||null,t,e,n,r,i)),!0}return!1}function ew(t){var e=us(t.target);if(e!==null){var n=tl(e);if(n!==null){if(e=n.tag,e===13){if(e=wb(n),e!==null){t.blockedOn=e,B1(t.priority,function(){if(n.tag===13){var r=Jt();r=Lp(r);var i=ia(n,r);i!==null&&en(i,n,r),Sg(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qf(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ff=r,n.target.dispatchEvent(r),ff=null}else return e=ra(n),e!==null&&ZT(e),t.blockedOn=n,!1;e.shift()}return!0}function lv(t,e,n){Oc(t)&&n.delete(e)}function KR(){Wf=!1,Gr!==null&&Oc(Gr)&&(Gr=null),qr!==null&&Oc(qr)&&(qr=null),$r!==null&&Oc($r)&&($r=null),Po.forEach(lv),Vo.forEach(lv)}function cc(t,e){t.blockedOn===e&&(t.blockedOn=null,Wf||(Wf=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,KR)))}var uc=null;function cv(t){uc!==t&&(uc=t,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,function(){uc===t&&(uc=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(Ag(r||n)===null)continue;break}var s=ra(n);s!==null&&(t.splice(e,3),e-=3,Cf(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function ko(t){function e(c){return cc(c,t)}Gr!==null&&cc(Gr,t),qr!==null&&cc(qr,t),$r!==null&&cc($r,t),Po.forEach(e),Vo.forEach(e);for(var n=0;n<Cr.length;n++){var r=Cr[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)ew(n),n.blockedOn===null&&Cr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ht]||null;if(typeof s=="function")a||cv(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ht]||null)o=a.formAction;else if(Ag(i)!==null)continue}else o=a.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),cv(n)}}}function Ig(t){this._internalRoot=t}ud.prototype.render=Ig.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));var n=e.current,r=Jt();XT(n,r,t,e,null,null)};ud.prototype.unmount=Ig.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;XT(t.current,2,null,t,null,null),ad(),e[na]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&ew(t)}};var uv=Eb.version;if(uv!=="19.1.1")throw Error(j(527,uv,"19.1.1"));_e.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=S1(e),t=t!==null?Sb(t):null,t=t===null?null:t.stateNode,t};var QR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{nl=dc.inject(QR),Xt=dc}catch{}}Yu.createRoot=function(t,e){if(!Tb(t))throw Error(j(299));var n=!1,r="",i=QE,s=WE,a=XE,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=QT(t,1,!1,null,null,n,r,i,s,a,o,null),t[na]=e.current,Eg(t),new Ig(e)};Yu.hydrateRoot=function(t,e,n){if(!Tb(t))throw Error(j(299));var r=!1,i="",s=QE,a=WE,o=XE,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),e=QT(t,1,!0,e,n??null,r,i,s,a,o,c,u),e.context=WT(null),n=e.current,r=Jt(),r=Lp(r),i=Br(r),i.callback=null,zr(n,i,r),n=r,e.current.lanes=n,il(e,n),zn(e),t[na]=e.current,Eg(t),new ud(e)};Yu.version="19.1.1";function tw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tw)}catch(t){console.error(t)}}tw(),gb.exports=Yu;var WR=gb.exports;const XR=Rp(WR);var dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,p=(s&3)<<4|o>>4;let f=(o&15)<<2|u>>6,m=u&63;c||(m=64,a||(f=64)),r.push(n[d],n[p],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||p==null)throw new JR;const f=s<<2|o>>4;if(r.push(f),u!==64){const m=o<<4&240|u>>2;if(r.push(m),p!==64){const A=u<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(t){const e=nw(t);return rw.encodeByteArray(e,!0)},vu=function(t){return e2(t).replace(/\./g,"")},iw=function(t){try{return rw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=()=>t2().__FIREBASE_DEFAULTS__,r2=()=>{if(typeof process>"u"||typeof dv>"u")return;const t=dv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iw(t[1]);return e&&JSON.parse(e)},dd=()=>{try{return n2()||r2()||i2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sw=t=>{var e,n;return(n=(e=dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},s2=t=>{const e=sw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aw=()=>{var t;return(t=dd())===null||t===void 0?void 0:t.config},ow=t=>{var e;return(e=dd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vu(JSON.stringify(n)),vu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function c2(){var t;const e=(t=dd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function h2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f2(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p2(){return!c2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g2(){try{return typeof indexedDB=="object"}catch{return!1}}function m2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y2,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?v2(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new mr(i,o,r)}}function v2(t,e){return t.replace(_2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _2=/\{\$([^}]+)}/g;function b2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(hv(s)&&hv(a)){if(!_u(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function E2(t,e){const n=new T2(t,e);return n.subscribe.bind(n)}class T2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");w2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Oh),i.error===void 0&&(i.error=Oh),i.complete===void 0&&(i.complete=Oh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S2=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new a2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A2(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function x2(t){return t===bi?void 0:t}function A2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const R2={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},C2=he.INFO,D2={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},N2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=D2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=N2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const O2=(t,e)=>e.some(n=>t instanceof n);let fv,pv;function M2(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lw=new WeakMap,Xf=new WeakMap,cw=new WeakMap,Mh=new WeakMap,Cg=new WeakMap;function V2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Yr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&lw.set(n,t)}).catch(()=>{}),Cg.set(e,t),e}function k2(t){if(Xf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Xf.set(t,e)}let Zf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function L2(t){Zf=t(Zf)}function j2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ph(this),e,...n);return cw.set(r,e.sort?e.sort():[e]),Yr(r)}:P2().includes(t)?function(...e){return t.apply(Ph(this),e),Yr(lw.get(this))}:function(...e){return Yr(t.apply(Ph(this),e))}}function U2(t){return typeof t=="function"?j2(t):(t instanceof IDBTransaction&&k2(t),O2(t,M2())?new Proxy(t,Zf):t)}function Yr(t){if(t instanceof IDBRequest)return V2(t);if(Mh.has(t))return Mh.get(t);const e=U2(t);return e!==t&&(Mh.set(t,e),Cg.set(e,t)),e}const Ph=t=>Cg.get(t);function B2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Yr(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Yr(a.result),c.oldVersion,c.newVersion,Yr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const z2=["get","getKey","getAll","getAllKeys","count"],H2=["put","add","delete","clear"],Vh=new Map;function gv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=H2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||z2.includes(n)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return Vh.set(e,s),s}L2(t=>({...t,get:(e,n,r)=>gv(e,n)||t.get(e,n,r),has:(e,n)=>!!gv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function G2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",mv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Rg("@firebase/app"),q2="@firebase/app-compat",$2="@firebase/analytics-compat",Y2="@firebase/analytics",K2="@firebase/app-check-compat",Q2="@firebase/app-check",W2="@firebase/auth",X2="@firebase/auth-compat",Z2="@firebase/database",J2="@firebase/data-connect",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",rC="@firebase/installations",iC="@firebase/installations-compat",sC="@firebase/messaging",aC="@firebase/messaging-compat",oC="@firebase/performance",lC="@firebase/performance-compat",cC="@firebase/remote-config",uC="@firebase/remote-config-compat",dC="@firebase/storage",hC="@firebase/storage-compat",fC="@firebase/firestore",pC="@firebase/vertexai-preview",gC="@firebase/firestore-compat",mC="firebase",yC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]",vC={[Jf]:"fire-core",[q2]:"fire-core-compat",[Y2]:"fire-analytics",[$2]:"fire-analytics-compat",[Q2]:"fire-app-check",[K2]:"fire-app-check-compat",[W2]:"fire-auth",[X2]:"fire-auth-compat",[Z2]:"fire-rtdb",[J2]:"fire-data-connect",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[rC]:"fire-iid",[iC]:"fire-iid-compat",[sC]:"fire-fcm",[aC]:"fire-fcm-compat",[oC]:"fire-perf",[lC]:"fire-perf-compat",[cC]:"fire-rc",[uC]:"fire-rc-compat",[dC]:"fire-gcs",[hC]:"fire-gcs-compat",[fC]:"fire-fst",[gC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[mC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,_C=new Map,tp=new Map;function yv(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gs(t){const e=t.name;if(tp.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;tp.set(e,t);for(const n of bu.values())yv(n,t);for(const n of _C.values())yv(n,t);return!0}function Dg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new yl("app","Firebase",bC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=yC;function uw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ep,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Kr.create("bad-app-name",{appName:String(i)});if(n||(n=aw()),!n)throw Kr.create("no-options");const s=bu.get(i);if(s){if(_u(n,s.options)&&_u(r,s.config))return s;throw Kr.create("duplicate-app",{appName:i})}const a=new I2(i);for(const c of tp.values())a.addComponent(c);const o=new EC(n,r,a);return bu.set(i,o),o}function dw(t=ep){const e=bu.get(t);if(!e&&t===ep&&aw())return uw();if(!e)throw Kr.create("no-app",{appName:t});return e}function Qr(t,e,n){var r;let i=(r=vC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(o.join(" "));return}Gs(new Vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="firebase-heartbeat-database",wC=1,Lo="firebase-heartbeat-store";let kh=null;function hw(){return kh||(kh=B2(TC,wC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),kh}async function SC(t){try{const n=(await hw()).transaction(Lo),r=await n.objectStore(Lo).get(fw(t));return await n.done,r}catch(e){if(e instanceof mr)dr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function vv(t,e){try{const r=(await hw()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,fw(t)),await r.done}catch(n){if(n instanceof mr)dr.warn(n.message);else{const r=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(r.message)}}}function fw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=1024,AC=30*24*60*60*1e3;class IC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=AC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_v(),{heartbeatsToSend:r,unsentEntries:i}=RC(this._heartbeatsCache.heartbeats),s=vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return dr.warn(n),""}}}function _v(){return new Date().toISOString().substring(0,10)}function RC(t,e=xC){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),bv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g2()?m2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bv(t){return vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){Gs(new Vi("platform-logger",e=>new F2(e),"PRIVATE")),Gs(new Vi("heartbeat",e=>new IC(e),"PRIVATE")),Qr(Jf,mv,t),Qr(Jf,mv,"esm2017"),Qr("fire-js","")}DC("");function Ng(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NC=pw,gw=new yl("auth","Firebase",pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Rg("@firebase/auth");function OC(t,...e){Eu.logLevel<=he.WARN&&Eu.warn(`Auth (${la}): ${t}`,...e)}function Mc(t,...e){Eu.logLevel<=he.ERROR&&Eu.error(`Auth (${la}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Og(t,...e)}function Pn(t,...e){return Og(t,...e)}function mw(t,e,n){const r=Object.assign(Object.assign({},NC()),{[e]:n});return new yl("auth","Firebase",r).create(e,{appName:t.name})}function sr(t){return mw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gw.create(t,...e)}function Z(t,e,...n){if(!t)throw Og(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mc(e),new Error(e)}function hr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function MC(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MC()||d2()||"connection"in navigator)?navigator.onLine:!0}function VC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=l2()||h2()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new _l(3e4,6e4);function li(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,r,i={}){return vw(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=vl(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return u2()||(u.referrerPolicy="no-referrer"),yw.fetch()(_w(t,t.config.apiHost,n,o),u)})}async function vw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kC),e);try{const i=new UC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw hc(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw hc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw hc(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw mw(t,d,u);xn(t,d)}}catch(i){if(i instanceof mr)throw i;xn(t,"network-request-failed",{message:String(i)})}}async function bl(t,e,n,r,i={}){const s=await ci(t,e,n,r,i);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _w(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Mg(t.config,i):`${t.config.apiScheme}://${i}`}function jC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),LC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pn(t,e,r);return i.customData._tokenResponse=n,i}function Tv(t){return t!==void 0&&t.enterprise!==void 0}class BC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zC(t,e){return ci(t,"GET","/v2/recaptchaConfig",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function bw(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FC(t,e=!1){const n=sn(t),r=await n.getIdToken(e),i=Pg(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mo(Lh(i.auth_time)),issuedAtTime:mo(Lh(i.iat)),expirationTime:mo(Lh(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Lh(t){return Number(t)*1e3}function Pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const i=iw(n);return i?JSON.parse(i):(Mc("Failed to decode base64 JWT payload"),null)}catch(i){return Mc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wv(t){const e=Pg(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&GC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await jo(t,bw(n,{idToken:r}));Z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ew(s.providerUserInfo):[],o=YC(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new rp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function $C(t){const e=sn(t);await Tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ew(t){return t.map(e=>{var{providerId:n}=e,r=Ng(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e){const n=await vw(t,{},async()=>{const r=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=_w(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",yw.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QC(t,e){return ci(t,"POST","/v2/accounts:revokeToken",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await KC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Cs;return r&&(Z(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cs,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ng(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jo(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FC(this,e)}reload(){return $C(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(sr(this.auth));const e=await this.getIdToken();return await jo(this,HC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,c,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,D=(o=n.tenantId)!==null&&o!==void 0?o:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:N,isAnonymous:M,providerData:V,stsTokenManager:w}=n;Z(T&&w,e,"internal-error");const v=Cs.fromJSON(this.name,w);Z(typeof T=="string",e,"internal-error"),Tr(p,e.name),Tr(f,e.name),Z(typeof N=="boolean",e,"internal-error"),Z(typeof M=="boolean",e,"internal-error"),Tr(m,e.name),Tr(A,e.name),Tr(D,e.name),Tr(R,e.name),Tr(_,e.name),Tr(b,e.name);const x=new tr({uid:T,auth:e,email:f,emailVerified:N,displayName:p,isAnonymous:M,photoURL:A,phoneNumber:m,tenantId:D,stsTokenManager:v,createdAt:_,lastLoginAt:b});return V&&Array.isArray(V)&&(x.providerData=V.map(S=>Object.assign({},S))),R&&(x._redirectEventId=R),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Cs;i.updateFromServerResponse(n);const s=new tr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Ew(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Cs;o.updateFromIdToken(r);const c=new tr({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;function nr(t){hr(t instanceof Function,"Expected a class definition");let e=Sv.get(t);return e?(hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tw.type="NONE";const xv=Tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ds{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Pc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ds(nr(xv),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||nr(xv);const a=Pc(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const p=tr._fromJSON(e,d);u!==s&&(o=p),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ds(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Ds(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Aw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rw(e))return"Blackberry";if(Cw(e))return"Webos";if(Sw(e))return"Safari";if((e.includes("chrome/")||xw(e))&&!e.includes("edge/"))return"Chrome";if(Iw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ww(t=Dt()){return/firefox\//i.test(t)}function Sw(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xw(t=Dt()){return/crios\//i.test(t)}function Aw(t=Dt()){return/iemobile/i.test(t)}function Iw(t=Dt()){return/android/i.test(t)}function Rw(t=Dt()){return/blackberry/i.test(t)}function Cw(t=Dt()){return/webos/i.test(t)}function Vg(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WC(t=Dt()){var e;return Vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XC(){return f2()&&document.documentMode===10}function Dw(t=Dt()){return Vg(t)||Iw(t)||Cw(t)||Rw(t)||/windows phone/i.test(t)||Aw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e=[]){let n;switch(t){case"Browser":n=Av(Dt());break;case"Worker":n=`${Av(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(t,e={}){return ci(t,"GET","/v2/passwordPolicy",li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=6;class tD{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:eD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new ZC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ds.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bw(this,{idToken:e}),r=await tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(sr(this));const n=e?sn(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JC(this),n=new tD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Ds.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $i(t){return sn(t)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=E2(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rD(t){hd=t}function Ow(t){return hd.loadJS(t)}function iD(){return hd.recaptchaEnterpriseScript}function sD(){return hd.gapiScript}function aD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const oD="recaptcha-enterprise",lD="NO_RECAPTCHA";class cD{constructor(e){this.type=oD,this.auth=$i(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{zC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new BC(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;Tv(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(lD)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&Tv(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=iD();c.length!==0&&(c+=o),Ow(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Rv(t,e,n,r=!1){const i=new cD(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ip(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Rv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Rv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const n=Dg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_u(s,e??{}))return i;xn(i,"already-initialized")}return n.initialize({options:e})}function dD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hD(t,e,n){const r=$i(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Mw(e),{host:a,port:o}=fD(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pD()}function Mw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fD(t){const e=Mw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Cv(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Cv(a)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function gD(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e){return bl(t,"POST","/v1/accounts:signInWithPassword",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return bl(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}async function vD(t,e){return bl(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends kg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Uo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Uo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,n,"signInWithPassword",mD);case"emailLink":return yD(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,r,"signUpPassword",gD);case"emailLink":return vD(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(t,e){return bl(t,"POST","/v1/accounts:signInWithIdp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="http://localhost";class ki extends kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ng(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new ki(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ns(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:_D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ED(t){const e=Qa(Wa(t)).link,n=e?Qa(Wa(e)).deep_link_id:null,r=Qa(Wa(t)).deep_link_id;return(r?Qa(Wa(r)).link:null)||r||n||e||t}class Lg{constructor(e){var n,r,i,s,a,o;const c=Qa(Wa(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,p=bD((i=c.mode)!==null&&i!==void 0?i:null);Z(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=ED(e);try{return new Lg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,n){return Uo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lg.parseLink(n);return Z(r,"argument-error"),Uo._fromEmailAndCode(e,r.code,r.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends El{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends El{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends El{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return bl(t,"POST","/v1/accounts:signUp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await tr._fromIdTokenResponse(e,r,i),a=Dv(r);return new Li({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Dv(r);return new Li({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Dv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends mr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wu(e,n,r,i)}}function Vw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wu._fromErrorAndOperation(t,s,e,r):s})}async function wD(t,e,n=!1){const r=await jo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Li._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e,n=!1){const{auth:r}=t;if(Dn(r.app))return Promise.reject(sr(r));const i="reauthenticate";try{const s=await jo(t,Vw(r,i,e,t),n);Z(s.idToken,r,"internal-error");const a=Pg(s.idToken);Z(a,r,"internal-error");const{sub:o}=a;return Z(t.uid===o,r,"user-mismatch"),Li._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(t,e,n=!1){if(Dn(t.app))return Promise.reject(sr(t));const r="signIn",i=await Vw(t,r,e),s=await Li._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function xD(t,e){return kw($i(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(t){const e=$i(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AD(t,e,n){if(Dn(t.app))return Promise.reject(sr(t));const r=$i(t),a=await ip(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Lw(t),c}),o=await Li._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function ID(t,e,n){return Dn(t.app)?Promise.reject(sr(t)):xD(sn(t),ca.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lw(t),r})}function RD(t,e,n,r){return sn(t).onIdTokenChanged(e,n,r)}function CD(t,e,n){return sn(t).beforeAuthStateChanged(e,n)}function DD(t,e,n,r){return sn(t).onAuthStateChanged(e,n,r)}function ND(t){return sn(t).signOut()}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=1e3,MD=10;class Uw extends jw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);XC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,MD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},OD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uw.type="LOCAL";const PD=Uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends jw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bw.type="SESSION";const zw=Bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(n.origin,s)),c=await VD(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=jg("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const f=p;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function LD(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BD(){return Hw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="firebaseLocalStorageDb",zD=1,xu="firebaseLocalStorage",Gw="fbase_key";class Tl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pd(t,e){return t.transaction([xu],e?"readwrite":"readonly").objectStore(xu)}function HD(){const t=indexedDB.deleteDatabase(Fw);return new Tl(t).toPromise()}function sp(){const t=indexedDB.open(Fw,zD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xu,{keyPath:Gw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xu)?e(r):(r.close(),await HD(),e(await sp()))})})}async function Nv(t,e,n){const r=pd(t,!0).put({[Gw]:e,value:n});return new Tl(r).toPromise()}async function FD(t,e){const n=pd(t,!1).get(e),r=await new Tl(n).toPromise();return r===void 0?null:r.value}function Ov(t,e){const n=pd(t,!0).delete(e);return new Tl(n).toPromise()}const GD=800,qD=3;class qw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fd._getInstance(BD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new kD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sp();return await Nv(e,Su,"1"),await Ov(e,Su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=pd(i,!1).getAll();return new Tl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qw.type="LOCAL";const $D=qw;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t,e){return e?nr(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KD(t){return kw(t.auth,new Ug(t),t.bypassAuthState)}function QD(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),SD(n,new Ug(t),t.bypassAuthState)}async function WD(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),wD(n,new Ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return QD;default:xn(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new _l(2e3,1e4);class bs extends $w{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XD.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="pendingRedirect",Vc=new Map;class JD extends $w{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const r=await eN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eN(t,e){const n=rN(e),r=nN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tN(t,e){Vc.set(t._key(),e)}function nN(t){return nr(t._redirectPersistence)}function rN(t){return Pc(ZD,t.config.apiKey,t.name)}async function iN(t,e,n=!1){if(Dn(t.app))return Promise.reject(sr(t));const r=$i(t),i=YD(r,e),a=await new JD(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=10*60*1e3;class aN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Yw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uN=/^https?/;async function dN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lN(t);for(const n of e)try{if(hN(n))return}catch{}xn(t,"unauthorized-domain")}function hN(t){const e=np(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!uN.test(n))return!1;if(cN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new _l(3e4,6e4);function Pv(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pN(t){return new Promise((e,n)=>{var r,i,s;function a(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),n(Pn(t,"network-request-failed"))},timeout:fN.get()})}if(!((i=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)a();else{const o=aD("iframefcb");return Vn()[o]=()=>{gapi.load?a():n(Pn(t,"network-request-failed"))},Ow(`${sD()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw kc=null,e})}let kc=null;function gN(t){return kc=kc||pN(t),kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new _l(5e3,15e3),yN="__/auth/iframe",vN="emulator/auth/iframe",_N={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EN(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,vN):`https://${t.config.authDomain}/${yN}`,r={apiKey:e.apiKey,appName:t.name,v:la},i=bN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vl(r).slice(1)}`}async function TN(t){const e=await gN(t),n=Vn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:EN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_N,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Pn(t,"network-request-failed"),o=Vn().setTimeout(()=>{s(a)},mN.get());function c(){Vn().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SN=500,xN=600,AN="_blank",IN="http://localhost";class Vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RN(t,e,n,r=SN,i=xN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},wN),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Dt().toLowerCase();n&&(o=xw(u)?AN:n),ww(u)&&(e=e||IN,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,A])=>`${f}${m}=${A},`,"");if(WC(u)&&o!=="_self")return CN(e||"",o),new Vv(null);const p=window.open(e||"",o,d);Z(p,t,"popup-blocked");try{p.focus()}catch{}return new Vv(p)}function CN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="__/auth/handler",NN="emulator/auth/handler",ON=encodeURIComponent("fac");async function kv(t,e,n,r,i,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:la,eventId:i};if(e instanceof Pw){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",b2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof El){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await t._getAppCheckToken(),u=c?`#${ON}=${encodeURIComponent(c)}`:"";return`${MN(t)}?${vl(o).slice(1)}${u}`}function MN({config:t}){return t.emulator?Mg(t,NN):`https://${t.authDomain}/${DN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="webStorageSupport";class PN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zw,this._completeRedirectFn=iN,this._overrideRedirectResult=tN}async _openPopup(e,n,r,i){var s;hr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await kv(e,n,r,np(),i);return RN(e,a,jg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await kv(e,n,r,np(),i);return LD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TN(e),r=new aN(e);return n.register("authEvent",i=>(Z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jh,{type:jh},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[jh];a!==void 0&&n(!!a),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Dw()||Sw()||Vg()}}const VN=PN;var Lv="@firebase/auth",jv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jN(t){Gs(new Vi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Z(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nw(t)},u=new nD(r,i,s,c);return dD(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gs(new Vi("auth-internal",e=>{const n=$i(e.getProvider("auth").getImmediate());return(r=>new kN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(Lv,jv,LN(t)),Qr(Lv,jv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=5*60,BN=ow("authIdTokenMaxAge")||UN;let Uv=null;const zN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BN)return;const i=n==null?void 0:n.token;Uv!==i&&(Uv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function HN(t=dw()){const e=Dg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uD(t,{popupRedirectResolver:VN,persistence:[$D,PD,zw]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=zN(s.toString());CD(n,a,()=>a(n.currentUser)),RD(n,o=>a(o))}}const i=sw("auth");return i&&hD(n,`http://${i}`),n}function FN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",FN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jN("Browser");var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,Kw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function x(){}x.prototype=v.prototype,w.D=v.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(S,I,O){for(var C=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)C[ee-2]=arguments[ee];return v.prototype[I].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,x){x||(x=0);var S=Array(16);if(typeof v=="string")for(var I=0;16>I;++I)S[I]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(I=0;16>I;++I)S[I]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=w.g[0],x=w.g[1],I=w.g[2];var O=w.g[3],C=v+(O^x&(I^O))+S[0]+3614090360&4294967295;v=x+(C<<7&4294967295|C>>>25),C=O+(I^v&(x^I))+S[1]+3905402710&4294967295,O=v+(C<<12&4294967295|C>>>20),C=I+(x^O&(v^x))+S[2]+606105819&4294967295,I=O+(C<<17&4294967295|C>>>15),C=x+(v^I&(O^v))+S[3]+3250441966&4294967295,x=I+(C<<22&4294967295|C>>>10),C=v+(O^x&(I^O))+S[4]+4118548399&4294967295,v=x+(C<<7&4294967295|C>>>25),C=O+(I^v&(x^I))+S[5]+1200080426&4294967295,O=v+(C<<12&4294967295|C>>>20),C=I+(x^O&(v^x))+S[6]+2821735955&4294967295,I=O+(C<<17&4294967295|C>>>15),C=x+(v^I&(O^v))+S[7]+4249261313&4294967295,x=I+(C<<22&4294967295|C>>>10),C=v+(O^x&(I^O))+S[8]+1770035416&4294967295,v=x+(C<<7&4294967295|C>>>25),C=O+(I^v&(x^I))+S[9]+2336552879&4294967295,O=v+(C<<12&4294967295|C>>>20),C=I+(x^O&(v^x))+S[10]+4294925233&4294967295,I=O+(C<<17&4294967295|C>>>15),C=x+(v^I&(O^v))+S[11]+2304563134&4294967295,x=I+(C<<22&4294967295|C>>>10),C=v+(O^x&(I^O))+S[12]+1804603682&4294967295,v=x+(C<<7&4294967295|C>>>25),C=O+(I^v&(x^I))+S[13]+4254626195&4294967295,O=v+(C<<12&4294967295|C>>>20),C=I+(x^O&(v^x))+S[14]+2792965006&4294967295,I=O+(C<<17&4294967295|C>>>15),C=x+(v^I&(O^v))+S[15]+1236535329&4294967295,x=I+(C<<22&4294967295|C>>>10),C=v+(I^O&(x^I))+S[1]+4129170786&4294967295,v=x+(C<<5&4294967295|C>>>27),C=O+(x^I&(v^x))+S[6]+3225465664&4294967295,O=v+(C<<9&4294967295|C>>>23),C=I+(v^x&(O^v))+S[11]+643717713&4294967295,I=O+(C<<14&4294967295|C>>>18),C=x+(O^v&(I^O))+S[0]+3921069994&4294967295,x=I+(C<<20&4294967295|C>>>12),C=v+(I^O&(x^I))+S[5]+3593408605&4294967295,v=x+(C<<5&4294967295|C>>>27),C=O+(x^I&(v^x))+S[10]+38016083&4294967295,O=v+(C<<9&4294967295|C>>>23),C=I+(v^x&(O^v))+S[15]+3634488961&4294967295,I=O+(C<<14&4294967295|C>>>18),C=x+(O^v&(I^O))+S[4]+3889429448&4294967295,x=I+(C<<20&4294967295|C>>>12),C=v+(I^O&(x^I))+S[9]+568446438&4294967295,v=x+(C<<5&4294967295|C>>>27),C=O+(x^I&(v^x))+S[14]+3275163606&4294967295,O=v+(C<<9&4294967295|C>>>23),C=I+(v^x&(O^v))+S[3]+4107603335&4294967295,I=O+(C<<14&4294967295|C>>>18),C=x+(O^v&(I^O))+S[8]+1163531501&4294967295,x=I+(C<<20&4294967295|C>>>12),C=v+(I^O&(x^I))+S[13]+2850285829&4294967295,v=x+(C<<5&4294967295|C>>>27),C=O+(x^I&(v^x))+S[2]+4243563512&4294967295,O=v+(C<<9&4294967295|C>>>23),C=I+(v^x&(O^v))+S[7]+1735328473&4294967295,I=O+(C<<14&4294967295|C>>>18),C=x+(O^v&(I^O))+S[12]+2368359562&4294967295,x=I+(C<<20&4294967295|C>>>12),C=v+(x^I^O)+S[5]+4294588738&4294967295,v=x+(C<<4&4294967295|C>>>28),C=O+(v^x^I)+S[8]+2272392833&4294967295,O=v+(C<<11&4294967295|C>>>21),C=I+(O^v^x)+S[11]+1839030562&4294967295,I=O+(C<<16&4294967295|C>>>16),C=x+(I^O^v)+S[14]+4259657740&4294967295,x=I+(C<<23&4294967295|C>>>9),C=v+(x^I^O)+S[1]+2763975236&4294967295,v=x+(C<<4&4294967295|C>>>28),C=O+(v^x^I)+S[4]+1272893353&4294967295,O=v+(C<<11&4294967295|C>>>21),C=I+(O^v^x)+S[7]+4139469664&4294967295,I=O+(C<<16&4294967295|C>>>16),C=x+(I^O^v)+S[10]+3200236656&4294967295,x=I+(C<<23&4294967295|C>>>9),C=v+(x^I^O)+S[13]+681279174&4294967295,v=x+(C<<4&4294967295|C>>>28),C=O+(v^x^I)+S[0]+3936430074&4294967295,O=v+(C<<11&4294967295|C>>>21),C=I+(O^v^x)+S[3]+3572445317&4294967295,I=O+(C<<16&4294967295|C>>>16),C=x+(I^O^v)+S[6]+76029189&4294967295,x=I+(C<<23&4294967295|C>>>9),C=v+(x^I^O)+S[9]+3654602809&4294967295,v=x+(C<<4&4294967295|C>>>28),C=O+(v^x^I)+S[12]+3873151461&4294967295,O=v+(C<<11&4294967295|C>>>21),C=I+(O^v^x)+S[15]+530742520&4294967295,I=O+(C<<16&4294967295|C>>>16),C=x+(I^O^v)+S[2]+3299628645&4294967295,x=I+(C<<23&4294967295|C>>>9),C=v+(I^(x|~O))+S[0]+4096336452&4294967295,v=x+(C<<6&4294967295|C>>>26),C=O+(x^(v|~I))+S[7]+1126891415&4294967295,O=v+(C<<10&4294967295|C>>>22),C=I+(v^(O|~x))+S[14]+2878612391&4294967295,I=O+(C<<15&4294967295|C>>>17),C=x+(O^(I|~v))+S[5]+4237533241&4294967295,x=I+(C<<21&4294967295|C>>>11),C=v+(I^(x|~O))+S[12]+1700485571&4294967295,v=x+(C<<6&4294967295|C>>>26),C=O+(x^(v|~I))+S[3]+2399980690&4294967295,O=v+(C<<10&4294967295|C>>>22),C=I+(v^(O|~x))+S[10]+4293915773&4294967295,I=O+(C<<15&4294967295|C>>>17),C=x+(O^(I|~v))+S[1]+2240044497&4294967295,x=I+(C<<21&4294967295|C>>>11),C=v+(I^(x|~O))+S[8]+1873313359&4294967295,v=x+(C<<6&4294967295|C>>>26),C=O+(x^(v|~I))+S[15]+4264355552&4294967295,O=v+(C<<10&4294967295|C>>>22),C=I+(v^(O|~x))+S[6]+2734768916&4294967295,I=O+(C<<15&4294967295|C>>>17),C=x+(O^(I|~v))+S[13]+1309151649&4294967295,x=I+(C<<21&4294967295|C>>>11),C=v+(I^(x|~O))+S[4]+4149444226&4294967295,v=x+(C<<6&4294967295|C>>>26),C=O+(x^(v|~I))+S[11]+3174756917&4294967295,O=v+(C<<10&4294967295|C>>>22),C=I+(v^(O|~x))+S[2]+718787259&4294967295,I=O+(C<<15&4294967295|C>>>17),C=x+(O^(I|~v))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+O&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var x=v-this.blockSize,S=this.B,I=this.h,O=0;O<v;){if(I==0)for(;O<=x;)i(this,w,O),O+=this.blockSize;if(typeof w=="string"){for(;O<v;)if(S[I++]=w.charCodeAt(O++),I==this.blockSize){i(this,S),I=0;break}}else for(;O<v;)if(S[I++]=w[O++],I==this.blockSize){i(this,S),I=0;break}}this.h=I,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var x=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=x&255,x/=256;for(this.u(w),w=Array(16),v=x=0;4>v;++v)for(var S=0;32>S;S+=8)w[x++]=this.g[v]>>>S&255;return w};function s(w,v){var x=o;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=v(w)}function a(w,v){this.h=v;for(var x=[],S=!0,I=w.length-1;0<=I;I--){var O=w[I]|0;S&&O==v||(x[I]=O,S=!1)}this.g=x}var o={};function c(w){return-128<=w&&128>w?s(w,function(v){return new a([v|0],0>v?-1:0)}):new a([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(u(-w));for(var v=[],x=1,S=0;w>=x;S++)v[S]=w/x|0,x*=4294967296;return new a(v,0)}function d(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(d(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(v,8)),S=p,I=0;I<w.length;I+=8){var O=Math.min(8,w.length-I),C=parseInt(w.substring(I,I+O),v);8>O?(O=u(Math.pow(v,O)),S=S.j(O).add(u(C))):(S=S.j(x),S=S.add(u(C)))}return S}var p=c(0),f=c(1),m=c(16777216);t=a.prototype,t.m=function(){if(D(this))return-R(this).m();for(var w=0,v=1,x=0;x<this.g.length;x++){var S=this.i(x);w+=(0<=S?S:4294967296+S)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(D(this))return"-"+R(this).toString(w);for(var v=u(Math.pow(w,6)),x=this,S="";;){var I=N(x,v).g;x=_(x,I.j(v));var O=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=I,A(x))return O+S;for(;6>O.length;)O="0"+O;S=O+S}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=_(this,w),D(w)?-1:A(w)?0:1};function R(w){for(var v=w.g.length,x=[],S=0;S<v;S++)x[S]=~w.g[S];return new a(x,~w.h).add(f)}t.abs=function(){return D(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],S=0,I=0;I<=v;I++){var O=S+(this.i(I)&65535)+(w.i(I)&65535),C=(O>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);S=C>>>16,O&=65535,C&=65535,x[I]=C<<16|O}return new a(x,x[x.length-1]&-2147483648?-1:0)};function _(w,v){return w.add(R(v))}t.j=function(w){if(A(this)||A(w))return p;if(D(this))return D(w)?R(this).j(R(w)):R(R(this).j(w));if(D(w))return R(this.j(R(w)));if(0>this.l(m)&&0>w.l(m))return u(this.m()*w.m());for(var v=this.g.length+w.g.length,x=[],S=0;S<2*v;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<w.g.length;I++){var O=this.i(S)>>>16,C=this.i(S)&65535,ee=w.i(I)>>>16,$=w.i(I)&65535;x[2*S+2*I]+=C*$,b(x,2*S+2*I),x[2*S+2*I+1]+=O*$,b(x,2*S+2*I+1),x[2*S+2*I+1]+=C*ee,b(x,2*S+2*I+1),x[2*S+2*I+2]+=O*ee,b(x,2*S+2*I+2)}for(S=0;S<v;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=v;S<2*v;S++)x[S]=0;return new a(x,0)};function b(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function T(w,v){this.g=w,this.h=v}function N(w,v){if(A(v))throw Error("division by zero");if(A(w))return new T(p,p);if(D(w))return v=N(R(w),v),new T(R(v.g),R(v.h));if(D(v))return v=N(w,R(v)),new T(R(v.g),v.h);if(30<w.g.length){if(D(w)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var x=f,S=v;0>=S.l(w);)x=M(x),S=M(S);var I=V(x,1),O=V(S,1);for(S=V(S,2),x=V(x,2);!A(S);){var C=O.add(S);0>=C.l(w)&&(I=I.add(x),O=C),S=V(S,1),x=V(x,1)}return v=_(w,I.j(v)),new T(I,v)}for(I=p;0<=w.l(v);){for(x=Math.max(1,Math.floor(w.m()/v.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),O=u(x),C=O.j(v);D(C)||0<C.l(w);)x-=S,O=u(x),C=O.j(v);A(O)&&(O=f),I=I.add(O),w=_(w,C)}return new T(I,w)}t.A=function(w){return N(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)&w.i(S);return new a(x,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)|w.i(S);return new a(x,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)^w.i(S);return new a(x,this.h^w.h)};function M(w){for(var v=w.g.length+1,x=[],S=0;S<v;S++)x[S]=w.i(S)<<1|w.i(S-1)>>>31;return new a(x,w.h)}function V(w,v){var x=v>>5;v%=32;for(var S=w.g.length-x,I=[],O=0;O<S;O++)I[O]=0<v?w.i(O+x)>>>v|w.i(O+x+1)<<32-v:w.i(O+x);return new a(I,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kw=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,Di=a}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qw,Xa,Ww,Lc,ap,Xw,Zw,Jw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,y){return l==Array.prototype||l==Object.prototype||(l[h]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var h=0;h<l.length;++h){var y=l[h];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var y=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var P=l[E];if(!(P in y))break e;y=y[P]}l=l[l.length-1],E=y[l],h=h(E),h!=E&&h!=null&&e(y,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var y=0,E=!1,P={next:function(){if(!E&&y<l.length){var k=y++;return{value:h(k,l[k]),done:!1}}return E=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,y){return l.call.apply(l.bind,arguments)}function p(l,h,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,E),l.apply(h,P)}}return function(){return l.apply(h,arguments)}}function f(l,h,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,f.apply(null,arguments)}function m(l,h){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function A(l,h){function y(){}y.prototype=h.prototype,l.aa=h.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,P,k){for(var F=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)F[Ie-2]=arguments[Ie];return h.prototype[P].apply(E,F)}}function D(l){const h=l.length;if(0<h){const y=Array(h);for(let E=0;E<h;E++)y[E]=l[E];return y}return[]}function R(l,h){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(c(E)){const P=l.length||0,k=E.length||0;l.length=P+k;for(let F=0;F<k;F++)l[P+F]=E[F]}else l.push(E)}}class _{constructor(h,y){this.i=h,this.j=y,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function b(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function N(l){return N[" "](l),l}N[" "]=function(){};var M=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,h,y){for(const E in l)h.call(y,l[E],E,l)}function w(l,h){for(const y in l)h.call(void 0,l[y],y,l)}function v(l){const h={};for(const y in l)h[y]=l[y];return h}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let y,E;for(let P=1;P<arguments.length;P++){E=arguments[P];for(y in E)l[y]=E[y];for(let k=0;k<x.length;k++)y=x[k],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function I(l){var h=1;l=l.split(":");const y=[];for(;0<h&&l.length;)y.push(l.shift()),h--;return l.length&&y.push(l.join(":")),y}function O(l){o.setTimeout(()=>{throw l},0)}function C(){var l=ie;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ee{constructor(){this.h=this.g=null}add(h,y){const E=$.get();E.set(h,y),this.h?this.h.next=E:this.g=E,this.h=E}}var $=new _(()=>new z,l=>l.reset());class z{constructor(){this.next=this.g=this.h=null}set(h,y){this.h=h,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,ie=new ee,ae=()=>{const l=o.Promise.resolve(void 0);q=()=>{l.then(it)}};var it=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(y){O(y)}var h=$;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}G=!1};function Xe(){this.s=this.s,this.C=this.C}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var jt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};o.addEventListener("test",y,h),o.removeEventListener("test",y,h)}catch{}return l}();function Ze(l,h){if(Ee.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(M){e:{try{N(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else y=="mouseover"?h=l.fromElement:y=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Q[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ze.aa.h.call(this)}}A(Ze,Ee);var Q={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),st=0;function Me(l,h,y,E,P){this.listener=l,this.proxy=null,this.src=h,this.type=y,this.capture=!!E,this.ha=P,this.key=++st,this.da=this.fa=!1}function Pe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Hn(l){this.src=l,this.g={},this.h=0}Hn.prototype.add=function(l,h,y,E,P){var k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);var F=Gt(l,h,E,P);return-1<F?(h=l[F],y||(h.fa=!1)):(h=new Me(h,this.src,k,!!E,P),h.fa=y,l.push(h)),h};function Ce(l,h){var y=h.type;if(y in l.g){var E=l.g[y],P=Array.prototype.indexOf.call(E,h,void 0),k;(k=0<=P)&&Array.prototype.splice.call(E,P,1),k&&(Pe(h),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Gt(l,h,y,E){for(var P=0;P<l.length;++P){var k=l[P];if(!k.da&&k.listener==h&&k.capture==!!y&&k.ha==E)return P}return-1}var ya="closure_lm_"+(1e6*Math.random()|0),va={};function Ol(l,h,y,E,P){if(Array.isArray(h)){for(var k=0;k<h.length;k++)Ol(l,h[k],y,E,P);return null}return y=Gm(y),l&&l[se]?l.K(h,y,u(E)?!!E.capture:!1,P):ui(l,h,y,!1,E,P)}function ui(l,h,y,E,P,k){if(!h)throw Error("Invalid event type");var F=u(P)?!!P.capture:!!P,Ie=Md(l);if(Ie||(l[ya]=Ie=new Hn(l)),y=Ie.add(h,y,E,F,k),y.proxy)return y;if(E=Od(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)jt||(P=F),P===void 0&&(P=!1),l.addEventListener(h.toString(),E,P);else if(l.attachEvent)l.attachEvent(Pl(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Od(){function l(y){return h.call(l.src,l.listener,y)}const h=RA;return l}function Ml(l,h,y,E,P){if(Array.isArray(h))for(var k=0;k<h.length;k++)Ml(l,h[k],y,E,P);else E=u(E)?!!E.capture:!!E,y=Gm(y),l&&l[se]?(l=l.i,h=String(h).toString(),h in l.g&&(k=l.g[h],y=Gt(k,y,E,P),-1<y&&(Pe(k[y]),Array.prototype.splice.call(k,y,1),k.length==0&&(delete l.g[h],l.h--)))):l&&(l=Md(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Gt(h,y,E,P)),(y=-1<l?h[l]:null)&&_a(y))}function _a(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[se])Ce(h.i,l);else{var y=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(y,E,l.capture):h.detachEvent?h.detachEvent(Pl(y),E):h.addListener&&h.removeListener&&h.removeListener(E),(y=Md(h))?(Ce(y,l),y.h==0&&(y.src=null,h[ya]=null)):Pe(l)}}}function Pl(l){return l in va?va[l]:va[l]="on"+l}function RA(l,h){if(l.da)l=!0;else{h=new Ze(h,this);var y=l.listener,E=l.ha||l.src;l.fa&&_a(l),l=y.call(E,h)}return l}function Md(l){return l=l[ya],l instanceof Hn?l:null}var Pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gm(l){return typeof l=="function"?l:(l[Pd]||(l[Pd]=function(h){return l.handleEvent(h)}),l[Pd])}function Tt(){Xe.call(this),this.i=new Hn(this),this.M=this,this.F=null}A(Tt,Xe),Tt.prototype[se]=!0,Tt.prototype.removeEventListener=function(l,h,y,E){Ml(this,l,h,y,E)};function Nt(l,h){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new Ee(h,l);else if(h instanceof Ee)h.target=h.target||l;else{var P=h;h=new Ee(E,l),S(h,P)}if(P=!0,y)for(var k=y.length-1;0<=k;k--){var F=h.g=y[k];P=Vl(F,E,!0,h)&&P}if(F=h.g=l,P=Vl(F,E,!0,h)&&P,P=Vl(F,E,!1,h)&&P,y)for(k=0;k<y.length;k++)F=h.g=y[k],P=Vl(F,E,!1,h)&&P}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var y=l.g[h],E=0;E<y.length;E++)Pe(y[E]);delete l.g[h],l.h--}}this.F=null},Tt.prototype.K=function(l,h,y,E){return this.i.add(String(l),h,!1,y,E)},Tt.prototype.L=function(l,h,y,E){return this.i.add(String(l),h,!0,y,E)};function Vl(l,h,y,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,k=0;k<h.length;++k){var F=h[k];if(F&&!F.da&&F.capture==y){var Ie=F.listener,ft=F.ha||F.src;F.fa&&Ce(l.i,F),P=Ie.call(ft,E)!==!1&&P}}return P&&!E.defaultPrevented}function qm(l,h,y){if(typeof l=="function")y&&(l=f(l,y));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:o.setTimeout(l,h||0)}function $m(l){l.g=qm(()=>{l.g=null,l.i&&(l.i=!1,$m(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class CA extends Xe{constructor(h,y){super(),this.m=h,this.l=y,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:$m(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(l){Xe.call(this),this.h=l,this.g={}}A(ba,Xe);var Ym=[];function Km(l){V(l.g,function(h,y){this.g.hasOwnProperty(y)&&_a(h)},l),l.g={}}ba.prototype.N=function(){ba.aa.N.call(this),Km(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vd=o.JSON.stringify,DA=o.JSON.parse,NA=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function kd(){}kd.prototype.h=null;function Qm(l){return l.h||(l.h=l.i())}function Wm(){}var Ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ld(){Ee.call(this,"d")}A(Ld,Ee);function jd(){Ee.call(this,"c")}A(jd,Ee);var di={},Xm=null;function kl(){return Xm=Xm||new Tt}di.La="serverreachability";function Zm(l){Ee.call(this,di.La,l)}A(Zm,Ee);function Ta(l){const h=kl();Nt(h,new Zm(h))}di.STAT_EVENT="statevent";function Jm(l,h){Ee.call(this,di.STAT_EVENT,l),this.stat=h}A(Jm,Ee);function Ot(l){const h=kl();Nt(h,new Jm(h,l))}di.Ma="timingevent";function ey(l,h){Ee.call(this,di.Ma,l),this.size=h}A(ey,Ee);function wa(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Sa(){this.g=!0}Sa.prototype.xa=function(){this.g=!1};function OA(l,h,y,E,P,k){l.info(function(){if(l.g)if(k)for(var F="",Ie=k.split("&"),ft=0;ft<Ie.length;ft++){var me=Ie[ft].split("=");if(1<me.length){var wt=me[0];me=me[1];var St=wt.split("_");F=2<=St.length&&St[1]=="type"?F+(wt+"="+me+"&"):F+(wt+"=redacted&")}}else F=null;else F=k;return"XMLHTTP REQ ("+E+") [attempt "+P+"]: "+h+`
`+y+`
`+F})}function MA(l,h,y,E,P,k,F){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+P+"]: "+h+`
`+y+`
`+k+" "+F})}function Qi(l,h,y,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+VA(l,y)+(E?" "+E:"")})}function PA(l,h){l.info(function(){return"TIMEOUT: "+h})}Sa.prototype.info=function(){};function VA(l,h){if(!l.g)return h;if(!h)return null;try{var y=JSON.parse(h);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var P=E[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if(k!="noop"&&k!="stop"&&k!="close")for(var F=1;F<P.length;F++)P[F]=""}}}}return Vd(y)}catch{return h}}var Ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ty={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ud;function jl(){}A(jl,kd),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},Ud=new jl;function yr(l,h,y,E){this.j=l,this.i=h,this.l=y,this.R=E||1,this.U=new ba(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ny}function ny(){this.i=null,this.g="",this.h=!1}var ry={},Bd={};function zd(l,h,y){l.L=1,l.v=Hl(Fn(h)),l.m=y,l.P=!0,iy(l,null)}function iy(l,h){l.F=Date.now(),Ul(l),l.A=Fn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),vy(y.i,"t",E),l.C=0,y=l.j.J,l.h=new ny,l.g=ky(l.j,y?h:null,!l.m),0<l.O&&(l.M=new CA(f(l.Y,l,l.g),l.O)),h=l.U,y=l.g,E=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Ym[0]=P.toString()),P=Ym);for(var k=0;k<P.length;k++){var F=Ol(y,P[k],E||h.handleEvent,!1,h.h||h);if(!F)break;h.g[F.key]=F}h=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ta(),OA(l.i,l.u,l.A,l.l,l.R,l.m)}yr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Gn(l)==3?h.j():this.Y(l)},yr.prototype.Y=function(l){try{if(l==this.g)e:{const St=Gn(this.g);var h=this.g.Ba();const Zi=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||xy(this.g)))){this.J||St!=4||h==7||(h==8||0>=Zi?Ta(3):Ta(2)),Hd(this);var y=this.g.Z();this.X=y;t:if(sy(this)){var E=xy(this.g);l="";var P=E.length,k=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),xa(this);var F="";break t}this.h.i=new o.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(k&&h==P-1)});E.length=0,this.h.g+=l,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=y==200,MA(this.i,this.u,this.A,this.l,this.R,St,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ft=this.g;if((Ie=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ie)){var me=Ie;break t}}me=null}if(y=me)Qi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fd(this,y);else{this.o=!1,this.s=3,Ot(12),hi(this),xa(this);break e}}if(this.P){y=!0;let bn;for(;!this.J&&this.C<F.length;)if(bn=kA(this,F),bn==Bd){St==4&&(this.s=4,Ot(14),y=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==ry){this.s=4,Ot(15),Qi(this.i,this.l,F,"[Invalid Chunk]"),y=!1;break}else Qi(this.i,this.l,bn,null),Fd(this,bn);if(sy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||F.length!=0||this.h.h||(this.s=1,Ot(16),y=!1),this.o=this.o&&y,!y)Qi(this.i,this.l,F,"[Invalid Chunked Response]"),hi(this),xa(this);else if(0<F.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Qd(wt),wt.M=!0,Ot(11))}}else Qi(this.i,this.l,F,null),Fd(this,F);St==4&&hi(this),this.o&&!this.J&&(St==4?Oy(this.j,this):(this.o=!1,Ul(this)))}else JA(this.g),y==400&&0<F.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),hi(this),xa(this)}}}catch{}finally{}};function sy(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function kA(l,h){var y=l.C,E=h.indexOf(`
`,y);return E==-1?Bd:(y=Number(h.substring(y,E)),isNaN(y)?ry:(E+=1,E+y>h.length?Bd:(h=h.slice(E,E+y),l.C=E+y,h)))}yr.prototype.cancel=function(){this.J=!0,hi(this)};function Ul(l){l.S=Date.now()+l.I,ay(l,l.I)}function ay(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wa(f(l.ba,l),h)}function Hd(l){l.B&&(o.clearTimeout(l.B),l.B=null)}yr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(PA(this.i,this.A),this.L!=2&&(Ta(),Ot(17)),hi(this),this.s=2,xa(this)):ay(this,this.S-l)};function xa(l){l.j.G==0||l.J||Oy(l.j,l)}function hi(l){Hd(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Km(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Fd(l,h){try{var y=l.j;if(y.G!=0&&(y.g==l||Gd(y.h,l))){if(!l.K&&Gd(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var P=E;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Kl(y),$l(y);else break e;Kd(y),Ot(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=wa(f(y.Za,y),6e3));if(1>=cy(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else pi(y,11)}else if((l.K||y.g==l)&&Kl(y),!b(h))for(P=y.Da.g.parse(h),h=0;h<P.length;h++){let me=P[h];if(y.T=me[0],me=me[1],y.G==2)if(me[0]=="c"){y.K=me[1],y.ia=me[2];const wt=me[3];wt!=null&&(y.la=wt,y.j.info("VER="+y.la));const St=me[4];St!=null&&(y.Aa=St,y.j.info("SVER="+y.Aa));const Zi=me[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(E=1.5*Zi,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const bn=l.g;if(bn){const Wl=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var k=E.h;k.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(qd(k,k.h),k.h=null))}if(E.D){const Wd=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wd&&(E.ya=Wd,Ne(E.I,E.D,Wd))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var F=l;if(E.qa=Vy(E,E.J?E.ia:null,E.W),F.K){uy(E.h,F);var Ie=F,ft=E.L;ft&&(Ie.I=ft),Ie.B&&(Hd(Ie),Ul(Ie)),E.g=F}else Dy(E);0<y.i.length&&Yl(y)}else me[0]!="stop"&&me[0]!="close"||pi(y,7);else y.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?pi(y,7):Yd(y):me[0]!="noop"&&y.l&&y.l.ta(me),y.v=0)}}Ta(4)}catch{}}var LA=class{constructor(l,h){this.g=l,this.map=h}};function oy(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ly(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cy(l){return l.h?1:l.g?l.g.size:0}function Gd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function qd(l,h){l.g?l.g.add(h):l.h=h}function uy(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}oy.prototype.cancel=function(){if(this.i=dy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dy(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const y of l.g.values())h=h.concat(y.D);return h}return D(l.i)}function jA(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],y=l.length,E=0;E<y;E++)h.push(l[E]);return h}h=[],y=0;for(E in l)h[y++]=l[E];return h}function UA(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var y=0;y<l;y++)h.push(y);return h}h=[],y=0;for(const E in l)h[y++]=E;return h}}}function hy(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var y=UA(l),E=jA(l),P=E.length,k=0;k<P;k++)h.call(void 0,E[k],y&&y[k],l)}var fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BA(l,h){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),P=null;if(0<=E){var k=l[y].substring(0,E);P=l[y].substring(E+1)}else k=l[y];h(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function fi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fi){this.h=l.h,Bl(this,l.j),this.o=l.o,this.g=l.g,zl(this,l.s),this.l=l.l;var h=l.i,y=new Ra;y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),py(this,y),this.m=l.m}else l&&(h=String(l).match(fy))?(this.h=!1,Bl(this,h[1]||"",!0),this.o=Aa(h[2]||""),this.g=Aa(h[3]||"",!0),zl(this,h[4]),this.l=Aa(h[5]||"",!0),py(this,h[6]||"",!0),this.m=Aa(h[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}fi.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ia(h,gy,!0),":");var y=this.g;return(y||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ia(h,gy,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Ia(y,y.charAt(0)=="/"?FA:HA,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Ia(y,qA)),l.join("")};function Fn(l){return new fi(l)}function Bl(l,h,y){l.j=y?Aa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function zl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function py(l,h,y){h instanceof Ra?(l.i=h,$A(l.i,l.h)):(y||(h=Ia(h,GA)),l.i=new Ra(h,l.h))}function Ne(l,h,y){l.i.set(h,y)}function Hl(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Aa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ia(l,h,y){return typeof l=="string"?(l=encodeURI(l).replace(h,zA),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function zA(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gy=/[#\/\?@]/g,HA=/[#\?:]/g,FA=/[#\?]/g,GA=/[#\?@]/g,qA=/#/g;function Ra(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function vr(l){l.g||(l.g=new Map,l.h=0,l.i&&BA(l.i,function(h,y){l.add(decodeURIComponent(h.replace(/\+/g," ")),y)}))}t=Ra.prototype,t.add=function(l,h){vr(this),this.i=null,l=Wi(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(h),this.h+=1,this};function my(l,h){vr(l),h=Wi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function yy(l,h){return vr(l),h=Wi(l,h),l.g.has(h)}t.forEach=function(l,h){vr(this),this.g.forEach(function(y,E){y.forEach(function(P){l.call(h,P,E,this)},this)},this)},t.na=function(){vr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),y=[];for(let E=0;E<h.length;E++){const P=l[E];for(let k=0;k<P.length;k++)y.push(h[E])}return y},t.V=function(l){vr(this);let h=[];if(typeof l=="string")yy(this,l)&&(h=h.concat(this.g.get(Wi(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)h=h.concat(l[y])}return h},t.set=function(l,h){return vr(this),this.i=null,l=Wi(this,l),yy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function vy(l,h,y){my(l,h),0<y.length&&(l.i=null,l.g.set(Wi(l,h),D(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var y=0;y<h.length;y++){var E=h[y];const k=encodeURIComponent(String(E)),F=this.V(E);for(E=0;E<F.length;E++){var P=k;F[E]!==""&&(P+="="+encodeURIComponent(String(F[E]))),l.push(P)}}return this.i=l.join("&")};function Wi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function $A(l,h){h&&!l.j&&(vr(l),l.i=null,l.g.forEach(function(y,E){var P=E.toLowerCase();E!=P&&(my(this,E),vy(this,P,y))},l)),l.j=h}function YA(l,h){const y=new Sa;if(o.Image){const E=new Image;E.onload=m(_r,y,"TestLoadImage: loaded",!0,h,E),E.onerror=m(_r,y,"TestLoadImage: error",!1,h,E),E.onabort=m(_r,y,"TestLoadImage: abort",!1,h,E),E.ontimeout=m(_r,y,"TestLoadImage: timeout",!1,h,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function KA(l,h){const y=new Sa,E=new AbortController,P=setTimeout(()=>{E.abort(),_r(y,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(k=>{clearTimeout(P),k.ok?_r(y,"TestPingServer: ok",!0,h):_r(y,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),_r(y,"TestPingServer: error",!1,h)})}function _r(l,h,y,E,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),E(y)}catch{}}function QA(){this.g=new NA}function WA(l,h,y){const E=y||"";try{hy(l,function(P,k){let F=P;u(P)&&(F=Vd(P)),h.push(E+k+"="+encodeURIComponent(F))})}catch(P){throw h.push(E+"type="+encodeURIComponent("_badmap")),P}}function Fl(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Fl,kd),Fl.prototype.g=function(){return new Gl(this.l,this.j)},Fl.prototype.i=function(l){return function(){return l}}({});function Gl(l,h){Tt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Gl,Tt),t=Gl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Da(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||o).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_y(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _y(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ca(this):Da(this),this.readyState==3&&_y(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ca(this))},t.Qa=function(l){this.g&&(this.response=l,Ca(this))},t.ga=function(){this.g&&Ca(this)};function Ca(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Da(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var y=h.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=h.next();return l.join(`\r
`)};function Da(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function by(l){let h="";return V(l,function(y,E){h+=E,h+=":",h+=y,h+=`\r
`}),h}function $d(l,h,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=by(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ne(l,h,y))}function Be(l){Tt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Be,Tt);var XA=/^https?$/i,ZA=["POST","PUT"];t=Be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ud.g(),this.v=this.o?Qm(this.o):Qm(Ud),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(k){Ey(this,k);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var P in E)y.set(P,E[P]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const k of E.keys())y.set(k,E.get(k));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(k=>k.toLowerCase()=="content-type"),P=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ZA,h,void 0))||E||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,F]of y)this.g.setRequestHeader(k,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sy(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){Ey(this,k)}};function Ey(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Ty(l),ql(l)}function Ty(l){l.A||(l.A=!0,Nt(l,"complete"),Nt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Nt(this,"complete"),Nt(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wy(this):this.bb())},t.bb=function(){wy(this)};function wy(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Gn(l)!=4||l.Z()!=2)){if(l.u&&Gn(l)==4)qm(l.Ea,0,l);else if(Nt(l,"readystatechange"),Gn(l)==4){l.h=!1;try{const F=l.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var y;if(!(y=h)){var E;if(E=F===0){var P=String(l.D).match(fy)[1]||null;!P&&o.self&&o.self.location&&(P=o.self.location.protocol.slice(0,-1)),E=!XA.test(P?P.toLowerCase():"")}y=E}if(y)Nt(l,"complete"),Nt(l,"success");else{l.m=6;try{var k=2<Gn(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",Ty(l)}}finally{ql(l)}}}}function ql(l,h){if(l.g){Sy(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Nt(l,"ready");try{y.onreadystatechange=E}catch{}}}function Sy(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Gn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),DA(h)}};function xy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function JA(l){const h={};l=(l.g&&2<=Gn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(b(l[E]))continue;var y=I(l[E]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const k=h[P]||[];h[P]=k,k.push(y)}w(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(l,h,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||h}function Ay(l){this.Aa=0,this.i=[],this.j=new Sa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Na("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Na("baseRetryDelayMs",5e3,l),this.cb=Na("retryDelaySeedMs",1e4,l),this.Wa=Na("forwardChannelMaxRetries",2,l),this.wa=Na("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oy(l&&l.concurrentRequestLimit),this.Da=new QA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ay.prototype,t.la=8,t.G=1,t.connect=function(l,h,y,E){Ot(0),this.W=l,this.H=h||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Vy(this,null,this.W),Yl(this)};function Yd(l){if(Iy(l),l.G==3){var h=l.U++,y=Fn(l.I);if(Ne(y,"SID",l.K),Ne(y,"RID",h),Ne(y,"TYPE","terminate"),Oa(l,y),h=new yr(l,l.j,h),h.L=2,h.v=Hl(Fn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(h.v.toString(),"")}catch{}!y&&o.Image&&(new Image().src=h.v,y=!0),y||(h.g=ky(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ul(h)}Py(l)}function $l(l){l.g&&(Qd(l),l.g.cancel(),l.g=null)}function Iy(l){$l(l),l.u&&(o.clearTimeout(l.u),l.u=null),Kl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Yl(l){if(!ly(l.h)&&!l.s){l.s=!0;var h=l.Ga;q||ae(),G||(q(),G=!0),ie.add(h,l),l.B=0}}function e1(l,h){return cy(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wa(f(l.Ga,l,h),My(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const P=new yr(this,this.j,l);let k=this.o;if(this.S&&(k?(k=v(k),S(k,this.S)):k=this.S),this.m!==null||this.O||(P.H=k,k=null),this.P)e:{for(var h=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=y;break e}if(h===4096||y===this.i.length-1){h=y+1;break e}}h=1e3}else h=1e3;h=Cy(this,P,h),y=Fn(this.I),Ne(y,"RID",l),Ne(y,"CVER",22),this.D&&Ne(y,"X-HTTP-Session-Id",this.D),Oa(this,y),k&&(this.O?h="headers="+encodeURIComponent(String(by(k)))+"&"+h:this.m&&$d(y,this.m,k)),qd(this.h,P),this.Ua&&Ne(y,"TYPE","init"),this.P?(Ne(y,"$req",h),Ne(y,"SID","null"),P.T=!0,zd(P,y,null)):zd(P,y,h),this.G=2}}else this.G==3&&(l?Ry(this,l):this.i.length==0||ly(this.h)||Ry(this))};function Ry(l,h){var y;h?y=h.l:y=l.U++;const E=Fn(l.I);Ne(E,"SID",l.K),Ne(E,"RID",y),Ne(E,"AID",l.T),Oa(l,E),l.m&&l.o&&$d(E,l.m,l.o),y=new yr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Cy(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),qd(l.h,y),zd(y,E,h)}function Oa(l,h){l.H&&V(l.H,function(y,E){Ne(h,E,y)}),l.l&&hy({},function(y,E){Ne(h,E,y)})}function Cy(l,h,y){y=Math.min(l.i.length,y);var E=l.l?f(l.l.Na,l.l,l):null;e:{var P=l.i;let k=-1;for(;;){const F=["count="+y];k==-1?0<y?(k=P[0].g,F.push("ofs="+k)):k=0:F.push("ofs="+k);let Ie=!0;for(let ft=0;ft<y;ft++){let me=P[ft].g;const wt=P[ft].map;if(me-=k,0>me)k=Math.max(0,P[ft].g-100),Ie=!1;else try{WA(wt,F,"req"+me+"_")}catch{E&&E(wt)}}if(Ie){E=F.join("&");break e}}}return l=l.i.splice(0,y),h.D=l,E}function Dy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;q||ae(),G||(q(),G=!0),ie.add(h,l),l.v=0}}function Kd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wa(f(l.Fa,l),My(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wa(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),$l(this),Ny(this))};function Qd(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Ny(l){l.g=new yr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Fn(l.qa);Ne(h,"RID","rpc"),Ne(h,"SID",l.K),Ne(h,"AID",l.T),Ne(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(h,"TO",l.ja),Ne(h,"TYPE","xmlhttp"),Oa(l,h),l.m&&l.o&&$d(h,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Hl(Fn(h)),y.m=null,y.P=!0,iy(y,l)}t.Za=function(){this.C!=null&&(this.C=null,$l(this),Kd(this),Ot(19))};function Kl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Oy(l,h){var y=null;if(l.g==h){Kl(l),Qd(l),l.g=null;var E=2}else if(Gd(l.h,h))y=h.D,uy(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){y=h.m?h.m.length:0,h=Date.now()-h.F;var P=l.B;E=kl(),Nt(E,new ey(E,y)),Yl(l)}else Dy(l);else if(P=h.s,P==3||P==0&&0<h.X||!(E==1&&e1(l,h)||E==2&&Kd(l)))switch(y&&0<y.length&&(h=l.h,h.i=h.i.concat(y)),P){case 1:pi(l,5);break;case 4:pi(l,10);break;case 3:pi(l,6);break;default:pi(l,2)}}}function My(l,h){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*h}function pi(l,h){if(l.j.info("Error code "+h),h==2){var y=f(l.fb,l),E=l.Xa;const P=!E;E=new fi(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Bl(E,"https"),Hl(E),P?YA(E.toString(),y):KA(E.toString(),y)}else Ot(2);l.G=0,l.l&&l.l.sa(h),Py(l),Iy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Py(l){if(l.G=0,l.ka=[],l.l){const h=dy(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function Vy(l,h,y){var E=y instanceof fi?Fn(y):new fi(y);if(E.g!="")h&&(E.g=h+"."+E.g),zl(E,E.s);else{var P=o.location;E=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var k=new fi(null);E&&Bl(k,E),h&&(k.g=h),P&&zl(k,P),y&&(k.l=y),E=k}return y=l.D,h=l.ya,y&&h&&Ne(E,y,h),Ne(E,"VER",l.la),Oa(l,E),E}function ky(l,h,y){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Be(new Fl({eb:y})):new Be(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ly(){}t=Ly.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(l,h){return new qt(l,h)};function qt(l,h){Tt.call(this),this.g=new Ay(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!b(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!b(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Xi(this)}A(qt,Tt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Yd(this.g)},qt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Vd(l),l=y);h.i.push(new LA(h.Ya++,l)),h.G==3&&Yl(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,Yd(this.g),delete this.g,qt.aa.N.call(this)};function jy(l){Ld.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const y in h){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}A(jy,Ld);function Uy(){jd.call(this),this.status=1}A(Uy,jd);function Xi(l){this.g=l}A(Xi,Ly),Xi.prototype.ua=function(){Nt(this.g,"a")},Xi.prototype.ta=function(l){Nt(this.g,new jy(l))},Xi.prototype.sa=function(l){Nt(this.g,new Uy)},Xi.prototype.ra=function(){Nt(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Jw=function(){return new Ql},Zw=function(){return kl()},Xw=di,ap={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ll.NO_ERROR=0,Ll.TIMEOUT=8,Ll.HTTP_ERROR=6,Lc=Ll,ty.COMPLETE="complete",Ww=ty,Wm.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Xa=Wm,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Qw=Be}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Rg("@firebase/firestore");function za(){return ji.logLevel}function Y(t,...e){if(ji.logLevel<=he.DEBUG){const n=e.map(Bg);ji.debug(`Firestore (${ua}): ${t}`,...n)}}function fr(t,...e){if(ji.logLevel<=he.ERROR){const n=e.map(Bg);ji.error(`Firestore (${ua}): ${t}`,...n)}}function qs(t,...e){if(ji.logLevel<=he.WARN){const n=e.map(Bg);ji.warn(`Firestore (${ua}): ${t}`,...n)}}function Bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function Se(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class qN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $N{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new eS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new At(e)}}class YN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new QN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function $s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new nt(0,0))}static max(){return new ne(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Bo{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Bo{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return ZN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new W(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new W(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Fe.fromString(e))}static fromName(e){return new X(Fe.fromString(e).popFirst(5))}static empty(){return new X(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Fe(e.slice()))}}function JN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ni(i,X.empty(),e)}function eO(t){return new ni(t.readTime,t.key,-1)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(ne.min(),X.empty(),-1)}static max(){return new ni(ne.max(),X.empty(),-1)}}function tO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==nO)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function iO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zg.oe=-1;function gd(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function sO(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gt.RED,this.left=i??gt.EMPTY,this.right=s??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fv(this.data.getIterator())}getIteratorFrom(e){return new Fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class Fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new bt(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rS("Invalid base64 string: "+s):s}}(e);return new Et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const aO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(Se(!!t),typeof t=="string"){let e=0;const n=aO.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fg(t){const e=t.mapValue.fields.__previous_value__;return Hg(e)?Fg(e):e}function zo(t){const e=ri(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n,r,i,s,a,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class Ho{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc={mapValue:{}};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hg(t)?4:cO(t)?9007199254740991:lO(t)?10:11:te()}function jn(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ri(i.timestampValue),o=ri(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ui(i.bytesValue).isEqual(Ui(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ye(i.doubleValue),o=Ye(s.doubleValue);return a===o?Au(a)===Au(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return $s(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Hv(a)!==Hv(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!jn(a[c],o[c])))return!1;return!0}(t,e);default:return te()}}function Fo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Ye(s.integerValue||s.doubleValue),c=Ye(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return Gv(t.timestampValue,e.timestampValue);case 4:return Gv(zo(t),zo(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ui(s),c=Ui(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=ye(o[u],c[u]);if(d!==0)return d}return ye(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ye(Ye(s.latitude),Ye(a.latitude));return o!==0?o:ye(Ye(s.longitude),Ye(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,d;const p=s.fields||{},f=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,A=(c=f.value)===null||c===void 0?void 0:c.arrayValue,D=ye(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=A==null?void 0:A.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:qv(m,A)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===gc.mapValue&&a===gc.mapValue)return 0;if(s===gc.mapValue)return 1;if(a===gc.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const f=ye(c[p],d[p]);if(f!==0)return f;const m=Ys(o[c[p]],u[d[p]]);if(m!==0)return m}return ye(c.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function Gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=ri(t),r=ri(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function qv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ys(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function Ks(t){return op(t)}function op(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=op(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${op(n.fields[a])}`;return i+"}"}(t.mapValue):te()}function lp(t){return!!t&&"integerValue"in t}function Gg(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function Yv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function lO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=yt.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=yo(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){da(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fn(yo(this.value))}}function iS(t){const e=[];return da(t.fields,(n,r)=>{const i=new yt([n]);if(jc(r)){const s=iS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new It(e,0,ne.min(),ne.min(),ne.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,ne.min(),ne.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,ne.min(),ne.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.position=e,this.inclusive=n}}function Kv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Ys(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n="asc"){this.field=e,this.dir=n}}function uO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{}class tt extends sS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hO(e,n,r):n==="array-contains"?new gO(e,r):n==="in"?new mO(e,r):n==="not-in"?new yO(e,r):n==="array-contains-any"?new vO(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fO(e,r):new pO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends sS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Un(e,n)}matches(e){return aS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aS(t){return t.op==="and"}function oS(t){return dO(t)&&aS(t)}function dO(t){for(const e of t.filters)if(e instanceof Un)return!1;return!0}function cp(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Ks(t.value);if(oS(t))return t.filters.map(e=>cp(e)).join(",");{const e=t.filters.map(n=>cp(n)).join(",");return`${t.op}(${e})`}}function lS(t,e){return t instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&lS(a,i.filters[o]),!0):!1}(t,e):void te()}function cS(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ks(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(cS).join(" ,")+"}"}(t):"Filter"}class hO extends tt{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class fO extends tt{constructor(e,n){super(e,"in",n),this.keys=uS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pO extends tt{constructor(e,n){super(e,"not-in",n),this.keys=uS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class gO extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gg(n)&&Fo(n.arrayValue,this.value)}}class mO extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fo(this.value.arrayValue,n)}}class yO extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fo(this.value.arrayValue,n)}}class vO extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function Wv(t,e=null,n=[],r=[],i=null,s=null,a=null){return new _O(t,e,n,r,i,s,a)}function qg(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ks(r)).join(",")),e.ue=n}return e.ue}function $g(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qv(t.startAt,e.startAt)&&Qv(t.endAt,e.endAt)}function up(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bO(t,e,n,r,i,s,a,o){return new md(t,e,n,r,i,s,a,o)}function Yg(t){return new md(t)}function Xv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EO(t){return t.collectionGroup!==null}function vo(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new bt(yt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ru(s,r))}),n.has(yt.keyField().canonicalString())||e.ce.push(new Ru(yt.keyField(),r))}return e.ce}function kn(t){const e=re(t);return e.le||(e.le=TO(e,vo(t))),e.le}function TO(t,e){if(t.limitType==="F")return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ru(i.field,s)});const n=t.endAt?new Iu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Iu(t.startAt.position,t.startAt.inclusive):null;return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dp(t,e,n){return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yd(t,e){return $g(kn(t),kn(e))&&t.limitType===e.limitType}function dS(t){return`${qg(kn(t))}|lt:${t.limitType}`}function ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cS(i)).join(", ")}]`),gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ks(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ks(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function vd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of vo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const u=Kv(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,vo(r),i)||r.endAt&&!function(a,o,c){const u=Kv(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,vo(r),i))}(t,e)}function wO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,n)=>{let r=!1;for(const i of vo(t)){const s=SO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function SO(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Ys(c,u):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return nS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=new Ue(X.comparator);function pr(){return xO}const fS=new Ue(X.comparator);function Za(...t){let e=fS;for(const n of t)e=e.insert(n.key,n);return e}function pS(t){let e=fS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ti(){return _o()}function gS(){return _o()}function _o(){return new ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const AO=new Ue(X.comparator),IO=new bt(X.comparator);function de(...t){let e=IO;for(const n of t)e=e.add(n);return e}const RO=new bt(ye);function CO(){return RO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function mS(t){return{integerValue:""+t}}function DO(t,e){return sO(e)?mS(e):Kg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this._=void 0}}function NO(t,e,n){return t instanceof Cu?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hg(s)&&(s=Fg(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Go?vS(t,e):t instanceof qo?_S(t,e):function(i,s){const a=yS(i,s),o=Zv(a)+Zv(i.Pe);return lp(a)&&lp(i.Pe)?mS(o):Kg(i.serializer,o)}(t,e)}function OO(t,e,n){return t instanceof Go?vS(t,e):t instanceof qo?_S(t,e):n}function yS(t,e){return t instanceof Du?function(r){return lp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Cu extends _d{}class Go extends _d{constructor(e){super(),this.elements=e}}function vS(t,e){const n=bS(e);for(const r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class qo extends _d{constructor(e){super(),this.elements=e}}function _S(t,e){let n=bS(e);for(const r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}class Du extends _d{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Zv(t){return Ye(t.integerValue||t.doubleValue)}function bS(t){return Gg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function MO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Go&&i instanceof Go||r instanceof qo&&i instanceof qo?$s(r.elements,i.elements,jn):r instanceof Du&&i instanceof Du?jn(r.Pe,i.Pe):r instanceof Cu&&i instanceof Cu}(t.transform,e.transform)}class PO{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bd{}function ES(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wS(t.key,ar.none()):new xl(t.key,t.data,ar.none());{const n=t.data,r=fn.empty();let i=new bt(yt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Yi(t.key,r,new Tn(i.toArray()),ar.none())}}function VO(t,e,n){t instanceof xl?function(i,s,a){const o=i.value.clone(),c=e_(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Yi?function(i,s,a){if(!Uc(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=e_(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(TS(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof xl?function(s,a,o,c){if(!Uc(s.precondition,a))return o;const u=s.value.clone(),d=t_(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yi?function(s,a,o,c){if(!Uc(s.precondition,a))return o;const u=t_(s.fieldTransforms,c,a),d=a.data;return d.setAll(TS(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,o){return Uc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function kO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=yS(r.transform,i||null);s!=null&&(n===null&&(n=fn.empty()),n.set(r.field,s))}return n||null}function Jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$s(r,i,(s,a)=>MO(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xl extends bd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yi extends bd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e_(t,e,n){const r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,OO(a,o,n[i]))}return r}function t_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,NO(s,a,e))}return r}class wS extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LO extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&VO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gS();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const c=ES(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,r)=>Jv(n,r))&&$s(this.baseMutations,e.baseMutations,(n,r)=>Jv(n,r))}}class Qg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return AO}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Qg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,fe;function zO(t){switch(t){default:return te();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function SS(t){if(t===void 0)return fr("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ke.OK:return B.OK;case Ke.CANCELLED:return B.CANCELLED;case Ke.UNKNOWN:return B.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return B.INTERNAL;case Ke.UNAVAILABLE:return B.UNAVAILABLE;case Ke.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ke.NOT_FOUND:return B.NOT_FOUND;case Ke.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ke.ABORTED:return B.ABORTED;case Ke.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ke.DATA_LOSS:return B.DATA_LOSS;default:return te()}}(fe=Ke||(Ke={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new Di([4294967295,4294967295],0);function n_(t){const e=HO().encode(t),n=new Kw;return n.update(e),new Uint8Array(n.digest())}function r_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([n,r],0),new Di([i,s],0)]}class Wg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ja(`Invalid padding: ${n}`);if(r<0)throw new Ja(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Di.fromNumber(r)));return i.compare(FO)===1&&(i=new Di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=n_(e),[r,i]=r_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Wg(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=n_(e),[r,i]=r_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ed(ne.min(),i,new Ue(ye),pr(),de())}}class Al{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Al(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class xS{constructor(e,n){this.targetId=e,this.me=n}}class AS{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class i_{constructor(){this.fe=0,this.ge=a_(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=a_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GO{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=s_(),this.Qe=new Ue(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(up(s))if(r===0){const a=new X(s.path);this.Ue(n,a,It.newNoDocument(a,ne.min()))}else Se(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Ui(r).toUint8Array()}catch(c){if(c instanceof rS)return qs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Wg(a,i,s)}catch(c){return qs(c instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&up(o.target)){const c=new X(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,It.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Ed(e,n,this.Qe,this.ke,r);return this.ke=pr(),this.qe=s_(),this.Qe=new Ue(ye),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new i_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new bt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new i_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function s_(){return new Ue(X.comparator)}function a_(){return new Ue(X.comparator)}const qO={asc:"ASCENDING",desc:"DESCENDING"},$O={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YO={and:"AND",or:"OR"};class KO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hp(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function Nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QO(t,e){return Nu(t,e.toTimestamp())}function Ln(t){return Se(!!t),ne.fromTimestamp(function(n){const r=ri(n);return new nt(r.seconds,r.nanos)}(t))}function Xg(t,e){return fp(t,e).canonicalString()}function fp(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RS(t){const e=Fe.fromString(t);return Se(MS(e)),e}function pp(t,e){return Xg(t.databaseId,e.path)}function Uh(t,e){const n=RS(e);if(n.get(1)!==t.databaseId.projectId)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(DS(n))}function CS(t,e){return Xg(t.databaseId,e)}function WO(t){const e=RS(t);return e.length===4?Fe.emptyPath():DS(e)}function gp(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DS(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function o_(t,e,n){return{name:pp(t,e),fields:n.value.mapValue.fields}}function XO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Se(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(Se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?B.UNKNOWN:SS(u.code);return new W(d,u.message||"")}(a);n=new AS(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uh(t,r.document.name),s=Ln(r.document.updateTime),a=r.document.createTime?Ln(r.document.createTime):ne.min(),o=new fn({mapValue:{fields:r.document.fields}}),c=It.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Bc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uh(t,r.document),s=r.readTime?Ln(r.readTime):ne.min(),a=It.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Bc([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uh(t,r.document),s=r.removedTargetIds||[];n=new Bc([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new BO(i,s),o=r.targetId;n=new xS(o,a)}}return n}function ZO(t,e){let n;if(e instanceof xl)n={update:o_(t,e.key,e.value)};else if(e instanceof wS)n={delete:pp(t,e.key)};else if(e instanceof Yi)n={update:o_(t,e.key,e.data),updateMask:oM(e.fieldMask)};else{if(!(e instanceof LO))return te();n={verify:pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Cu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Du)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function JO(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Ln(i.updateTime):Ln(s);return a.isEqual(ne.min())&&(a=Ln(s)),new PO(a,i.transformResults||[])}(n,e))):[]}function eM(t,e){return{documents:[CS(t,e.path)]}}function tM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CS(t,i);const s=function(u){if(u.length!==0)return OS(Un.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:as(f.field),direction:iM(f.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=hp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function nM(t){let e=WO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const f=NS(p);return f instanceof Un&&oS(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(f=>function(A){return new Ru(os(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(p){let f;return f=typeof p=="object"?p.value:p,gd(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(p){const f=!!p.before,m=p.values||[];return new Iu(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const f=!p.before,m=p.values||[];return new Iu(m,f)}(n.endAt)),bO(e,i,a,s,o,"F",c,u)}function rM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=os(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=os(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=os(n.unaryFilter.field);return tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=os(n.unaryFilter.field);return tt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>NS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function iM(t){return qO[t]}function sM(t){return $O[t]}function aM(t){return YO[t]}function as(t){return{fieldPath:t.canonicalString()}}function os(t){return yt.fromServerFormat(t.fieldPath)}function OS(t){return t instanceof tt?function(n){if(n.op==="=="){if(Yv(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yv(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:sM(n.op),value:n.value}}}(t):t instanceof Un?function(n){const r=n.getFilters().map(i=>OS(i));return r.length===1?r[0]:{compositeFilter:{op:aM(n.op),filters:r}}}(t):te()}function oM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,i,s=ne.min(),a=ne.min(),o=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.ct=e}}function cM(t){const e=nM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.un=new dM}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ni.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class dM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new bt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qs(0)}static kn(){return new Qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.changes=new ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bo(r.mutation,i,Tn.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Za();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=pr();const a=_o(),o=function(){return _o()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Yi)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),bo(d.mutation,u,d.mutation.getFieldMask(),nt.now())):a.set(u.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var p;return o.set(u,new fM(d,(p=a.get(u))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=_o();let i=new Ue((a,o)=>a-o),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Tn.empty();d=o.applyToLocalView(u,d),r.set(c,d);const p=(i.get(o.batchId)||de()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,p=gS();d.forEach(f=>{if(!s.has(f)){const m=ES(n.get(f),r.get(f));m!==null&&p.set(f,m),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Ti());let o=-1,c=s;return a.next(u=>U.forEach(u,(d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,de())).next(d=>({batchId:o,changes:pS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=Za();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Za();return this.indexManager.getCollectionParents(e,s).next(o=>U.forEach(o,c=>{const u=function(p,f){return new md(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,f)=>{a=a.insert(p,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,It.newInvalidDocument(d)))});let o=Za();return a.forEach((c,u)=>{const d=s.get(c);d!==void 0&&bo(d.mutation,u,Tn.empty(),nt.now()),vd(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:cM(i.bundledQuery),readTime:Ln(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.overlays=new Ue(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ti();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Ti(),s=n.length+1,a=new X(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Ti(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Ti(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return U.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new UO(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.Tr=new bt(at.Er),this.dr=new bt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Fe([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Fe([])),r=new at(n,e),i=new at(n,e+1);let s=de();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new at(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new bt(at.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jO(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new at(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bt(ye);return n.forEach(i=>{const s=new at(i,0),a=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const a=new at(new X(s),0);let o=new bt(ye);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),U.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new at(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.Mr=e,this.docs=function(){return new Ue(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=pr();const a=n.path,o=new X(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||tO(eO(d),r)<=0||(i.has(d.key)||vd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bM(this)}getSize(e){return U.resolve(this.size)}}class bM extends hM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.persistence=e,this.Nr=new ha(n=>qg(n),$g),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zg,this.targetCount=0,this.kr=Qs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zg(0),this.Kr=!1,this.Kr=!0,this.$r=new yM,this.referenceDelegate=e(this),this.Ur=new EM(this),this.indexManager=new uM,this.remoteDocumentCache=function(i){return new _M(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lM(n),this.Gr=new gM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new wM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class wM extends rO{constructor(e){super(),this.currentSequenceNumber=e}}class Jg{constructor(e){this.persistence=e,this.Jr=new Zg,this.Yr=null}static Zr(e){return new Jg(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=X.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new em(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return p2()?8:iO(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new SM;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(za()<=he.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(za()<=he.DEBUG&&Y("QueryEngine","Query:",ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(za()<=he.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):U.resolve())}Yi(e,n){if(Xv(n))return U.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dp(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=de(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,o);return this.ns(n,u,a,c.readTime)?this.Yi(e,dp(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return Xv(n)||i.isEqual(ne.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?U.resolve(null):(za()<=he.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ss(n)),this.rs(e,a,n,JN(i,-1)).next(o=>o))})}ts(e,n){let r=new bt(hS(e));return n.forEach((i,s)=>{vd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return za()<=he.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,ni.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(ye),this._s=new ha(s=>qg(s),$g),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function IM(t,e,n,r){return new AM(t,e,n,r)}async function PS(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=de();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function RM(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const p=u.batch,f=p.keys();let m=U.resolve();return f.forEach(A=>{m=m.next(()=>d.getEntry(c,A)).next(D=>{const R=u.docVersions.get(A);Se(R!==null),D.version.compareTo(R)<0&&(p.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),d.addEntry(D)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=de();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function VS(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CM(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,p)=>{const f=i.get(p);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Et.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(p,m),function(D,R,_){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&o.push(n.Ur.updateTargetData(s,m))});let c=pr(),u=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(DM(s,a,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(ne.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return U.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.os=i,s))}function DM(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=pr();return n.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Y("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function NM(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OM(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new jr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function mp(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Sl(a))throw a;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function l_(t,e,n){const r=re(t);let i=ne.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const p=re(c),f=p._s.get(d);return f!==void 0?U.resolve(p.os.get(f)):p.Ur.getTargetData(u,d)}(r,a,kn(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:ne.min(),n?s:de())).next(o=>(MM(r,wO(e),o),{documents:o,Ts:s})))}function MM(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class c_{constructor(){this.activeTargetIds=CO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PM{constructor(){this.so=new c_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new c_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Bh(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class jM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=Bh(),c=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,c,u,i).then(d=>(Y("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw qs("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=kM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Bh();return new Promise((a,o)=>{const c=new Qw;c.setWithCredentials(!0),c.listenOnce(Ww.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lc.NO_ERROR:const d=c.getResponseJson();Y(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Lc.TIMEOUT:Y(xt,`RPC '${e}' ${s} timed out`),o(new W(B.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const p=c.getStatus();if(Y(xt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const A=function(R){const _=R.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(m.status);o(new W(A,m.message))}else o(new W(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new W(B.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Y(xt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Y(xt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Bh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Jw(),o=Zw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");Y(xt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=a.createWebChannel(d,c);let f=!1,m=!1;const A=new LM({Io:R=>{m?Y(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(f||(Y(xt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),f=!0),Y(xt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),D=(R,_,b)=>{R.listen(_,T=>{try{b(T)}catch(N){setTimeout(()=>{throw N},0)}})};return D(p,Xa.EventType.OPEN,()=>{m||(Y(xt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),D(p,Xa.EventType.CLOSE,()=>{m||(m=!0,Y(xt,`RPC '${e}' stream ${i} transport closed`),A.So())}),D(p,Xa.EventType.ERROR,R=>{m||(m=!0,qs(xt,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new W(B.UNAVAILABLE,"The operation could not be completed")))}),D(p,Xa.EventType.MESSAGE,R=>{var _;if(!m){const b=R.data[0];Se(!!b);const T=b,N=T.error||((_=T[0])===null||_===void 0?void 0:_.error);if(N){Y(xt,`RPC '${e}' stream ${i} received error:`,N);const M=N.status;let V=function(x){const S=Ke[x];if(S!==void 0)return SS(S)}(M),w=N.message;V===void 0&&(V=B.INTERNAL,w="Unknown error status: "+M+" with message "+N.message),m=!0,A.So(new W(V,w)),p.close()}else Y(xt,`RPC '${e}' stream ${i} received:`,b),A.bo(b)}}),D(o,Xw.STAT_EVENT,R=>{R.stat===ap.PROXY?Y(xt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ap.NOPROXY&&Y(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return new KO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,r,i,s,a,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new W(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UM extends LS{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XO(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?Ln(a.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gp(this.serializer),n.addTarget=function(s,a){let o;const c=a.target;if(o=up(c)?{documents:eM(s,c)}:{query:tM(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=IS(s,a.resumeToken);const u=hp(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(ne.min())>0){o.readTime=Nu(s,a.snapshotVersion.toTimestamp());const u=hp(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=rM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gp(this.serializer),n.removeTarget=e,this.a_(n)}}class BM extends LS{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=JO(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZO(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,fp(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,fp(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(B.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ki(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=re(c);u.L_.add(4),await Il(u),u.q_.set("Unknown"),u.L_.delete(4),await wd(u)}(this))})}),this.q_=new HM(r,i)}}async function wd(t){if(Ki(t))for(const e of t.B_)await e(!0)}async function Il(t){for(const e of t.B_)await e(!1)}function jS(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),im(n)?rm(n):fa(n).r_()&&nm(n,e))}function tm(t,e){const n=re(t),r=fa(n);n.N_.delete(e),r.r_()&&US(n,e),n.N_.size===0&&(r.r_()?r.o_():Ki(n)&&n.q_.set("Unknown"))}function nm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fa(t).A_(e)}function US(t,e){t.Q_.xe(e),fa(t).R_(e)}function rm(t){t.Q_=new GO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.q_.v_()}function im(t){return Ki(t)&&!fa(t).n_()&&t.N_.size>0}function Ki(t){return re(t).L_.size===0}function BS(t){t.Q_=void 0}async function GM(t){t.q_.set("Online")}async function qM(t){t.N_.forEach((e,n)=>{nm(t,e)})}async function $M(t,e){BS(t),im(t)?(t.q_.M_(e),rm(t)):t.q_.set("Unknown")}async function YM(t,e,n){if(t.q_.set("Online"),e instanceof AS&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ou(t,r)}else if(e instanceof Bc?t.Q_.Ke(e):e instanceof xS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await VS(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),US(s,c);const p=new jr(d.target,c,u,d.sequenceNumber);nm(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Ou(t,r)}}async function Ou(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await Il(t),t.q_.set("Offline"),n||(n=()=>VS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wd(t)})}function zS(t,e){return e().catch(n=>Ou(t,n,e))}async function Sd(t){const e=re(t),n=ii(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KM(e);)try{const i=await NM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,QM(e,i)}catch(i){await Ou(e,i)}HS(e)&&FS(e)}function KM(t){return Ki(t)&&t.O_.length<10}function QM(t,e){t.O_.push(e);const n=ii(t);n.r_()&&n.V_&&n.m_(e.mutations)}function HS(t){return Ki(t)&&!ii(t).n_()&&t.O_.length>0}function FS(t){ii(t).start()}async function WM(t){ii(t).p_()}async function XM(t){const e=ii(t);for(const n of t.O_)e.m_(n.mutations)}async function ZM(t,e,n){const r=t.O_.shift(),i=Qg.from(r,e,n);await zS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sd(t)}async function JM(t,e){e&&ii(t).V_&&await async function(r,i){if(function(a){return zO(a)&&a!==B.ABORTED}(i.code)){const s=r.O_.shift();ii(r).s_(),await zS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sd(r)}}(t,e),HS(t)&&FS(t)}async function d_(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Ki(n);n.L_.add(3),await Il(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wd(n)}async function e4(t,e){const n=re(t);e?(n.L_.delete(2),await wd(n)):e||(n.L_.add(2),await Il(n),n.q_.set("Unknown"))}function fa(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new UM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:GM.bind(null,t),Ro:qM.bind(null,t),mo:$M.bind(null,t),d_:YM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),im(t)?rm(t):t.q_.set("Unknown")):(await t.K_.stop(),BS(t))})),t.K_}function ii(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new BM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WM.bind(null,t),mo:JM.bind(null,t),f_:XM.bind(null,t),g_:ZM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sd(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new sm(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Sl(t))return new W(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Za(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Os(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.W_=new Ue(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ws{constructor(e,n,r,i,s,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ws(e,n,Os.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class n4{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=f_(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(r)})})(this,new W(B.ABORTED,"Firestore shutting down"))}}function f_(){return new ha(t=>dS(t),yd)}async function r4(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new t4,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=am(a,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&om(n)}async function i4(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s4(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&om(n)}function a4(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function om(t){t.Y_.forEach(e=>{e.next()})}var yp,p_;(p_=yp||(yp={})).ea="default",p_.Cache="cache";class o4{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.key=e}}class qS{constructor(e){this.key=e}}class l4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=hS(e),this.Ra=new Os(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const f=i.get(d),m=vd(this.query,p)?p:null,A=!!f&&this.mutatedKeys.has(f.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let R=!1;f&&m?f.data.isEqual(m.data)?A!==D&&(r.track({type:3,doc:m}),R=!0):this.ga(f,m)||(r.track({type:2,doc:m}),R=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),R=!0):f&&!m&&(r.track({type:1,doc:f}),R=!0,(c||u)&&(o=!0)),R&&(m?(a=a.add(m),s=D?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,p)=>function(m,A){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return D(m)-D(A)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new Ws(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new qS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new GS(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class c4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class u4{constructor(e){this.key=e,this.va=!1}}class d4{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new ha(o=>dS(o),yd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(X.comparator),this.Na=new Map,this.La=new Zg,this.Ba={},this.ka=new Map,this.qa=Qs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function h4(t,e,n=!0){const r=XS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await $S(r,e,n,!0),i}async function f4(t,e){const n=XS(t);await $S(n,e,!0,!1)}async function $S(t,e,n,r){const i=await OM(t.localStore,kn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await p4(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&jS(t.remoteStore,i),o}async function p4(t,e,n,r,i){t.Ka=(p,f,m)=>async function(D,R,_,b){let T=R.view.ma(_);T.ns&&(T=await l_(D.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,T)));const N=b&&b.targetChanges.get(R.targetId),M=b&&b.targetMismatches.get(R.targetId)!=null,V=R.view.applyChanges(T,D.isPrimaryClient,N,M);return m_(D,R.targetId,V.wa),V.snapshot}(t,p,f,m);const s=await l_(t.localStore,e,!0),a=new l4(e,s.Ts),o=a.ma(s.documents),c=Al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,c);m_(t,n,u.wa);const d=new c4(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function g4(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!yd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tm(r.remoteStore,i.targetId),vp(r,i.targetId)}).catch(wl)):(vp(r,i.targetId),await mp(r.localStore,i.targetId,!0))}async function m4(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tm(n.remoteStore,r.targetId))}async function y4(t,e,n){const r=S4(t);try{const i=await function(a,o){const c=re(a),u=nt.now(),d=o.reduce((m,A)=>m.add(A.key),de());let p,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let A=pr(),D=de();return c.cs.getEntries(m,d).next(R=>{A=R,A.forEach((_,b)=>{b.isValidDocument()||(D=D.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,A)).next(R=>{p=R;const _=[];for(const b of o){const T=kO(b,p.get(b.key).overlayedDocument);T!=null&&_.push(new Yi(b.key,T,iS(T.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,_,o)}).next(R=>{f=R;const _=R.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(m,R.batchId,_)})}).then(()=>({batchId:f.batchId,changes:pS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Ue(ye)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await Rl(r,i.changes),await Sd(r.remoteStore)}catch(i){const s=am(i,"Failed to persist write");n.reject(s)}}async function YS(t,e){const n=re(t);try{const r=await CM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Se(a.va):i.removedDocuments.size>0&&(Se(a.va),a.va=!1))}),await Rl(n,r,e)}catch(r){await wl(r)}}function g_(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=re(a);c.onlineState=o;let u=!1;c.queries.forEach((d,p)=>{for(const f of p.j_)f.Z_(o)&&(u=!0)}),u&&om(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function v4(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ue(X.comparator);a=a.insert(s,It.newNoDocument(s,ne.min()));const o=de().add(s),c=new Ed(ne.min(),new Map,new Ue(ye),a,o);await YS(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),lm(r)}else await mp(r.localStore,e,!1).then(()=>vp(r,e,n)).catch(wl)}async function _4(t,e){const n=re(t),r=e.batch.batchId;try{const i=await RM(n.localStore,e);QS(n,r,null),KS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,i)}catch(i){await wl(i)}}async function b4(t,e,n){const r=re(t);try{const i=await function(a,o){const c=re(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(p=>(Se(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);QS(r,e,n),KS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,i)}catch(i){await wl(i)}}function KS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function QS(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||WS(t,r)})}function WS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(tm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),lm(t))}function m_(t,e,n){for(const r of n)r instanceof GS?(t.La.addReference(r.key,e),E4(t,r)):r instanceof qS?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||WS(t,r.key)):te()}function E4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),lm(t))}function lm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new u4(n)),t.Oa=t.Oa.insert(n,r),jS(t.remoteStore,new jr(kn(Yg(n.path)),r,"TargetPurposeLimboResolution",zg.oe))}}async function Rl(t,e,n){const r=re(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{a.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);const p=em.Wi(c.targetId,u);s.push(p)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const d=re(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,f=>U.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(p,f.targetId,m)).next(()=>U.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(p,f.targetId,m)))))}catch(p){if(!Sl(p))throw p;Y("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const f=p.targetId;if(!p.fromCache){const m=d.os.get(f),A=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(A);d.os=d.os.insert(f,D)}}}(r.localStore,s))}async function T4(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await PS(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new W(B.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.hs)}}function w4(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function XS(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v4.bind(null,e),e.Ca.d_=s4.bind(null,e.eventManager),e.Ca.$a=a4.bind(null,e.eventManager),e}function S4(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return IM(this.persistence,new xM,e.initialUser,this.serializer)}Ga(e){return new TM(Jg.Zr,this.serializer)}Wa(e){return new PM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class _p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T4.bind(null,this.syncEngine),await e4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n4}()}createDatastore(e){const n=Td(e.databaseInfo.databaseId),r=function(s){return new jM(s)}(e.databaseInfo);return function(s,a,o,c){return new zM(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new FM(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return u_.D()?new u_:new VM}())}createSyncEngine(e,n){return function(i,s,a,o,c,u,d){const p=new d4(i,s,a,o,c,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Il(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_p.provider={build:()=>new _p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=tS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Y("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=am(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hh(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await PS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I4(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>d_(e.remoteStore,i)),t._onlineComponents=e}async function I4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await Hh(t,new Mu)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Hh(t,new Mu);return t._offlineComponents}async function ZS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await y_(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await y_(t,new _p))),t._onlineComponents}function R4(t){return ZS(t).then(e=>e.syncEngine)}async function C4(t){const e=await ZS(t),n=e.eventManager;return n.onListen=h4.bind(null,e.syncEngine),n.onUnlisten=g4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=f4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=m4.bind(null,e.syncEngine),n}function D4(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const d=new x4({next:f=>{d.Za(),a.enqueueAndForget(()=>i4(s,p));const m=f.docs.has(o);!m&&f.fromCache?u.reject(new W(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new W(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),p=new o4(Yg(o.path),d,{includeMetadataChanges:!0,_a:!0});return r4(s,p)}(await C4(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e,n){if(!n)throw new W(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O4(t,e,n,r){if(e===!0&&r===!0)throw new W(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function __(t){if(!X.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function $o(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cm(t);throw new W(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class um{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GN;switch(r.type){case"firstParty":return new KN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v_.get(n);r&&(Y("ComponentProvider","Removing Datastore"),v_.delete(n),r.terminate())}(this),Promise.resolve()}}function M4(t,e,n,r={}){var i;const s=(t=$o(t,um))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,c;if(typeof r.mockUserToken=="string")o=r.mockUserToken,c=At.MOCK_USER;else{o=o2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new W(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new At(u)}t._authCredentials=new qN(new eS(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dm(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Yo extends dm{constructor(e,n,r){super(e,n,Yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new X(e))}withConverter(e){return new Yo(this.firestore,e,this._path)}}function hm(t,e,...n){if(t=sn(t),arguments.length===1&&(e=tS.newId()),N4("doc","path",e),t instanceof um){const r=Fe.fromString(e,...n);return __(r),new mn(t,null,new X(r))}{if(!(t instanceof mn||t instanceof Yo))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return __(r),new mn(t.firestore,t instanceof Yo?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kS(this,"async_queue_retry"),this.Vu=()=>{const r=zh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=sm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class fm extends um{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new E_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function P4(t,e){const n=typeof t=="object"?t:dw(),r=typeof t=="string"?t:"(default)",i=Dg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=s2("firestore");s&&M4(i,...s)}return i}function ex(t){if(t._terminated)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V4(t),t._firestoreClient}function V4(t){var e,n,r;const i=t._freezeSettings(),s=function(o,c,u,d){return new oO(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,JS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new A4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(Et.fromBase64String(e))}catch(n){throw new W(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xs(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=/^__.*__$/;class L4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new xl(e,this.data,n,this.fieldTransforms)}}function nx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class ym{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ym(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nx(this.Cu)&&k4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class j4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Td(e)}Qu(e,n,r,i=!1){return new ym({Cu:e,methodName:n,qu:r,path:yt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U4(t){const e=t._freezeSettings(),n=Td(t._databaseId);return new j4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function B4(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);ax("Data must be an object, but it was:",a,r);const o=ix(r,a);let c,u;if(s.merge)c=new Tn(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const f=z4(e,p,n);if(!a.contains(f))throw new W(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);F4(d,f)||d.push(f)}c=new Tn(d),u=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=a.fieldTransforms;return new L4(new fn(o),c,u)}function rx(t,e){if(sx(t=sn(t)))return ax("Unsupported field value:",e,t),ix(t,e);if(t instanceof tx)return function(r,i){if(!nx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=rx(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:Nu(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nu(i.serializer,s)}}if(r instanceof gm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:IS(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mm)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return Kg(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cm(r)}`)}(t,e)}function ix(t,e){const n={};return nS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(r,i)=>{const s=rx(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof gm||t instanceof Xs||t instanceof mn||t instanceof tx||t instanceof mm)}function ax(t,e,n){if(!sx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function z4(t,e,n){if((e=sn(e))instanceof pm)return e._internalPath;if(typeof e=="string")return ox(t,e);throw Pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const H4=new RegExp("[~\\*/\\[\\]]");function ox(t,e,n){if(e.search(H4)>=0)throw Pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pm(...e.split("."))._internalPath}catch{throw Pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pu(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new W(B.INVALID_ARGUMENT,o+t+c)}function F4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G4 extends lx{data(){return super.data()}}function cx(t,e){return typeof e=="string"?ox(t,e):e instanceof pm?e._internalPath:e._delegate._internalPath}class q4{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return da(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ye(a.doubleValue));return new mm(s)}convertGeoPoint(e){return new gm(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=ri(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Se(MS(r));const i=new Ho(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ux extends lx{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new K4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class K4 extends ux{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){t=$o(t,mn);const e=$o(t.firestore,fm);return D4(ex(e),t._key).then(n=>Z4(e,t,n))}class W4 extends q4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function dx(t,e,n){t=$o(t,mn);const r=$o(t.firestore,fm),i=$4(t.converter,e);return X4(r,[B4(U4(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ar.none())])}function X4(t,e){return function(r,i){const s=new Wr;return r.asyncQueue.enqueueAndForget(async()=>y4(await R4(r),i,s)),s.promise}(ex(t),e)}function Z4(t,e,n){const r=n.docs.get(e._key),i=new W4(t);return new ux(t,i,e._key,r,new Y4(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ua=i})(la),Gs(new Vi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new fm(new $N(r.getProvider("auth-internal")),new WN(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Qr(zv,"4.7.3",e),Qr(zv,"4.7.3","esm2017")})();var J4="firebase",eP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(J4,eP,"app");const tP={apiKey:"AIzaSyD_t9Kaj9eOjISp33Wqj_k9YqZETb21vBw",authDomain:"trainer-crm-be9ea.firebaseapp.com",projectId:"trainer-crm-be9ea",storageBucket:"trainer-crm-be9ea.firebasestorage.app",messagingSenderId:"499615107271",appId:"1:499615107271:web:370531703a115d4daa96e2",measurementId:"G-1Y9Q2S7GRZ"},hx=uw(tP),Vu=HN(hx),vm=P4(hx),nP=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[i,s]=L.useState(!0),[a,o]=L.useState(""),c=async u=>{u.preventDefault(),o("");try{if(i)await ID(Vu,t,n);else{const p=(await AD(Vu,t,n)).user,f={blocks:[{id:0,name:" ",cost:0,trainingCount:0},{id:1,name:" 10 ",cost:25e3,trainingCount:10},{id:2,name:" 8 ",cost:2e4,trainingCount:8},{id:3,name:" 5 ",cost:14e3,trainingCount:5},{id:4,name:"",cost:3e3,trainingCount:1}],participants:[],attendance:{},rentAmount:5e4};await dx(hm(vm,"users",p.uid),f)}}catch(d){o(d.message)}};return g.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:g.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-lg shadow-lg border border-gray-700",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white",children:i?"  VisitFlow":"  VisitFlow"}),g.jsxs("form",{onSubmit:c,className:"space-y-6",children:[g.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),placeholder:"Email",className:"w-full px-4 py-2 text-gray-300 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 border border-gray-600",required:!0}),g.jsx("input",{type:"password",value:n,onChange:u=>r(u.target.value),placeholder:"",className:"w-full px-4 py-2 text-gray-300 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 border border-gray-600",required:!0}),g.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-orange-500 rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50 transition-colors",children:i?"":""}),a&&g.jsx("p",{className:"text-sm text-center text-red-500",children:a})]}),g.jsxs("p",{className:"text-sm text-center text-gray-300",children:[i?" ?":"  ?",g.jsx("button",{onClick:()=>s(!i),className:"ml-1 font-bold text-orange-400 hover:underline",children:i?"":""})]})]})})},T_=({participants:t,blocks:e,attendance:n,selectedDate:r,rentAmount:i})=>{const s=r.getFullYear(),a=r.getMonth(),o=Object.keys(n).filter(p=>{const f=p.split("-");if(f.length!==4)return!1;const m=parseInt(f[0],10),A=parseInt(f[1],10),D=parseInt(f[2],10),R=t.some(_=>_.id===m);return n[p]===!0&&A===s&&D===a&&R}).length,c=typeof i=="number"&&i>0?i:5e4,d=t.reduce((p,f)=>{const A=(f.payments||[]).filter(D=>{const R=new Date(D.paymentDate);return R.getFullYear()===s&&R.getMonth()===a}).reduce((D,R)=>{const _=e.find(T=>T.id===R.blockId),b=R.costSnapshot!==void 0?R.costSnapshot:_?_.cost:0;return D+b},0);return p+A},0)-c;return g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-baseline space-x-2 mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:""}),g.jsxs("span",{className:"text-lg text-gray-400",children:["(",r.toLocaleString("ru-RU",{month:"long",year:"numeric"}),")"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" "}),g.jsx("p",{className:"text-4xl font-bold text-orange-500 mt-2",children:t.filter(p=>!p.isArchived).length})]}),g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" "}),g.jsx("p",{className:"text-4xl font-bold text-orange-500 mt-2",children:o})]}),g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" ()"}),g.jsxs("p",{className:`text-4xl font-bold mt-2 ${d>=0?"text-green-500":"text-red-500"}`,children:[d.toLocaleString("ru-RU")," "]})]})]})]})};function Pt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var rP=typeof Symbol=="function"&&Symbol.observable||"@@observable",w_=rP,S_=()=>Math.random().toString(36).substring(7).split("").join("."),iP={INIT:`@@redux/INIT${S_()}`,REPLACE:`@@redux/REPLACE${S_()}`},x_=iP;function sP(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function fx(t,e,n){if(typeof t!="function")throw new Error(Pt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pt(1));return n(fx)(t,e)}let r=t,i=e,s=new Map,a=s,o=0,c=!1;function u(){a===s&&(a=new Map,s.forEach((R,_)=>{a.set(_,R)}))}function d(){if(c)throw new Error(Pt(3));return i}function p(R){if(typeof R!="function")throw new Error(Pt(4));if(c)throw new Error(Pt(5));let _=!0;u();const b=o++;return a.set(b,R),function(){if(_){if(c)throw new Error(Pt(6));_=!1,u(),a.delete(b),s=null}}}function f(R){if(!sP(R))throw new Error(Pt(7));if(typeof R.type>"u")throw new Error(Pt(8));if(typeof R.type!="string")throw new Error(Pt(17));if(c)throw new Error(Pt(9));try{c=!0,i=r(i,R)}finally{c=!1}return(s=a).forEach(b=>{b()}),R}function m(R){if(typeof R!="function")throw new Error(Pt(10));r=R,f({type:x_.REPLACE})}function A(){const R=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Pt(11));function b(){const N=_;N.next&&N.next(d())}return b(),{unsubscribe:R(b)}},[w_](){return this}}}return f({type:x_.INIT}),{dispatch:f,subscribe:p,getState:d,replaceReducer:m,[w_]:A}}function A_(t,e){return function(...n){return e(t.apply(this,n))}}function I_(t,e){if(typeof t=="function")return A_(t,e);if(typeof t!="object"||t===null)throw new Error(Pt(16));const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=A_(i,e))}return n}function px(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function aP(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Pt(15))};const a={getState:i.getState,dispatch:(c,...u)=>s(c,...u)},o=t.map(c=>c(a));return s=px(...o)(i.dispatch),{...i,dispatch:s}}}var oP={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=L;function lP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cP=typeof Object.is=="function"?Object.is:lP,uP=Cl.useSyncExternalStore,dP=Cl.useRef,hP=Cl.useEffect,fP=Cl.useMemo,pP=Cl.useDebugValue;oP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=dP(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=fP(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&a.hasValue){var A=a.value;if(i(A,m))return p=A}return p=m}if(A=p,cP(d,m))return A;var D=r(m);return i!==void 0&&i(A,D)?(d=m,A):(d=m,p=D)}var u=!1,d,p,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,r,i]);var o=uP(t,s[0],s[1]);return hP(function(){a.hasValue=!0,a.value=o},[o]),pP(o),o};var gP=L.version.startsWith("19"),mP=Symbol.for(gP?"react.transitional.element":"react.element"),yP=Symbol.for("react.portal"),vP=Symbol.for("react.fragment"),_P=Symbol.for("react.strict_mode"),bP=Symbol.for("react.profiler"),EP=Symbol.for("react.consumer"),TP=Symbol.for("react.context"),gx=Symbol.for("react.forward_ref"),wP=Symbol.for("react.suspense"),SP=Symbol.for("react.suspense_list"),_m=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),AP=gx,IP=_m;function RP(t){if(typeof t=="object"&&t!==null){const{$$typeof:e}=t;switch(e){case mP:switch(t=t.type,t){case vP:case bP:case _P:case wP:case SP:return t;default:switch(t=t&&t.$$typeof,t){case TP:case gx:case xP:case _m:return t;case EP:return t;default:return e}}case yP:return e}}}function CP(t){return RP(t)===_m}function DP(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:a}){let o=!1,c,u,d,p,f;function m(b,T){return c=b,u=T,d=t(c,u),p=e(r,u),f=n(d,p,u),o=!0,f}function A(){return d=t(c,u),e.dependsOnOwnProps&&(p=e(r,u)),f=n(d,p,u),f}function D(){return t.dependsOnOwnProps&&(d=t(c,u)),e.dependsOnOwnProps&&(p=e(r,u)),f=n(d,p,u),f}function R(){const b=t(c,u),T=!a(b,d);return d=b,T&&(f=n(d,p,u)),f}function _(b,T){const N=!s(T,u),M=!i(b,c,T,u);return c=b,u=T,N&&M?A():N?D():M?R():f}return function(T,N){return o?_(T,N):m(T,N)}}function NP(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=e(t,i),a=n(t,i),o=r(t,i);return DP(s,a,o,t,i)}function OP(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function bp(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function R_(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function mx(t,e){return function(r,{displayName:i}){const s=function(o,c){return s.dependsOnOwnProps?s.mapToProps(o,c):s.mapToProps(o,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(o,c){s.mapToProps=t,s.dependsOnOwnProps=R_(t);let u=s(o,c);return typeof u=="function"&&(s.mapToProps=u,s.dependsOnOwnProps=R_(u),u=s(o,c)),u},s}}function bm(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function MP(t){return t&&typeof t=="object"?bp(e=>OP(t,e)):t?typeof t=="function"?mx(t):bm(t,"mapDispatchToProps"):bp(e=>({dispatch:e}))}function PP(t){return t?typeof t=="function"?mx(t):bm(t,"mapStateToProps"):bp(()=>({}))}function VP(t,e,n){return{...n,...t,...e}}function kP(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,a;return function(c,u,d){const p=t(c,u,d);return s?i(p,a)||(a=p):(s=!0,a=p),a}}}function LP(t){return t?typeof t=="function"?kP(t):bm(t,"mergeProps"):()=>VP}function jP(t){t()}function UP(){let t=null,e=null;return{clear(){t=null,e=null},notify(){jP(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var C_={notify(){},get:()=>[]};function yx(t,e){let n,r=C_,i=0,s=!1;function a(D){d();const R=r.subscribe(D);let _=!1;return()=>{_||(_=!0,R(),p())}}function o(){r.notify()}function c(){A.onStateChange&&A.onStateChange()}function u(){return s}function d(){i++,n||(n=e?e.addNestedSub(c):t.subscribe(c),r=UP())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=C_)}function f(){s||(s=!0,d())}function m(){s&&(s=!1,p())}const A={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return A}var BP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zP=BP(),HP=()=>typeof navigator<"u"&&navigator.product==="ReactNative",FP=HP(),GP=()=>zP||FP?L.useLayoutEffect:L.useEffect,ku=GP();function D_(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Fh(t,e){if(D_(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!D_(t[n[i]],e[n[i]]))return!1;return!0}var qP={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$P={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},YP={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KP={[AP]:YP,[IP]:vx};function N_(t){return CP(t)?vx:KP[t.$$typeof]||qP}var QP=Object.defineProperty,WP=Object.getOwnPropertyNames,O_=Object.getOwnPropertySymbols,XP=Object.getOwnPropertyDescriptor,ZP=Object.getPrototypeOf,M_=Object.prototype;function Ep(t,e){if(typeof e!="string"){if(M_){const s=ZP(e);s&&s!==M_&&Ep(t,s)}let n=WP(e);O_&&(n=n.concat(O_(e)));const r=N_(t),i=N_(e);for(let s=0;s<n.length;++s){const a=n[s];if(!$P[a]&&!(i&&i[a])&&!(r&&r[a])){const o=XP(e,a);try{QP(t,a,o)}catch{}}}}return t}var Gh=Symbol.for("react-redux-context"),qh=typeof globalThis<"u"?globalThis:{};function JP(){if(!L.createContext)return{};const t=qh[Gh]??(qh[Gh]=new Map);let e=t.get(L.createContext);return e||(e=L.createContext(null),t.set(L.createContext,e)),e}var _x=JP(),eV=[null,null];function tV(t,e,n){ku(()=>t(...e),n)}function nV(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function rV(t,e,n,r,i,s,a,o,c,u,d){if(!t)return()=>{};let p=!1,f=null;const m=()=>{if(p||!o.current)return;const D=e.getState();let R,_;try{R=r(D,i.current)}catch(b){_=b,f=b}_||(f=null),R===s.current?a.current||u():(s.current=R,c.current=R,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function iV(t,e){return t===e}function sV(t,e,n,{pure:r,areStatesEqual:i=iV,areOwnPropsEqual:s=Fh,areStatePropsEqual:a=Fh,areMergedPropsEqual:o=Fh,forwardRef:c=!1,context:u=_x}={}){const d=u,p=PP(t),f=MP(e),m=LP(n),A=!!t;return R=>{const _=R.displayName||R.name||"Component",b=`Connect(${_})`,T={shouldHandleStateChanges:A,displayName:b,wrappedComponentName:_,WrappedComponent:R,initMapStateToProps:p,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:i,areStatePropsEqual:a,areOwnPropsEqual:s,areMergedPropsEqual:o};function N(w){const[v,x,S]=L.useMemo(()=>{const{reactReduxForwardedRef:Ce,...Gt}=w;return[w.context,Ce,Gt]},[w]),I=L.useMemo(()=>{let Ce=d;return v!=null&&v.Consumer,Ce},[v,d]),O=L.useContext(I),C=!!w.store&&!!w.store.getState&&!!w.store.dispatch,ee=!!O&&!!O.store,$=C?w.store:O.store,z=ee?O.getServerState:$.getState,q=L.useMemo(()=>NP($.dispatch,T),[$]),[G,ie]=L.useMemo(()=>{if(!A)return eV;const Ce=yx($,C?void 0:O.subscription),Gt=Ce.notifyNestedSubs.bind(Ce);return[Ce,Gt]},[$,C,O]),ae=L.useMemo(()=>C?O:{...O,subscription:G},[C,O,G]),it=L.useRef(void 0),Xe=L.useRef(S),Ee=L.useRef(void 0),jt=L.useRef(!1),Ze=L.useRef(!1),Q=L.useRef(void 0);ku(()=>(Ze.current=!0,()=>{Ze.current=!1}),[]);const se=L.useMemo(()=>()=>Ee.current&&S===Xe.current?Ee.current:q($.getState(),S),[$,S]),st=L.useMemo(()=>Gt=>G?rV(A,$,G,q,Xe,it,jt,Ze,Ee,ie,Gt):()=>{},[G]);tV(nV,[Xe,it,jt,S,Ee,ie]);let Me;try{Me=L.useSyncExternalStore(st,se,z?()=>q(z(),S):se)}catch(Ce){throw Q.current&&(Ce.message+=`
The error may be correlated with this previous error:
${Q.current.stack}

`),Ce}ku(()=>{Q.current=void 0,Ee.current=void 0,it.current=Me});const Pe=L.useMemo(()=>L.createElement(R,{...Me,ref:x}),[x,R,Me]);return L.useMemo(()=>A?L.createElement(I.Provider,{value:ae},Pe):Pe,[I,Pe,ae])}const V=L.memo(N);if(V.WrappedComponent=R,V.displayName=N.displayName=b,c){const v=L.forwardRef(function(S,I){return L.createElement(V,{...S,reactReduxForwardedRef:I})});return v.displayName=b,v.WrappedComponent=R,Ep(v,R)}return Ep(V,R)}}var bx=sV;function aV(t){const{children:e,context:n,serverState:r,store:i}=t,s=L.useMemo(()=>{const c=yx(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),a=L.useMemo(()=>i.getState(),[i]);ku(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const o=n||_x;return L.createElement(o.Provider,{value:s},e)}var oV=aV,lV="Invariant failed";function cV(t,e){throw new Error(lV)}var wn=function(e){var n=e.top,r=e.right,i=e.bottom,s=e.left,a=r-s,o=i-n,c={top:n,right:r,bottom:i,left:s,width:a,height:o,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return c},Em=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},P_=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},uV=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},$h={top:0,right:0,bottom:0,left:0},Tm=function(e){var n=e.borderBox,r=e.margin,i=r===void 0?$h:r,s=e.border,a=s===void 0?$h:s,o=e.padding,c=o===void 0?$h:o,u=wn(Em(n,i)),d=wn(P_(n,a)),p=wn(P_(d,c));return{marginBox:u,borderBox:wn(n),paddingBox:d,contentBox:p,margin:i,border:a,padding:c}},an=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&cV(),i},dV=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Lu=function(e,n){var r=e.borderBox,i=e.border,s=e.margin,a=e.padding,o=uV(r,n);return Tm({borderBox:o,border:i,margin:s,padding:a})},ju=function(e,n){return n===void 0&&(n=dV()),Lu(e,n)},Ex=function(e,n){var r={top:an(n.marginTop),right:an(n.marginRight),bottom:an(n.marginBottom),left:an(n.marginLeft)},i={top:an(n.paddingTop),right:an(n.paddingRight),bottom:an(n.paddingBottom),left:an(n.paddingLeft)},s={top:an(n.borderTopWidth),right:an(n.borderRightWidth),bottom:an(n.borderBottomWidth),left:an(n.borderLeftWidth)};return Tm({borderBox:e,margin:r,padding:i,border:s})},Tx=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return Ex(n,r)},Ko=function(e){var n=[],r=null,i=function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];n=o,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(null,arguments)}function wx(t,e){}wx.bind(null,"warn");wx.bind(null,"error");function Xr(){}function hV(t,e){return{...t,...e}}function gn(t,e,n){const r=e.map(i=>{const s=hV(n,i.options);return t.addEventListener(i.eventName,i.fn,s),function(){t.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const fV="Invariant failed";class Bu extends Error{}Bu.prototype.toString=function(){return this.message};function H(t,e){throw new Bu(fV)}class pV extends Ge.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Xr,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Bu&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=gn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Bu){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const gV=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,zu=t=>t+1,mV=t=>`
  You have lifted an item in position ${zu(t.source.index)}
`,Sx=(t,e)=>{const n=t.droppableId===e.droppableId,r=zu(t.index),i=zu(e.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},xx=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,yV=t=>{const e=t.destination;if(e)return Sx(t.source,e);const n=t.combine;return n?xx(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},V_=t=>`
  The item has returned to its starting position
  of ${zu(t.index)}
`,vV=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${V_(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${Sx(t.source,e)}
    `:n?`
      You have dropped the item.
      ${xx(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${V_(t.source)}
  `},zc={dragHandleUsageInstructions:gV,onDragStart:mV,onDragUpdate:yV,onDragEnd:vV};function _V(t,e){return!!(t===e||Number.isNaN(t)&&Number.isNaN(e))}function Ax(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!_V(t[n],e[n]))return!1;return!0}function pe(t,e){const n=L.useState(()=>({inputs:e,result:t()}))[0],r=L.useRef(!0),i=L.useRef(n),a=r.current||!!(e&&i.current.inputs&&Ax(e,i.current.inputs))?i.current:{inputs:e,result:t()};return L.useEffect(()=>{r.current=!1,i.current=a},[a]),a.result}function K(t,e){return pe(()=>t,e)}const ht={x:0,y:0},vt=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Wt=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Zr=(t,e)=>t.x===e.x&&t.y===e.y,pa=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),zi=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},Qo=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),k_=(t,e)=>Math.min(...e.map(n=>Qo(t,n))),Ix=t=>e=>({x:t(e.x),y:t(e.y)});var bV=(t,e)=>{const n=wn({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const Dl=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),L_=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],EV={top:0,right:0,bottom:0,left:0},TV=(t,e)=>e?Dl(t,e.scroll.diff.displacement):t,wV=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,SV=(t,e)=>e&&e.shouldClipSubject?bV(e.pageMarginBox,t):wn(t);var Zs=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const i=TV(t.marginBox,r),s=wV(i,n,e),a=SV(s,r);return{page:t,withPlaceholder:e,active:a}},wm=(t,e)=>{t.frame||H();const n=t.frame,r=Wt(e,n.scroll.initial),i=pa(r),s={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}},a=Zs({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:s});return{...t,frame:s,subject:a}};function dt(t,e=Ax){let n=null;function r(...i){if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;const s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}const Rx=dt(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),Cx=dt(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),xd=dt(t=>Object.values(t)),xV=dt(t=>Object.values(t));var ga=dt((t,e)=>xV(e).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Sm(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Ad(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Id=dt((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),AV=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!Sm(i))return null;function a(m){const A={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...i,at:A}}const o=i.displaced.all,c=o.length?o[0]:null;if(t)return c?a(c):null;const u=Id(e,r);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&H();const p=d-1;if(p<0)return null;const f=u[p];return a(f.descriptor.id)},ma=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const Dx={point:ht,value:0},Wo={invisible:{},visible:{},all:[]},IV={displaced:Wo,displacedBy:Dx,at:null};var yn=(t,e)=>n=>t<=n&&n<=e,Nx=t=>{const e=yn(t.top,t.bottom),n=yn(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=e(r.top)||e(r.bottom),a=n(r.left)||n(r.right);if(s&&a)return!0;const c=r.top<t.top&&r.bottom>t.bottom,u=r.left<t.left&&r.right>t.right;return c&&u?!0:c&&a||u&&s}},RV=t=>{const e=yn(t.top,t.bottom),n=yn(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const xm={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Ox={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var CV=t=>e=>{const n=yn(e.top,e.bottom),r=yn(e.left,e.right);return i=>t===xm?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const DV=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:ht;return Dl(t,n)},NV=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,OV=(t,e,n)=>n(e)(t),Am=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?DV(t,e):t;return NV(s,e,i)&&OV(s,n,i)},MV=t=>Am({...t,isVisibleThroughFrameFn:Nx}),Mx=t=>Am({...t,isVisibleThroughFrameFn:RV}),PV=t=>Am({...t,isVisibleThroughFrameFn:CV(t.destination.axis)}),VV=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[t])return!1;const s=i[t];return s?s.shouldAnimate:!0};function kV(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return wn(Em(n,r))}function Xo({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return t.reduce(function(o,c){const u=kV(c,n),d=c.descriptor.id;if(o.all.push(d),!MV({target:u,destination:e,viewport:r,withDroppableDisplacement:!0}))return o.invisible[c.descriptor.id]=!0,o;const f=VV(d,s,i),m={draggableId:d,shouldAnimate:f};return o.visible[d]=m,o},{all:[],visible:{},invisible:{}})}function LV(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function j_({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const i=LV(t,{inHomeList:e});return{displaced:Wo,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Hu({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:i,last:s,index:a,forceShouldAnimate:o}){const c=ma(t,n);if(a==null)return j_({insideDestination:e,inHomeList:c,displacedBy:i,destination:n});const u=e.find(A=>A.descriptor.index===a);if(!u)return j_({insideDestination:e,inHomeList:c,displacedBy:i,destination:n});const d=Id(t,e),p=e.indexOf(u),f=d.slice(p);return{displaced:Xo({afterDragging:f,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:o}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function si(t,e){return!!e.effected[t]}var jV=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const s=r.draggableId,o=n[s].descriptor.index;return si(s,i)?t?o:o-1:t?o+1:o},UV=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=t?i+1:i-1,a=n[0].descriptor.index,o=n[n.length-1].descriptor.index,c=e?o:o+1;return s<a||s>c?null:s},BV=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:a,viewport:o,afterCritical:c})=>{const u=a.at;if(u||H(),u.type==="REORDER"){const p=UV({isMovingForward:t,isInHomeList:e,location:u.destination,insideDestination:s});return p==null?null:Hu({draggable:n,insideDestination:s,destination:i,viewport:o,last:a.displaced,displacedBy:a.displacedBy,index:p})}const d=jV({isMovingForward:t,destination:i,displaced:a.displaced,draggables:r,combine:u.combine,afterCritical:c});return d==null?null:Hu({draggable:n,insideDestination:s,destination:i,viewport:o,last:a.displaced,displacedBy:a.displacedBy,index:d})},zV=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const i=!!(t.visible[n]||t.invisible[n]);return si(n,e)?i?ht:pa(r.point):i?r.point:ht},HV=({afterCritical:t,impact:e,draggables:n})=>{const r=Ad(e);r||H();const i=r.draggableId,s=n[i].page.borderBox.center,a=zV({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return vt(s,a)};const Px=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,FV=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,Im=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,U_=({axis:t,moveRelativeTo:e,isMoving:n})=>zi(t.line,e.marginBox[t.end]+Px(t,n),Im(t,e.marginBox,n)),B_=({axis:t,moveRelativeTo:e,isMoving:n})=>zi(t.line,e.marginBox[t.start]-FV(t,n),Im(t,e.marginBox,n)),GV=({axis:t,moveInto:e,isMoving:n})=>zi(t.line,e.contentBox[t.start]+Px(t,n),Im(t,e.contentBox,n));var qV=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i})=>{const s=ga(r.descriptor.id,n),a=e.page,o=r.axis;if(!s.length)return GV({axis:o,moveInto:r.page,isMoving:a});const{displaced:c,displacedBy:u}=t,d=c.all[0];if(d){const f=n[d];if(si(d,i))return B_({axis:o,moveRelativeTo:f.page,isMoving:a});const m=Lu(f.page,u.point);return B_({axis:o,moveRelativeTo:m,isMoving:a})}const p=s[s.length-1];if(p.descriptor.id===e.descriptor.id)return a.borderBox.center;if(si(p.descriptor.id,i)){const f=Lu(p.page,pa(i.displacedBy.point));return U_({axis:o,moveRelativeTo:f,isMoving:a})}return U_({axis:o,moveRelativeTo:p.page,isMoving:a})},Tp=(t,e)=>{const n=t.frame;return n?vt(e,n.scroll.diff.displacement):e};const $V=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:i})=>{const s=e.page.borderBox.center,a=t.at;return!n||!a?s:a.type==="REORDER"?qV({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i}):HV({impact:t,draggables:r,afterCritical:i})};var Rd=t=>{const e=$V(t),n=t.droppable;return n?Tp(n,e):e},Vx=(t,e)=>{const n=Wt(e,t.scroll.initial),r=pa(n);return{frame:wn({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function z_(t,e){return t.map(n=>e[n])}function YV(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var KV=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:i})=>{const s=Vx(e,vt(e.scroll.current,i)),a=n.frame?wm(n,vt(n.frame.scroll.current,i)):n,o=t.displaced,c=Xo({afterDragging:z_(o.all,r),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:o,forceShouldAnimate:!1}),u=Xo({afterDragging:z_(o.all,r),destination:a,displacedBy:t.displacedBy,viewport:e.frame,last:o,forceShouldAnimate:!1}),d={},p={},f=[o,c,u];return o.all.forEach(A=>{const D=YV(A,f);if(D){p[A]=D;return}d[A]=!0}),{...t,displaced:{all:o.all,invisible:d,visible:p}}},QV=(t,e)=>vt(t.scroll.diff.displacement,e),Rm=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=QV(n,t),i=Wt(r,e.page.borderBox.center);return vt(e.client.borderBox.center,i)},kx=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const a=Wt(n,t.page.borderBox.center),c={target:Dl(t.page.borderBox,a),destination:e,withDroppableDisplacement:i,viewport:r};return s?PV(c):Mx(c)},WV=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:a,previousClientSelection:o,afterCritical:c})=>{if(!n.isEnabled)return null;const u=ga(n.descriptor.id,r),d=ma(e,n),p=AV({isMovingForward:t,draggable:e,destination:n,insideDestination:u,previousImpact:i})||BV({isMovingForward:t,isInHomeList:d,draggable:e,draggables:r,destination:n,insideDestination:u,previousImpact:i,viewport:s,afterCritical:c});if(!p)return null;const f=Rd({impact:p,draggable:e,droppable:n,draggables:r,afterCritical:c});if(kx({draggable:e,destination:n,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Rm({pageBorderBoxCenter:f,draggable:e,viewport:s}),impact:p,scrollJumpRequest:null};const A=Wt(f,a),D=KV({impact:p,viewport:s,destination:n,draggables:r,maxScrollChange:A});return{clientSelection:o,impact:D,scrollJumpRequest:A}};const Mt=t=>{const e=t.subject.active;return e||H(),e};var XV=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const a=n.axis,o=yn(s[a.start],s[a.end]),c=xd(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>Nx(i.frame)(Mt(d))).filter(d=>{const p=Mt(d);return t?s[a.crossAxisEnd]<p[a.crossAxisEnd]:p[a.crossAxisStart]<s[a.crossAxisStart]}).filter(d=>{const p=Mt(d),f=yn(p[a.start],p[a.end]);return o(p[a.start])||o(p[a.end])||f(s[a.start])||f(s[a.end])}).sort((d,p)=>{const f=Mt(d)[a.crossAxisStart],m=Mt(p)[a.crossAxisStart];return t?f-m:m-f}).filter((d,p,f)=>Mt(d)[a.crossAxisStart]===Mt(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>yn(Mt(d)[a.start],Mt(d)[a.end])(e[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,p)=>Mt(d)[a.start]-Mt(p)[a.start])[0]:c.sort((d,p)=>{const f=k_(e,L_(Mt(d))),m=k_(e,L_(Mt(p)));return f!==m?f-m:Mt(d)[a.start]-Mt(p)[a.start]})[0]};const H_=(t,e)=>{const n=t.page.borderBox.center;return si(t.descriptor.id,e)?Wt(n,e.displacedBy.point):n},ZV=(t,e)=>{const n=t.page.borderBox;return si(t.descriptor.id,e)?Dl(n,pa(e.displacedBy.point)):n};var JV=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:i})=>r.filter(a=>Mx({target:ZV(a,i),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((a,o)=>{const c=Qo(t,Tp(n,H_(a,i))),u=Qo(t,Tp(n,H_(o,i)));return c<u?-1:u<c?1:a.descriptor.index-o.descriptor.index})[0]||null,Nl=dt(function(e,n){const r=n[e.line];return{value:r,point:zi(e.line,r)}});const ek=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return zi(r.line,e[r.line]);const i=t.subject.page.contentBox[r.size],c=ga(t.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[r.size],0)+e[r.line]-i;return c<=0?null:zi(r.line,c)},Lx=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),jx=(t,e,n)=>{const r=t.frame;ma(e,t)&&H(),t.subject.withPlaceholder&&H();const i=Nl(t.axis,e.displaceBy).point,s=ek(t,i,n),a={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const d=Zs({page:t.subject.page,withPlaceholder:a,axis:t.axis,frame:t.frame});return{...t,subject:d}}const o=s?vt(r.scroll.max,s):r.scroll.max,c=Lx(r,o),u=Zs({page:t.subject.page,withPlaceholder:a,axis:t.axis,frame:c});return{...t,subject:u,frame:c}},tk=t=>{const e=t.subject.withPlaceholder;e||H();const n=t.frame;if(!n){const a=Zs({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:a}}const r=e.oldFrameMaxScroll;r||H();const i=Lx(n,r),s=Zs({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:s,frame:i}};var nk=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:a,afterCritical:o})=>{if(!e){if(n.length)return null;const p={displaced:Wo,displacedBy:Dx,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},f=Rd({impact:p,draggable:r,droppable:s,draggables:i,afterCritical:o}),m=ma(r,s)?s:jx(s,r,i);return kx({draggable:r,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}const c=t[s.axis.line]<=e.page.borderBox.center[s.axis.line],u=(()=>{const p=e.descriptor.index;return e.descriptor.id===r.descriptor.id||c?p:p+1})(),d=Nl(s.axis,r.displaceBy);return Hu({draggable:r,insideDestination:n,destination:s,viewport:a,displacedBy:d,last:Wo,index:u})},rk=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:i,droppables:s,viewport:a,afterCritical:o})=>{const c=XV({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:s,viewport:a});if(!c)return null;const u=ga(c.descriptor.id,i),d=JV({pageBorderBoxCenter:e,viewport:a,destination:c,insideDestination:u,afterCritical:o}),p=nk({previousPageBorderBoxCenter:e,destination:c,draggable:n,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:o});if(!p)return null;const f=Rd({impact:p,draggable:n,droppable:c,draggables:i,afterCritical:o});return{clientSelection:Rm({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null}},tn=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const ik=(t,e)=>{const n=tn(t);return n?e[n]:null};var sk=({state:t,type:e})=>{const n=ik(t.impact,t.dimensions.droppables),r=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,a=s.axis.direction,o=a==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||a==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(o&&!r)return null;const c=e==="MOVE_DOWN"||e==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,{draggables:p,droppables:f}=t.dimensions;return o?WV({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:s,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):rk({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:s,draggables:p,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function Ei(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Ux(t){const e=yn(t.top,t.bottom),n=yn(t.left,t.right);return function(i){return e(i.y)&&n(i.x)}}function ak(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function ok({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,i=n.map(s=>{const a=s.axis,o=zi(s.axis.line,t.center[a.line],s.page.borderBox.center[a.crossAxisLine]);return{id:s.descriptor.id,distance:Qo(r,o)}}).sort((s,a)=>a.distance-s.distance);return i[0]?i[0].id:null}function lk({pageBorderBox:t,draggable:e,droppables:n}){const r=xd(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!ak(t,s))return!1;if(Ux(s)(t.center))return!0;const a=i.axis,o=s.center[a.crossAxisLine],c=t[a.crossAxisStart],u=t[a.crossAxisEnd],d=yn(s[a.crossAxisStart],s[a.crossAxisEnd]),p=d(c),f=d(u);return!p&&!f?!0:p?c<o:u>o});return r.length?r.length===1?r[0].descriptor.id:ok({pageBorderBox:t,draggable:e,candidates:r}):null}const Bx=(t,e)=>wn(Dl(t,e));var ck=(t,e)=>{const n=t.frame;return n?Bx(e,n.scroll.diff.value):e};function zx({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function uk({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var dk=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:a})=>{const o=n.axis,c=Nl(n.axis,e.displaceBy),u=c.value,d=t[o.start],p=t[o.end],m=Id(e,r).find(D=>{const R=D.descriptor.id,_=D.page.borderBox.center[o.line],b=si(R,a),T=zx({displaced:i,id:R});return b?T?p<=_:d<_-u:T?p<=_+u:d<_})||null,A=uk({draggable:e,closest:m,inHomeList:ma(e,n)});return Hu({draggable:e,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:c,index:A})};const hk=4;var fk=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const a=r.axis,o=Nl(r.axis,t.displaceBy),c=o.value,u=e[a.start],d=e[a.end],f=Id(t,i).find(A=>{const D=A.descriptor.id,R=A.page.borderBox,b=R[a.size]/hk,T=si(D,s),N=zx({displaced:n.displaced,id:D});return T?N?d>R[a.start]+b&&d<R[a.end]-b:u>R[a.start]-c+b&&u<R[a.end]-c-b:N?d>R[a.start]+c+b&&d<R[a.end]+c-b:u>R[a.start]+b&&u<R[a.end]-b});return f?{displacedBy:o,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},Hx=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:a})=>{const o=Bx(e.page.borderBox,t),c=lk({pageBorderBox:o,draggable:e,droppables:r});if(!c)return IV;const u=r[c],d=ga(u.descriptor.id,n),p=ck(u,o);return fk({pageBorderBoxWithDroppableScroll:p,draggable:e,previousImpact:i,destination:u,insideDestination:d,afterCritical:a})||dk({pageBorderBoxWithDroppableScroll:p,draggable:e,destination:u,insideDestination:d,last:i.displaced,viewport:s,afterCritical:a})},Cm=(t,e)=>({...t,[e.descriptor.id]:e});const pk=({previousImpact:t,impact:e,droppables:n})=>{const r=tn(t),i=tn(e);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const a=tk(s);return Cm(n,a)};var gk=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:i})=>{const s=pk({previousImpact:r,impact:i,droppables:n}),a=tn(i);if(!a)return s;const o=n[a];if(ma(t,o)||o.subject.withPlaceholder)return s;const c=jx(o,t,e);return Cm(s,c)},Eo=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const a=r||t.viewport,o=n||t.dimensions,c=e||t.current.client.selection,u=Wt(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:vt(t.initial.client.borderBoxCenter,u)},p={selection:vt(d.selection,a.scroll.current),borderBoxCenter:vt(d.borderBoxCenter,a.scroll.current),offset:vt(d.offset,a.scroll.diff.value)},f={client:d,page:p};if(t.phase==="COLLECTING")return{...t,dimensions:o,viewport:a,current:f};const m=o.draggables[t.critical.draggable.id],A=i||Hx({pageOffset:p.offset,draggable:m,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:a,afterCritical:t.afterCritical}),D=gk({draggable:m,impact:A,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return{...t,current:f,dimensions:{draggables:o.draggables,droppables:D},impact:A,viewport:a,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function mk(t,e){return t.map(n=>e[n])}var Fx=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=t.displaced,a=mk(s.all,n),o=Xo({afterDragging:a,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:s});return{...t,displaced:o}},Gx=({impact:t,draggable:e,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const a=Rd({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:s});return Rm({pageBorderBoxCenter:a,draggable:e,viewport:i})},qx=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&H();const r=t.impact,i=n||t.viewport,s=e||t.dimensions,{draggables:a,droppables:o}=s,c=a[t.critical.draggable.id],u=tn(r);u||H();const d=o[u],p=Fx({impact:r,viewport:i,destination:d,draggables:a}),f=Gx({impact:p,draggable:c,droppable:d,draggables:a,viewport:i,afterCritical:t.afterCritical});return Eo({impact:p,clientSelection:f,state:t,dimensions:s,viewport:i})},yk=t=>({index:t.index,droppableId:t.droppableId}),$x=({draggable:t,home:e,draggables:n,viewport:r})=>{const i=Nl(e.axis,t.displaceBy),s=ga(e.descriptor.id,n),a=s.indexOf(t);a===-1&&H();const o=s.slice(a+1),c=o.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:c};return{impact:{displaced:Xo({afterDragging:o,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:yk(t.descriptor)}},afterCritical:u}},vk=(t,e)=>({draggables:t.draggables,droppables:Cm(t.droppables,e)}),_k=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=Lu(t.client,e),i=ju(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},bk=t=>{const e=t.frame;return e||H(),e},Ek=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(i=>{const s=i.descriptor.droppableId,a=e[s],c=bk(a).scroll.diff.value,u=vt(r,c);return _k({draggable:i,offset:u,initialWindowScroll:n.scroll.initial})})},Tk=({state:t,published:e})=>{const n=e.modified.map(_=>{const b=t.dimensions.droppables[_.droppableId];return wm(b,_.scroll)}),r={...t.dimensions.droppables,...Rx(n)},i=Cx(Ek({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),s={...t.dimensions.draggables,...i};e.removals.forEach(_=>{delete s[_]});const a={droppables:r,draggables:s},o=tn(t.impact),c=o?a.droppables[o]:null,u=a.draggables[t.critical.draggable.id],d=a.droppables[t.critical.droppable.id],{impact:p,afterCritical:f}=$x({draggable:u,home:d,draggables:s,viewport:t.viewport}),m=c&&c.isCombineEnabled?t.impact:p,A=Hx({pageOffset:t.current.page.offset,draggable:a.draggables[t.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:t.viewport,afterCritical:f}),D={...t,phase:"DRAGGING",impact:A,onLiftImpact:p,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return t.phase==="COLLECTING"?D:{...D,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const wp=t=>t.movementMode==="SNAP",Yh=(t,e,n)=>{const r=vk(t.dimensions,e);return!wp(t)||n?Eo({state:t,dimensions:r}):qx({state:t,dimensions:r})};function Kh(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const F_={phase:"IDLE",completed:null,shouldFlush:!1};var wk=(t=F_,e)=>{if(e.type==="FLUSH")return{...F_,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&H();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:a}=e.payload,o=s.draggables[n.draggable.id],c=s.droppables[n.droppable.id],u={selection:r,borderBoxCenter:o.client.borderBox.center,offset:ht},d={client:u,page:{selection:vt(u.selection,i.scroll.initial),borderBoxCenter:vt(u.selection,i.scroll.initial),offset:vt(u.selection,i.scroll.diff.value)}},p=xd(s.droppables).every(D=>!D.isFixedOnPage),{impact:f,afterCritical:m}=$x({draggable:o,home:c,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:s,initial:d,current:d,isWindowScrollAllowed:p,impact:f,afterCritical:m,onLiftImpact:f,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&H(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||H(),Tk({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Ei(t)||H();const{client:n}=e.payload;return Zr(n,t.current.client.selection)?t:Eo({state:t,clientSelection:n,impact:wp(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Kh(t);Ei(t)||H();const{id:n,newScroll:r}=e.payload,i=t.dimensions.droppables[n];if(!i)return t;const s=wm(i,r);return Yh(t,s,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ei(t)||H();const{id:n,isEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||H(),i.isEnabled===r&&H();const s={...i,isEnabled:r};return Yh(t,s,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ei(t)||H();const{id:n,isCombineEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||H(),i.isCombineEnabled===r&&H();const s={...i,isCombineEnabled:r};return Yh(t,s,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Ei(t)||H(),t.isWindowScrollAllowed||H();const n=e.payload.newScroll;if(Zr(t.viewport.scroll.current,n))return Kh(t);const r=Vx(t.viewport,n);return wp(t)?qx({state:t,viewport:r}):Eo({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ei(t))return t;const n=e.payload.maxScroll;if(Zr(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&H();const n=sk({state:t,type:e.type});return n?Eo({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&H(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||H(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function be(t,e){return t instanceof Object&&"type"in t&&t.type===e}const Sk=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),xk=t=>({type:"LIFT",payload:t}),Ak=t=>({type:"INITIAL_PUBLISH",payload:t}),Ik=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),Rk=()=>({type:"COLLECTION_STARTING",payload:null}),Ck=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Dk=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Nk=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),Yx=t=>({type:"MOVE",payload:t}),Ok=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),Mk=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Pk=()=>({type:"MOVE_UP",payload:null}),Vk=()=>({type:"MOVE_DOWN",payload:null}),kk=()=>({type:"MOVE_RIGHT",payload:null}),Lk=()=>({type:"MOVE_LEFT",payload:null}),Dm=()=>({type:"FLUSH",payload:null}),jk=t=>({type:"DROP_ANIMATE",payload:t}),Nm=t=>({type:"DROP_COMPLETE",payload:t}),Kx=t=>({type:"DROP",payload:t}),Uk=t=>({type:"DROP_PENDING",payload:t}),Qx=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Bk=t=>({getState:e,dispatch:n})=>r=>i=>{if(!be(i,"LIFT")){r(i);return}const{id:s,clientSelection:a,movementMode:o}=i.payload,c=e();c.phase==="DROP_ANIMATING"&&n(Nm({completed:c.completed})),e().phase!=="IDLE"&&H(),n(Dm()),n(Sk({draggableId:s,movementMode:o}));const d={draggableId:s,scrollOptions:{shouldPublishImmediately:o==="SNAP"}},{critical:p,dimensions:f,viewport:m}=t.startPublishing(d);n(Ak({critical:p,dimensions:f,clientSelection:a,movementMode:o,viewport:m}))},zk=t=>()=>e=>n=>{be(n,"INITIAL_PUBLISH")&&t.dragging(),be(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(be(n,"FLUSH")||be(n,"DROP_COMPLETE"))&&t.resting(),e(n)};const Om={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Zo={opacity:{drop:0,combining:.7},scale:{drop:.75}},Wx={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},mi=`${Wx.outOfTheWay}s ${Om.outOfTheWay}`,To={fluid:`opacity ${mi}`,snap:`transform ${mi}, opacity ${mi}`,drop:t=>{const e=`${t}s ${Om.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${mi}`,placeholder:`height ${mi}, width ${mi}, margin ${mi}`},G_=t=>Zr(t,ht)?void 0:`translate(${t.x}px, ${t.y}px)`,Sp={moveTo:G_,drop:(t,e)=>{const n=G_(t);if(n)return e?`${n} scale(${Zo.scale.drop})`:n}},{minDropTime:xp,maxDropTime:Xx}=Wx,Hk=Xx-xp,q_=1500,Fk=.6;var Gk=({current:t,destination:e,reason:n})=>{const r=Qo(t,e);if(r<=0)return xp;if(r>=q_)return Xx;const i=r/q_,s=xp+Hk*i,a=n==="CANCEL"?s*Fk:s;return Number(a.toFixed(2))},qk=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:a}=n,o=tn(t),c=o?a[o]:null,u=a[e.descriptor.droppableId],d=Gx({impact:t,draggable:e,draggables:s,afterCritical:i,droppable:c||u,viewport:r});return Wt(d,e.client.borderBox.center)},$k=({draggables:t,reason:e,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||e!=="DROP"?{impact:Fx({draggables:t,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Wo},didDropInsideDroppable:!0};const Yk=({getState:t,dispatch:e})=>n=>r=>{if(!be(r,"DROP")){n(r);return}const i=t(),s=r.payload.reason;if(i.phase==="COLLECTING"){e(Uk({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&H(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||H();const o=i.critical,c=i.dimensions,u=c.draggables[i.critical.draggable.id],{impact:d,didDropInsideDroppable:p}=$k({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),f=p?Sm(d):null,m=p?Ad(d):null,A={index:o.draggable.index,droppableId:o.droppable.id},D={draggableId:u.descriptor.id,type:u.descriptor.type,source:A,reason:s,mode:i.movementMode,destination:f,combine:m},R=qk({impact:d,draggable:u,dimensions:c,viewport:i.viewport,afterCritical:i.afterCritical}),_={critical:i.critical,afterCritical:i.afterCritical,result:D,impact:d};if(!(!Zr(i.current.client.offset,R)||!!D.combine)){e(Nm({completed:_}));return}const T=Gk({current:i.current.client.offset,destination:R,reason:s});e(jk({newHomeClientOffset:R,dropDuration:T,completed:_}))};var Zx=()=>({x:window.pageXOffset,y:window.pageYOffset});function Kk(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function Qk({onWindowScroll:t}){function e(){t(Zx())}const n=Ko(e),r=Kk(n);let i=Xr;function s(){return i!==Xr}function a(){s()&&H(),i=gn(window,[r])}function o(){s()||H(),n.cancel(),i(),i=Xr}return{start:a,stop:o,isActive:s}}const Wk=t=>be(t,"DROP_COMPLETE")||be(t,"DROP_ANIMATE")||be(t,"FLUSH"),Xk=t=>{const e=Qk({onWindowScroll:n=>{t.dispatch(Ok({newScroll:n}))}});return n=>r=>{!e.isActive()&&be(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&Wk(r)&&e.stop(),n(r)}};var Zk=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{e||n||(e=!0,t(s),clearTimeout(r))};return i.wasCalled=()=>e,i},Jk=()=>{const t=[],e=i=>{const s=t.findIndex(o=>o.timerId===i);s===-1&&H();const[a]=t.splice(s,1);a.callback()};return{add:i=>{const s=setTimeout(()=>e(s)),a={timerId:s,callback:i};t.push(a)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const eL=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,tL=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,nL=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},Ha=(t,e)=>{e()},yc=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function Qh(t,e,n,r){if(!t){n(r(e));return}const i=Zk(n);t(e,{announce:i}),i.wasCalled()||n(r(e))}var rL=(t,e)=>{const n=Jk();let r=null;const i=(p,f)=>{r&&H(),Ha("onBeforeCapture",()=>{const m=t().onBeforeCapture;m&&m({draggableId:p,mode:f})})},s=(p,f)=>{r&&H(),Ha("onBeforeDragStart",()=>{const m=t().onBeforeDragStart;m&&m(yc(p,f))})},a=(p,f)=>{r&&H();const m=yc(p,f);r={mode:f,lastCritical:p,lastLocation:m.source,lastCombine:null},n.add(()=>{Ha("onDragStart",()=>Qh(t().onDragStart,m,e,zc.onDragStart))})},o=(p,f)=>{const m=Sm(f),A=Ad(f);r||H();const D=!nL(p,r.lastCritical);D&&(r.lastCritical=p);const R=!eL(r.lastLocation,m);R&&(r.lastLocation=m);const _=!tL(r.lastCombine,A);if(_&&(r.lastCombine=A),!D&&!R&&!_)return;const b={...yc(p,r.mode),combine:A,destination:m};n.add(()=>{Ha("onDragUpdate",()=>Qh(t().onDragUpdate,b,e,zc.onDragUpdate))})},c=()=>{r||H(),n.flush()},u=p=>{r||H(),r=null,Ha("onDragEnd",()=>Qh(t().onDragEnd,p,e,zc.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:a,update:o,flush:c,drop:u,abort:()=>{if(!r)return;const p={...yc(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(p)}}},iL=(t,e)=>{const n=rL(t,e);return r=>i=>s=>{if(be(s,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(be(s,"INITIAL_PUBLISH")){const o=s.payload.critical;n.beforeStart(o,s.payload.movementMode),i(s),n.start(o,s.payload.movementMode);return}if(be(s,"DROP_COMPLETE")){const o=s.payload.completed.result;n.flush(),i(s),n.drop(o);return}if(i(s),be(s,"FLUSH")){n.abort();return}const a=r.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const sL=t=>e=>n=>{if(!be(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&H(),t.dispatch(Nm({completed:r.completed}))},aL=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return i=>s=>{if((be(s,"FLUSH")||be(s,"DROP_COMPLETE")||be(s,"DROP_ANIMATION_FINISHED"))&&r(),i(s),!be(s,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(Qx())}};n=requestAnimationFrame(()=>{n=null,e=gn(window,[a])})}};var oL=t=>()=>e=>n=>{(be(n,"DROP_COMPLETE")||be(n,"FLUSH")||be(n,"DROP_ANIMATE"))&&t.stopPublishing(),e(n)},lL=t=>{let e=!1;return()=>n=>r=>{if(be(r,"INITIAL_PUBLISH")){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(be(r,"FLUSH")){e=!1,t.tryRestoreFocusRecorded();return}if(be(r,"DROP_COMPLETE")){e=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const cL=t=>be(t,"DROP_COMPLETE")||be(t,"DROP_ANIMATE")||be(t,"FLUSH");var uL=t=>e=>n=>r=>{if(cL(r)){t.stop(),n(r);return}if(be(r,"INITIAL_PUBLISH")){n(r);const i=e.getState();i.phase!=="DRAGGING"&&H(),t.start(i);return}n(r),t.scroll(e.getState())};const dL=t=>e=>n=>{if(e(n),!be(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(Kx({reason:r.reason})))},hL=px;var fL=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>fx(wk,hL(aP(zk(n),oL(t),Bk(t),Yk,sL,aL,dL,uL(s),Xk,lL(e),iL(r,i))));const Wh=()=>({additions:{},removals:{},modified:{}});function pL({registry:t,callbacks:e}){let n=Wh(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:d}=n,p=Object.keys(c).map(A=>t.draggable.getById(A).getDimension(ht)).sort((A,D)=>A.descriptor.index-D.descriptor.index),f=Object.keys(d).map(A=>{const R=t.droppable.getById(A).callbacks.getScrollWhileDragging();return{droppableId:A,scroll:R}}),m={additions:p,removals:Object.keys(u),modified:f};n=Wh(),e.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Wh())}}}var Jx=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const i=Wt({x:e,y:t},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},eA=()=>{const t=document.documentElement;return t||H(),t},tA=()=>{const t=eA();return Jx({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},gL=()=>{const t=Zx(),e=tA(),n=t.y,r=t.x,i=eA(),s=i.clientWidth,a=i.clientHeight,o=r+s,c=n+a;return{frame:wn({top:n,left:r,right:o,bottom:c}),scroll:{initial:t,current:t,max:e,diff:{value:ht,displacement:ht}}}},mL=({critical:t,scrollOptions:e,registry:n})=>{const r=gL(),i=r.scroll.current,s=t.droppable,a=n.droppable.getAllByType(s.type).map(d=>d.callbacks.getDimensionAndWatchScroll(i,e)),o=n.draggable.getAllByType(t.draggable.type).map(d=>d.getDimension(i));return{dimensions:{draggables:Cx(o),droppables:Rx(a)},critical:t,viewport:r}};function $_(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var yL=(t,e)=>{let n=null;const r=pL({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(f,m)=>{t.droppable.exists(f)||H(),n&&e.updateDroppableIsEnabled({id:f,isEnabled:m})},s=(f,m)=>{n&&(t.droppable.exists(f)||H(),e.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(t.droppable.exists(f)||H(),e.updateDroppableScroll({id:f,newScroll:m}))},o=(f,m)=>{n&&t.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;r.stop();const f=n.critical.droppable;t.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||H();const m=n.critical.draggable;f.type==="ADDITION"&&$_(t,m,f.value)&&r.add(f.value),f.type==="REMOVAL"&&$_(t,m,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:o,updateDroppableScroll:a,startPublishing:f=>{n&&H();const m=t.draggable.getById(f.draggableId),A=t.droppable.getById(m.descriptor.droppableId),D={draggable:m.descriptor,droppable:A.descriptor},R=t.subscribe(u);return n={critical:D,unsubscribe:R},mL({critical:D,registry:t,scrollOptions:f.scrollOptions})},stopPublishing:c}},nA=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",vL=t=>{window.scrollBy(t.x,t.y)};const _L=dt(t=>xd(t).filter(e=>!(!e.isEnabled||!e.frame))),bL=(t,e)=>_L(e).find(r=>(r.frame||H(),Ux(r.frame.pageMarginBox)(t)))||null;var EL=({center:t,destination:e,droppables:n})=>{if(e){const i=n[e];return i.frame?i:null}return bL(t,n)};const Jo={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var TL=(t,e,n=()=>Jo)=>{const r=n(),i=t[e.size]*r.startFromPercentage,s=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},rA=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},Mm=1,wL=(t,e,n=()=>Jo)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return Mm;const s=1-rA({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),a=r.maxPixelScroll*r.ease(s);return Math.ceil(a)},SL=(t,e,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,a=e,o=s,u=Date.now()-a;if(u>=s)return t;if(u<i)return Mm;const d=rA({startOfRange:i,endOfRange:o,current:u}),p=t*r.ease(d);return Math.ceil(p)},Y_=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=wL(t,e,i);return s===0?0:r?Math.max(SL(s,n,i),Mm):s},K_=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const a=TL(t,r,s);return e[r.end]<e[r.start]?Y_({distanceToEdge:e[r.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*Y_({distanceToEdge:e[r.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},xL=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,i=e.width>t.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const AL=Ix(t=>t===0?0:t);var iA=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const a={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},o=K_({container:e,distanceToEdges:a,dragStartTime:t,axis:xm,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),c=K_({container:e,distanceToEdges:a,dragStartTime:t,axis:Ox,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),u=AL({x:c,y:o});if(Zr(u,ht))return null;const d=xL({container:e,subject:n,proposedScroll:u});return d?Zr(d,ht)?null:d:null};const IL=Ix(t=>t===0?0:t>0?1:-1),Pm=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const i=vt(e,r),s={x:t(i.x,n.x),y:t(i.y,n.y)};return Zr(s,ht)?null:s}})(),sA=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=IL(n),s=Pm({max:r,current:e,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},Vm=(t,e)=>sA({current:t.scroll.current,max:t.scroll.max,change:e}),RL=(t,e)=>{if(!Vm(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return Pm({current:r,max:n,change:e})},km=(t,e)=>{const n=t.frame;return n?sA({current:n.scroll.current,max:n.scroll.max,change:e}):!1},CL=(t,e)=>{const n=t.frame;return!n||!km(t,e)?null:Pm({current:n.scroll.current,max:n.scroll.max,change:e})};var DL=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const a=iA({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return a&&Vm(t,a)?a:null},NL=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const a=t.frame;if(!a)return null;const o=iA({dragStartTime:r,container:a.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&km(t,o)?o:null},Q_=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const a=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const p=t.viewport,f=DL({dragStartTime:e,viewport:p,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(f){r(f);return}}const u=EL({center:a,destination:tn(t.impact),droppables:t.dimensions.droppables});if(!u)return;const d=NL({dragStartTime:e,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:s});d&&i(u.descriptor.id,d)},OL=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>Jo})=>{const r=Ko(t),i=Ko(e);let s=null;const a=u=>{s||H();const{shouldUseTimeDampening:d,dragStartTime:p}=s;Q_({state:u,scrollWindow:r,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{s&&H();const d=Date.now();let p=!1;const f=()=>{p=!0};Q_({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),s={dragStartTime:d,shouldUseTimeDampening:p},p&&a(u)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:a}},ML=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(o,c)=>{const u=vt(o.current.client.selection,c);t({client:u})},i=(o,c)=>{if(!km(o,c))return c;const u=CL(o,c);if(!u)return e(o.descriptor.id,c),null;const d=Wt(c,u);return e(o.descriptor.id,d),Wt(c,d)},s=(o,c,u)=>{if(!o||!Vm(c,u))return u;const d=RL(c,u);if(!d)return n(u),null;const p=Wt(u,d);return n(p),Wt(u,p)};return o=>{const c=o.scrollJumpRequest;if(!c)return;const u=tn(o.impact);u||H();const d=i(o.dimensions.droppables[u],c);if(!d)return;const p=o.viewport,f=s(o.isWindowScrollAllowed,p,d);f&&r(o,f)}},PL=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const i=OL({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),s=ML({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){i.scroll(c);return}c.scrollJumpRequest&&s(c)}},start:i.start,stop:i.stop}};const Js="data-rfd",ea=(()=>{const t=`${Js}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),Ap=(()=>{const t=`${Js}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),VL=(()=>{const t=`${Js}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),W_={contextId:`${Js}-scroll-container-context-id`},kL=t=>e=>`[${e}="${t}"]`,Fa=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),LL="pointer-events: none;";var jL=t=>{const e=kL(t),n=(()=>{const o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(ea.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:LL,dropAnimating:o}}})(),r=(()=>{const o=`
      transition: ${To.outOfTheWay};
    `;return{selector:e(Ap.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}})(),i={selector:e(VL.contextId),styles:{always:"overflow-anchor: none;"}},a=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Fa(a,"always"),resting:Fa(a,"resting"),dragging:Fa(a,"dragging"),dropAnimating:Fa(a,"dropAnimating"),userCancel:Fa(a,"userCancel")}};const nn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect,Xh=()=>{const t=document.querySelector("head");return t||H(),t},X_=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function UL(t,e){const n=pe(()=>jL(t),[t]),r=L.useRef(null),i=L.useRef(null),s=K(dt(p=>{const f=i.current;f||H(),f.textContent=p}),[]),a=K(p=>{const f=r.current;f||H(),f.textContent=p},[]);nn(()=>{!r.current&&!i.current||H();const p=X_(e),f=X_(e);return r.current=p,i.current=f,p.setAttribute(`${Js}-always`,t),f.setAttribute(`${Js}-dynamic`,t),Xh().appendChild(p),Xh().appendChild(f),a(n.always),s(n.resting),()=>{const m=A=>{const D=A.current;D||H(),Xh().removeChild(D),A.current=null};m(r),m(i)}},[e,a,s,n.always,n.resting,t]);const o=K(()=>s(n.dragging),[s,n.dragging]),c=K(p=>{if(p==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),u=K(()=>{i.current&&s(n.resting)},[s,n.resting]);return pe(()=>({dragging:o,dropping:c,resting:u}),[o,c,u])}function aA(t,e){return Array.from(t.querySelectorAll(e))}var oA=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function Cd(t){return t instanceof oA(t).HTMLElement}function BL(t,e){const n=`[${ea.contextId}="${t}"]`,r=aA(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(ea.draggableId)===e);return!i||!Cd(i)?null:i}function zL(t){const e=L.useRef({}),n=L.useRef(null),r=L.useRef(null),i=L.useRef(!1),s=K(function(f,m){const A={id:f,focus:m};return e.current[f]=A,function(){const R=e.current;R[f]!==A&&delete R[f]}},[]),a=K(function(f){const m=BL(t,f);m&&m!==document.activeElement&&m.focus()},[t]),o=K(function(f,m){n.current===f&&(n.current=m)},[]),c=K(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=n.current;f&&a(f)}))},[a]),u=K(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(ea.draggableId)===f&&(n.current=f)},[]);return nn(()=>(i.current=!0,function(){i.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),pe(()=>({register:s,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}),[s,u,c,o])}function HL(){const t={draggables:{},droppables:{}},e=[];function n(p){return e.push(p),function(){const m=e.indexOf(p);m!==-1&&e.splice(m,1)}}function r(p){e.length&&e.forEach(f=>f(p))}function i(p){return t.draggables[p]||null}function s(p){const f=i(p);return f||H(),f}const a={register:p=>{t.draggables[p.descriptor.id]=p,r({type:"ADDITION",value:p})},update:(p,f)=>{const m=t.draggables[f.descriptor.id];m&&m.uniqueId===p.uniqueId&&(delete t.draggables[f.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:p=>{const f=p.descriptor.id,m=i(f);m&&p.uniqueId===m.uniqueId&&(delete t.draggables[f],t.droppables[p.descriptor.droppableId]&&r({type:"REMOVAL",value:p}))},getById:s,findById:i,exists:p=>!!i(p),getAllByType:p=>Object.values(t.draggables).filter(f=>f.descriptor.type===p)};function o(p){return t.droppables[p]||null}function c(p){const f=o(p);return f||H(),f}const u={register:p=>{t.droppables[p.descriptor.id]=p},unregister:p=>{const f=o(p.descriptor.id);f&&p.uniqueId===f.uniqueId&&delete t.droppables[p.descriptor.id]},getById:c,findById:o,exists:p=>!!o(p),getAllByType:p=>Object.values(t.droppables).filter(f=>f.descriptor.type===p)};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function FL(){const t=pe(HL,[]);return L.useEffect(()=>function(){t.clean()},[t]),t}var Lm=Ge.createContext(null),Fu=()=>{const t=document.body;return t||H(),t};const GL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},qL=t=>`rfd-announcement-${t}`;function $L(t){const e=pe(()=>qL(t),[t]),n=L.useRef(null);return L.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=e,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Uu(s.style,GL),Fu().appendChild(s),function(){setTimeout(function(){const c=Fu();c.contains(s)&&c.removeChild(s),s===n.current&&(n.current=null)})}},[e]),K(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}const YL={separator:"::"};function jm(t,e=YL){const n=Ge.useId();return pe(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}function KL({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function QL({contextId:t,text:e}){const n=jm("hidden-text",{separator:"-"}),r=pe(()=>KL({contextId:t,uniqueId:n}),[n,t]);return L.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=e,s.style.display="none",Fu().appendChild(s),function(){const o=Fu();o.contains(s)&&o.removeChild(s)}},[r,e]),r}var Dd=Ge.createContext(null);function lA(t){const e=L.useRef(t);return L.useEffect(()=>{e.current=t}),e}function WL(){let t=null;function e(){return!!t}function n(a){return a===t}function r(a){t&&H();const o={abandon:a};return t=o,o}function i(){t||H(),t=null}function s(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:n,claim:r,release:i,tryAbandon:s}}function el(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const XL=9,ZL=13,Um=27,cA=32,JL=33,e3=34,t3=35,n3=36,r3=37,i3=38,s3=39,a3=40,o3={[ZL]:!0,[XL]:!0};var uA=t=>{o3[t.keyCode]&&t.preventDefault()};const Nd=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),dA=0,Z_=5;function l3(t,e){return Math.abs(e.x-t.x)>=Z_||Math.abs(e.y-t.y)>=Z_}const J_={type:"IDLE"};function c3({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:a,clientY:o}=i;if(s!==dA)return;const c={x:a,y:o},u=n();if(u.type==="DRAGGING"){i.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&H();const d=u.point;if(!l3(d,c))return;i.preventDefault();const p=u.actions.fluidLift(c);r({type:"DRAGGING",actions:p})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){t();return}if(i.keyCode===Um){i.preventDefault(),t();return}uA(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&H(),s.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:Nd,fn:t}]}function u3(t){const e=L.useRef(J_),n=L.useRef(Xr),r=pe(()=>({eventName:"mousedown",fn:function(p){if(p.defaultPrevented||p.button!==dA||p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)return;const f=t.findClosestDraggableId(p);if(!f)return;const m=t.tryGetLock(f,a,{sourceEvent:p});if(!m)return;p.preventDefault();const A={x:p.clientX,y:p.clientY};n.current(),u(m,A)}}),[t]),i=pe(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const p=t.findClosestDraggableId(d);if(!p)return;const f=t.findOptionsForDraggable(p);f&&(f.shouldRespectForcePress||t.canGetLock(p)&&d.preventDefault())}}),[t]),s=K(function(){const p={passive:!1,capture:!0};n.current=gn(window,[i,r],p)},[i,r]),a=K(()=>{e.current.type!=="IDLE"&&(e.current=J_,n.current(),s())},[s]),o=K(()=>{const d=e.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=K(function(){const p={capture:!0,passive:!1},f=c3({cancel:o,completed:a,getPhase:()=>e.current,setPhase:m=>{e.current=m}});n.current=gn(window,f,p)},[o,a]),u=K(function(p,f){e.current.type!=="IDLE"&&H(),e.current={type:"PENDING",point:f,actions:p},c()},[c]);nn(function(){return s(),function(){n.current()}},[s])}function d3(){}const h3={[e3]:!0,[JL]:!0,[n3]:!0,[t3]:!0};function f3(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===Um){i.preventDefault(),n();return}if(i.keyCode===cA){i.preventDefault(),r();return}if(i.keyCode===a3){i.preventDefault(),t.moveDown();return}if(i.keyCode===i3){i.preventDefault(),t.moveUp();return}if(i.keyCode===s3){i.preventDefault(),t.moveRight();return}if(i.keyCode===r3){i.preventDefault(),t.moveLeft();return}if(h3[i.keyCode]){i.preventDefault();return}uA(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Nd,fn:n}]}function p3(t){const e=L.useRef(d3),n=pe(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==cA)return;const a=t.findClosestDraggableId(s);if(!a)return;const o=t.tryGetLock(a,d,{sourceEvent:s});if(!o)return;s.preventDefault();let c=!0;const u=o.snapLift();e.current();function d(){c||H(),c=!1,e.current(),r()}e.current=gn(window,f3(u,d),{capture:!0,passive:!1})}}),[t]),r=K(function(){const s={passive:!1,capture:!0};e.current=gn(window,[n],s)},[n]);nn(function(){return r(),function(){e.current()}},[r])}const Zh={type:"IDLE"},g3=120,m3=.15;function y3({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===Um&&n.preventDefault(),t()}},{eventName:Nd,fn:t}]}function v3({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:s,clientY:a}=r.touches[0],o={x:s,y:a};r.preventDefault(),i.actions.move(o)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&H();const s=r.touches[0];if(!s||!(s.force>=m3))return;const o=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){o&&t();return}if(o){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:Nd,fn:t}]}function _3(t){const e=L.useRef(Zh),n=L.useRef(Xr),r=K(function(){return e.current},[]),i=K(function(m){e.current=m},[]),s=pe(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const A=t.findClosestDraggableId(m);if(!A)return;const D=t.tryGetLock(A,o,{sourceEvent:m});if(!D)return;const R=m.touches[0],{clientX:_,clientY:b}=R,T={x:_,y:b};n.current(),p(D,T)}}),[t]),a=K(function(){const m={capture:!0,passive:!1};n.current=gn(window,[s],m)},[s]),o=K(()=>{const f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(Zh),n.current(),a())},[a,i]),c=K(()=>{const f=e.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),u=K(function(){const m={capture:!0,passive:!1},A={cancel:c,completed:o,getPhase:r},D=gn(window,v3(A),m),R=gn(window,y3(A),m);n.current=function(){D(),R()}},[c,r,o]),d=K(function(){const m=r();m.type!=="PENDING"&&H();const A=m.actions.fluidLift(m.point);i({type:"DRAGGING",actions:A,hasMoved:!1})},[r,i]),p=K(function(m,A){r().type!=="IDLE"&&H();const D=setTimeout(d,g3);i({type:"PENDING",point:A,actions:m,longPressTimerId:D}),u()},[u,r,i,d]);nn(function(){return a(),function(){n.current();const A=r();A.type==="PENDING"&&(clearTimeout(A.longPressTimerId),i(Zh))}},[r,a,i]),nn(function(){return gn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const b3=["input","button","textarea","select","option","optgroup","video","audio"];function hA(t,e){if(e==null)return!1;if(b3.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:hA(t,e.parentElement)}function E3(t,e){const n=e.target;return Cd(n)?hA(t,n):!1}var T3=t=>wn(t.getBoundingClientRect()).center;function w3(t){return t instanceof oA(t).Element}const S3=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function fA(t,e){return t==null?null:t[S3](e)?t:fA(t.parentElement,e)}function x3(t,e){return t.closest?t.closest(e):fA(t,e)}function A3(t){return`[${ea.contextId}="${t}"]`}function I3(t,e){const n=e.target;if(!w3(n))return null;const r=A3(t),i=x3(n,r);return!i||!Cd(i)?null:i}function R3(t,e){const n=I3(t,e);return n?n.getAttribute(ea.draggableId):null}function C3(t,e){const n=`[${Ap.contextId}="${t}"]`,i=aA(document,n).find(s=>s.getAttribute(Ap.id)===e);return!i||!Cd(i)?null:i}function D3(t){t.preventDefault()}function vc({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function pA({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!nA(e.getState(),r))}function N3({lockAPI:t,contextId:e,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:a}){if(!pA({lockAPI:t,store:n,registry:r,draggableId:i}))return null;const c=r.draggable.getById(i),u=C3(e,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&E3(u,a))return null;const d=t.claim(s||Xr);let p="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return t.isActive(d)}function A(M,V){vc({expected:M,phase:p,isLockActive:m,shouldWarn:!0})&&n.dispatch(V())}const D=A.bind(null,"DRAGGING");function R(M){function V(){t.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(V(),H()),n.dispatch(xk(M.liftActionArgs)),p="DRAGGING";function w(v,x={shouldBlockNextClick:!1}){if(M.cleanup(),x.shouldBlockNextClick){const S=gn(window,[{eventName:"click",fn:D3,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(S)}V(),n.dispatch(Kx({reason:v}))}return{isActive:()=>vc({expected:"DRAGGING",phase:p,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:v=>w("DROP",v),cancel:v=>w("CANCEL",v),...M.actions}}function _(M){const V=Ko(v=>{D(()=>Yx({client:v}))});return{...R({liftActionArgs:{id:i,clientSelection:M,movementMode:"FLUID"},cleanup:()=>V.cancel(),actions:{move:V}}),move:V}}function b(){const M={moveUp:()=>D(Pk),moveRight:()=>D(kk),moveDown:()=>D(Vk),moveLeft:()=>D(Lk)};return R({liftActionArgs:{id:i,clientSelection:T3(u),movementMode:"SNAP"},cleanup:Xr,actions:M})}function T(){vc({expected:"PRE_DRAG",phase:p,isLockActive:m,shouldWarn:!0})&&t.release()}return{isActive:()=>vc({expected:"PRE_DRAG",phase:p,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:_,snapLift:b,abort:T}}const O3=[u3,p3,_3];function M3({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?O3:[],...r||[]],a=L.useState(()=>WL())[0],o=K(function(R,_){el(R)&&!el(_)&&a.tryAbandon()},[a]);nn(function(){let R=e.getState();return e.subscribe(()=>{const b=e.getState();o(R,b),R=b})},[a,e,o]),nn(()=>a.tryAbandon,[a.tryAbandon]);const c=K(D=>pA({lockAPI:a,registry:n,store:e,draggableId:D}),[a,n,e]),u=K((D,R,_)=>N3({lockAPI:a,registry:n,contextId:t,store:e,draggableId:D,forceSensorStop:R||null,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null}),[t,a,n,e]),d=K(D=>R3(t,D),[t]),p=K(D=>{const R=n.draggable.findById(D);return R?R.options:null},[n.draggable]),f=K(function(){a.isClaimed()&&(a.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(Dm()))},[a,e]),m=K(()=>a.isClaimed(),[a]),A=pe(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,p,f,m]);for(let D=0;D<s.length;D++)s[D](A)}const P3=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};Qu.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),V3=t=>({...Jo,...t.autoScrollerOptions,durationDampening:{...Jo.durationDampening,...t.autoScrollerOptions}});function Ga(t){return t.current||H(),t.current}function k3(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=t,a=L.useRef(null),o=lA(t),c=K(()=>P3(o.current),[o]),u=K(()=>V3(o.current),[o]),d=$L(e),p=QL({contextId:e,text:s}),f=UL(e,i),m=K(S=>{Ga(a).dispatch(S)},[]),A=pe(()=>I_({publishWhileDragging:Ik,updateDroppableScroll:Ck,updateDroppableIsEnabled:Dk,updateDroppableIsCombineEnabled:Nk,collectionStarting:Rk},m),[m]),D=FL(),R=pe(()=>yL(D,A),[D,A]),_=pe(()=>PL({scrollWindow:vL,scrollDroppable:R.scrollDroppable,getAutoScrollerOptions:u,...I_({move:Yx},m)}),[R.scrollDroppable,m,u]),b=zL(e),T=pe(()=>fL({announce:d,autoScroller:_,dimensionMarshal:R,focusMarshal:b,getResponders:c,styleMarshal:f}),[d,_,R,b,c,f]);a.current=T;const N=K(()=>{const S=Ga(a);S.getState().phase!=="IDLE"&&S.dispatch(Dm())},[]),M=K(()=>{const S=Ga(a).getState();return S.phase==="DROP_ANIMATING"?!0:S.phase==="IDLE"?!1:S.isDragging},[]),V=pe(()=>({isDragging:M,tryAbort:N}),[M,N]);n(V);const w=K(S=>nA(Ga(a).getState(),S),[]),v=K(()=>Ei(Ga(a).getState()),[]),x=pe(()=>({marshal:R,focus:b,contextId:e,canLift:w,isMovementAllowed:v,dragHandleUsageInstructionsId:p,registry:D}),[e,R,p,b,w,v,D]);return M3({contextId:e,store:T,registry:D,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),L.useEffect(()=>N,[N]),Ge.createElement(Dd.Provider,{value:x},Ge.createElement(oV,{context:Lm,store:T},t.children))}function L3(){return Ge.useId()}function gA(t){const e=L3(),n=t.dragHandleUsageInstructions||zc.dragHandleUsageInstructions;return Ge.createElement(pV,null,r=>Ge.createElement(k3,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const eb={dragging:5e3,dropAnimating:4500},j3=(t,e)=>e?To.drop(e.duration):t?To.snap:To.fluid,U3=(t,e)=>{if(t)return e?Zo.opacity.drop:Zo.opacity.combining},B3=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function z3(t){const n=t.dimension.client,{offset:r,combineWith:i,dropping:s}=t,a=!!i,o=B3(t),c=!!s,u=c?Sp.drop(r,a):Sp.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:j3(o,s),transform:u,opacity:U3(a,c),zIndex:c?eb.dropAnimating:eb.dragging,pointerEvents:"none"}}function H3(t){return{transform:Sp.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function F3(t){return t.type==="DRAGGING"?z3(t):H3(t)}function G3(t,e,n=ht){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),s=Ex(i,r),a=ju(s,n),o={client:s,tagName:e.tagName.toLowerCase(),display:r.display},c={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:t,placeholder:o,displaceBy:c,client:s,page:a}}function q3(t){const e=jm("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:o}=t,c=pe(()=>({canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:o}),[s,o,a]),u=K(m=>{const A=i();return A||H(),G3(n,A,m)},[n,i]),d=pe(()=>({uniqueId:e,descriptor:n,options:c,getDimension:u}),[n,u,c,e]),p=L.useRef(d),f=L.useRef(!0);nn(()=>(r.draggable.register(p.current),()=>r.draggable.unregister(p.current)),[r.draggable]),nn(()=>{if(f.current){f.current=!1;return}const m=p.current;p.current=d,r.draggable.update(d,m)},[d,r.draggable])}var Bm=Ge.createContext(null);function Gu(t){const e=L.useContext(t);return e||H(),e}function $3(t){t.preventDefault()}const Y3=t=>{const e=L.useRef(null),n=K((V=null)=>{e.current=V},[]),r=K(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:a}=Gu(Dd),{type:o,droppableId:c}=Gu(Bm),u=pe(()=>({id:t.draggableId,index:t.index,type:o,droppableId:c}),[t.draggableId,t.index,o,c]),{children:d,draggableId:p,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:A,isClone:D,mapped:R,dropAnimationFinished:_}=t;if(!D){const V=pe(()=>({descriptor:u,registry:a,getDraggableRef:r,canDragInteractiveElements:A,shouldRespectForcePress:m,isEnabled:f}),[u,a,r,A,m,f]);q3(V)}const b=pe(()=>f?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:$3}:null,[i,s,p,f]),T=K(V=>{R.type==="DRAGGING"&&R.dropping&&V.propertyName==="transform"&&Qu.flushSync(_)},[_,R]),N=pe(()=>{const V=F3(R),w=R.type==="DRAGGING"&&R.dropping?T:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":p,style:V,onTransitionEnd:w},dragHandleProps:b}},[i,b,p,R,T,n]),M=pe(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return Ge.createElement(Ge.Fragment,null,d(N,R.snapshot,M))};var mA=(t,e)=>t===e,yA=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const K3=t=>t.combine?t.combine.draggableId:null,Q3=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function W3(){const t=dt((i,s)=>({x:i,y:s})),e=dt((i,s,a=null,o=null,c=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:a,combineWith:o,combineTargetFor:null})),n=dt((i,s,a,o,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:s,offset:i,dimension:a,forceShouldAnimate:d,snapshot:e(s,o,c,u,null)}}));return(i,s)=>{if(el(i)){if(i.critical.draggable.id!==s.draggableId)return null;const a=i.current.client.offset,o=i.dimensions.draggables[s.draggableId],c=tn(i.impact),u=Q3(i.impact),d=i.forceShouldAnimate;return n(t(a.x,a.y),i.movementMode,o,s.isClone,c,u,d)}if(i.phase==="DROP_ANIMATING"){const a=i.completed;if(a.result.draggableId!==s.draggableId)return null;const o=s.isClone,c=i.dimensions.draggables[s.draggableId],u=a.result,d=u.mode,p=yA(u),f=K3(u),A={duration:i.dropDuration,curve:Om.drop,moveTo:i.newHomeClientOffset,opacity:f?Zo.opacity.drop:null,scale:f?Zo.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:c,dropping:A,draggingOver:p,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:e(d,o,p,f,A)}}}return null}}function vA(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const X3={mapped:{type:"SECONDARY",offset:ht,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:vA(null)}};function Z3(){const t=dt((a,o)=>({x:a,y:o})),e=dt(vA),n=dt((a,o=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:e(o)}})),r=a=>a?n(ht,a,!0):null,i=(a,o,c,u)=>{const d=c.displaced.visible[a],p=!!(u.inVirtualList&&u.effected[a]),f=Ad(c),m=f&&f.draggableId===a?o:null;if(!d){if(!p)return r(m);if(c.displaced.invisible[a])return null;const R=pa(u.displacedBy.point),_=t(R.x,R.y);return n(_,m,!0)}if(p)return r(m);const A=c.displacedBy.point,D=t(A.x,A.y);return n(D,m,d.shouldAnimate)};return(a,o)=>{if(el(a))return a.critical.draggable.id===o.draggableId?null:i(o.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===o.draggableId?null:i(o.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const J3=()=>{const t=W3(),e=Z3();return(r,i)=>t(r,i)||e(r,i)||X3},ej={dropAnimationFinished:Qx},tj=bx(J3,ej,null,{context:Lm,areStatePropsEqual:mA})(Y3);function _A(t){return Gu(Bm).isUsingCloneFor===t.draggableId&&!t.isClone?null:Ge.createElement(tj,t)}function bA(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Ge.createElement(_A,Uu({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const EA=t=>e=>t===e,nj=EA("scroll"),rj=EA("auto"),tb=(t,e)=>e(t.overflowX)||e(t.overflowY),ij=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return tb(n,nj)||tb(n,rj)},sj=()=>!1,TA=t=>t==null?null:t===document.body?sj()?t:null:t===document.documentElement?null:ij(t)?t:TA(t.parentElement);var Ip=t=>({x:t.scrollLeft,y:t.scrollTop});const wA=t=>t?window.getComputedStyle(t).position==="fixed"?!0:wA(t.parentElement):!1;var aj=t=>{const e=TA(t),n=wA(t);return{closestScrollable:e,isFixedOnPage:n}},oj=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:a,closest:o})=>{const c=(()=>{if(!o)return null;const{scrollSize:f,client:m}=o,A=Jx({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:A,diff:{value:ht,displacement:ht}}}})(),u=i==="vertical"?xm:Ox,d=Zs({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:e,client:s,page:a,frame:c,subject:d}};const lj=(t,e)=>{const n=Tx(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,i=n.paddingBox.left-e.scrollLeft,s=r+e.scrollHeight,a=i+e.scrollWidth,c=Em({top:r,right:a,bottom:s,left:i},n.border);return Tm({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var cj=({ref:t,descriptor:e,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:a,shouldClipSubject:o})=>{const c=n.closestScrollable,u=lj(t,c),d=ju(u,r),p=(()=>{if(!c)return null;const m=Tx(c),A={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:ju(m,r),scroll:Ip(c),scrollSize:A,shouldClipSubject:o}})();return oj({descriptor:e,isEnabled:!s,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:i,client:u,page:d,closest:p})};const uj={passive:!1},dj={passive:!0};var nb=t=>t.shouldPublishImmediately?uj:dj;const _c=t=>t&&t.env.closestScrollable||null;function hj(t){const e=L.useRef(null),n=Gu(Dd),r=jm("droppable"),{registry:i,marshal:s}=n,a=lA(t),o=pe(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),c=L.useRef(o),u=pe(()=>dt((N,M)=>{e.current||H();const V={x:N,y:M};s.updateDroppableScroll(o.id,V)}),[o.id,s]),d=K(()=>{const N=e.current;return!N||!N.env.closestScrollable?ht:Ip(N.env.closestScrollable)},[]),p=K(()=>{const N=d();u(N.x,N.y)},[d,u]),f=pe(()=>Ko(p),[p]),m=K(()=>{const N=e.current,M=_c(N);if(N&&M||H(),N.scrollOptions.shouldPublishImmediately){p();return}f()},[f,p]),A=K((N,M)=>{e.current&&H();const V=a.current,w=V.getDroppableRef();w||H();const v=aj(w),x={ref:w,descriptor:o,env:v,scrollOptions:M};e.current=x;const S=cj({ref:w,descriptor:o,env:v,windowScroll:N,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),I=v.closestScrollable;return I&&(I.setAttribute(W_.contextId,n.contextId),I.addEventListener("scroll",m,nb(x.scrollOptions))),S},[n.contextId,o,m,a]),D=K(()=>{const N=e.current,M=_c(N);return N&&M||H(),Ip(M)},[]),R=K(()=>{const N=e.current;N||H();const M=_c(N);e.current=null,M&&(f.cancel(),M.removeAttribute(W_.contextId),M.removeEventListener("scroll",m,nb(N.scrollOptions)))},[m,f]),_=K(N=>{const M=e.current;M||H();const V=_c(M);V||H(),V.scrollTop+=N.y,V.scrollLeft+=N.x},[]),b=pe(()=>({getDimensionAndWatchScroll:A,getScrollWhileDragging:D,dragStopped:R,scroll:_}),[R,A,D,_]),T=pe(()=>({uniqueId:r,descriptor:o,callbacks:b}),[b,o,r]);nn(()=>(c.current=T.descriptor,i.droppable.register(T),()=>{e.current&&R(),i.droppable.unregister(T)}),[b,o,R,T,s,i.droppable]),nn(()=>{e.current&&s.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,s]),nn(()=>{e.current&&s.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,s])}function Jh(){}const rb={width:0,height:0,margin:EV},fj=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?rb:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},pj=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=fj({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?To.placeholder:null}},gj=t=>{const e=L.useRef(null),n=K(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:a}=t,[o,c]=L.useState(t.animate==="open");L.useEffect(()=>o?r!=="open"?(n(),c(!1),Jh):e.current?Jh:(e.current=setTimeout(()=>{e.current=null,c(!1)}),n):Jh,[r,o,n]);const u=K(p=>{p.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),d=pj({isAnimatingOpenOnMount:o,animate:t.animate,placeholder:t.placeholder});return Ge.createElement(t.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:t.innerRef})};var mj=Ge.memo(gj);class yj extends Ge.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const vj=t=>{const e=L.useContext(Dd);e||H();const{contextId:n,isMovementAllowed:r}=e,i=L.useRef(null),s=L.useRef(null),{children:a,droppableId:o,type:c,mode:u,direction:d,ignoreContainerClipping:p,isDropDisabled:f,isCombineEnabled:m,snapshot:A,useClone:D,updateViewportMaxScroll:R,getContainerForClone:_}=t,b=K(()=>i.current,[]),T=K((I=null)=>{i.current=I},[]);K(()=>s.current,[]);const N=K((I=null)=>{s.current=I},[]),M=K(()=>{r()&&R({maxScroll:tA()})},[r,R]);hj({droppableId:o,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:p,getDroppableRef:b});const V=pe(()=>Ge.createElement(yj,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:I,data:O,animate:C})=>Ge.createElement(mj,{placeholder:O,onClose:I,innerRef:N,animate:C,contextId:n,onTransitionEnd:M})),[n,M,t.placeholder,t.shouldAnimatePlaceholder,N]),w=pe(()=>({innerRef:T,placeholder:V,droppableProps:{"data-rfd-droppable-id":o,"data-rfd-droppable-context-id":n}}),[n,o,V,T]),v=D?D.dragging.draggableId:null,x=pe(()=>({droppableId:o,type:c,isUsingCloneFor:v}),[o,v,c]);function S(){if(!D)return null;const{dragging:I,render:O}=D,C=Ge.createElement(_A,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(ee,$)=>O(ee,$,I));return T1.createPortal(C,_())}return Ge.createElement(Bm.Provider,{value:x},a(w,A),S())};function _j(){return document.body||H(),document.body}const ib={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_j},SA=t=>{let e={...t},n;for(n in ib)t[n]===void 0&&(e={...e,[n]:ib[n]});return e},ef=(t,e)=>t===e.droppable.type,sb=(t,e)=>e.draggables[t.draggable.id],bj=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=dt(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=dt((s,a,o,c,u,d)=>{const p=u.descriptor.id;if(u.descriptor.droppableId===s){const A=d?{render:d,dragging:n(u.descriptor)}:null,D={isDraggingOver:o,draggingOverWith:o?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:A}}if(!a)return e;if(!c)return t;const m={isDraggingOver:o,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(s,a)=>{const o=SA(a),c=o.droppableId,u=o.type,d=!o.isDropDisabled,p=o.renderClone;if(el(s)){const f=s.critical;if(!ef(u,f))return e;const m=sb(f,s.dimensions),A=tn(s.impact)===c;return r(c,d,A,A,m,p)}if(s.phase==="DROP_ANIMATING"){const f=s.completed;if(!ef(u,f.critical))return e;const m=sb(f.critical,s.dimensions);return r(c,d,yA(f.result)===c,tn(f.impact)===c,m,p)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const f=s.completed;if(!ef(u,f.critical))return e;const m=tn(f.impact)===c,A=!!(f.impact.at&&f.impact.at.type==="COMBINE"),D=f.critical.droppable.id===c;return m?A?t:e:D?t:e}return e}},Ej={updateViewportMaxScroll:Mk},xA=bx(bj,Ej,(t,e,n)=>({...SA(n),...t,...e}),{context:Lm,areStatePropsEqual:mA})(vj),Tj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),wj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Sj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 13a5.975 5.975 0 013 1.803M15 21a9 9 0 00-9-5.197"})}),xj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),Aj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Ij=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),zm=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),g.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),Hm=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),AA=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),Rj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Cj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),Dj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500 absolute top-0.5 right-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5m-5 7h5.5a3.5 3.5 0 000-7H9.5"})}),Nj=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),g.jsx("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),Oj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),Mj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),Pj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Vj=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m-4-4v12"})}),IA=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 cursor-grab",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M7 2a2 2 0 10.001 4.001A2 2 0 007 2zm0 6a2 2 0 10.001 4.001A2 2 0 007 8zm0 6a2 2 0 10.001 4.001A2 2 0 007 14zm6-8a2 2 0 10-.001-4.001A2 2 0 0013 6zm0 2a2 2 0 10.001 4.001A2 2 0 0013 8zm0 6a2 2 0 10.001 4.001A2 2 0 0013 14z"})}),kj=({participants:t,setParticipants:e,blocks:n,attendance:r,setAttendance:i,selectedDate:s,setSelectedDate:a})=>{const[o,c]=L.useState(null),u=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),d=Array.from({length:u},(T,N)=>N+1),p=["","","","","","",""],m=(new Date(s.getFullYear(),s.getMonth(),1).getDay()+6)%7,A=(T,N)=>{const M=`${T}-${s.getFullYear()}-${s.getMonth()}-${N}`;i(V=>({...V,[M]:!V[M]}))},[D,R]=L.useState([]);L.useEffect(()=>{const T={};Object.keys(r).forEach(M=>{if(!r[M])return;const V=M.split("-");if(V.length!==4)return;const w=V[0];T[w]||(T[w]=[]),T[w].push({year:parseInt(V[1],10),month:parseInt(V[2],10),day:parseInt(V[3],10)})});const N=t.filter(M=>!M.isArchived).map(M=>{const V=M.payments||[],w=V.reduce((q,G)=>{const ie=n.find(it=>it.id===G.blockId),ae=G.trainingCountSnapshot!==void 0?G.trainingCountSnapshot:ie?ie.trainingCount:0;return q+ae},0),v=T[M.id]||[],x=v.length,S=w-x,I=v.filter(q=>q.year===s.getFullYear()&&q.month===s.getMonth()).length,O=V.length>0?V[V.length-1]:null,C=O?n.find(q=>q.id===O.blockId):null,ee=(O==null?void 0:O.blockNameSnapshot)||(C==null?void 0:C.name)||"  ",$=M.subscriptionType==="time"||C&&C.type==="time",z=$&&M.activeUntil&&new Date(M.activeUntil)<new Date().setHours(0,0,0,0);return{...M,blockName:ee,attendedThisMonth:I,remainingSessions:S,isTimeBased:$,isExpired:z}});R(N)},[s,t,n,r]);const _=T=>{a(N=>{const M=new Date(N);return T(M),M})},b=T=>{if(!T.destination)return;const N=Array.from(D),[M]=N.splice(T.source.index,1);N.splice(T.destination.index,0,M);const w=N.map(x=>x.id).map(x=>t.find(S=>S.id===x)).filter(Boolean),v=t.filter(x=>x.isArchived);e([...w,...v])};return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:" "}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-700",children:[g.jsx("h2",{className:"md:hidden text-xl font-bold text-center capitalize text-white mb-4 w-full order-1",children:s.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),g.jsxs("div",{className:"flex w-full md:w-auto justify-between md:justify-start items-center order-2 md:order-1 md:space-x-2",children:[g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>_(T=>T.setFullYear(T.getFullYear()-1)),className:"px-3 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 font-bold transition-colors",children:""}),g.jsx("button",{onClick:()=>_(T=>T.setMonth(T.getMonth()-1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"<"})]}),g.jsx("h2",{className:"hidden md:block text-2xl font-bold text-center capitalize text-white w-48",children:s.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>_(T=>T.setMonth(T.getMonth()+1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:">"}),g.jsx("button",{onClick:()=>_(T=>T.setFullYear(T.getFullYear()+1)),className:"px-3 py-2 bg-gray-700 text-white rounded-lg hover:bg-orange-600 font-bold transition-colors",children:""})]})]})]}),g.jsx(gA,{onDragEnd:b,children:g.jsx(xA,{droppableId:"calendar-list",children:T=>g.jsxs("div",{className:"space-y-4",...T.droppableProps,ref:T.innerRef,children:[D.map((N,M)=>{const V=o===N.id,w=N.payments||[];return g.jsx(bA,{draggableId:String(N.id),index:M,children:(v,x)=>g.jsxs("div",{ref:v.innerRef,...v.draggableProps,className:`bg-gray-800 rounded-lg shadow-lg overflow-hidden border border-gray-700 transition-colors ${x.isDragging?"border-teal-500 shadow-2xl":"hover:border-teal-500"}`,children:[g.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>c(V?null:N.id),children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{...v.dragHandleProps,onClick:S=>S.stopPropagation(),className:"cursor-grab p-1 text-gray-500 hover:text-white",children:g.jsx(IA,{})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-white",children:N.name}),g.jsx("p",{className:"text-sm text-gray-300",children:N.blockName})]})]}),g.jsxs("div",{className:"text-right flex-grow pr-4",children:[g.jsxs("p",{className:"text-sm font-semibold text-gray-300",children:["   : ",N.attendedThisMonth]}),N.isTimeBased?g.jsxs("p",{className:`text-sm font-bold ${N.isExpired?"text-red-400":"text-green-400"}`,children:[N.isExpired?": ":" : ",(()=>{if(!N.activeUntil)return"---";try{const[S,I,O]=N.activeUntil.split("-");return S&&I&&O?`${O}.${I}.${S}`:new Date(N.activeUntil).toLocaleDateString("ru-RU")}catch{return N.activeUntil||"---"}})()]}):g.jsxs("p",{className:"text-sm font-bold text-orange-400",children:[" : ",N.remainingSessions]})]}),g.jsx("div",{className:`ml-4 transition-transform duration-300 text-white ${V?"transform rotate-180":""}`,children:g.jsx(Cj,{})})]}),V&&g.jsxs("div",{className:"p-4 border-t border-gray-700 bg-gray-900 cursor-default",onClick:S=>S.stopPropagation(),children:[g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs font-bold text-gray-400 mb-2",children:p.map(S=>g.jsx("div",{children:S},S))}),g.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:m}).map((S,I)=>g.jsx("div",{},`empty-${I}`)),d.map(S=>{const I=`${N.id}-${s.getFullYear()}-${s.getMonth()}-${S}`,O=!!r[I],C=w.some(ee=>{const $=new Date(ee.paymentDate);return $.getFullYear()===s.getFullYear()&&$.getMonth()===s.getMonth()&&$.getDate()===S});return g.jsxs("div",{className:`relative flex items-center justify-center p-2 rounded-lg cursor-pointer transition-colors ${O?"bg-orange-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:ee=>{ee.stopPropagation(),A(N.id,S)},children:[C&&g.jsx(Dj,{}),g.jsx("span",{className:"font-bold text-sm",children:S})]},S)})]})]})]})},N.id)}),T.placeholder]})})})]})},qu=({show:t,onClose:e,title:n,children:r})=>t?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center",children:g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md border border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-xl font-semibold text-white",children:n}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),g.jsx("div",{children:r})]})}):null,Fm=({show:t,onClose:e,onConfirm:n,title:r,children:i})=>t?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center",children:g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm border border-gray-700",children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:r}),g.jsx("div",{className:"text-gray-300 mb-6",children:i}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:""}),g.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:""})]})]})}):null,Lj=({show:t,onClose:e,participant:n,onUpdateParticipant:r})=>{const[i,s]=L.useState(null),[a,o]=L.useState({}),[c,u]=L.useState(null);if(!n)return null;const d=n.payments||[],p=[...d].sort((_,b)=>new Date(b.paymentDate)-new Date(_.paymentDate)),f=_=>{u(_)},m=()=>{if(!c)return;const _=c;let b;const T=d.indexOf(_);T>-1?(b=[...d],b.splice(T,1)):_.paymentId!==void 0&&_.paymentId!==null?b=d.filter(N=>N.paymentId!=_.paymentId):b=d.filter(N=>N.paymentDate!==_.paymentDate||N.costSnapshot!=_.costSnapshot),r({...n,payments:b||d}),u(null)},A=_=>{s(_.paymentId),o({paymentDate:_.paymentDate,costSnapshot:_.costSnapshot!==void 0?_.costSnapshot:0,trainingCountSnapshot:_.trainingCountSnapshot!==void 0?_.trainingCountSnapshot:0,blockNameSnapshot:_.blockNameSnapshot||"/"})},D=()=>{s(null),o({})},R=_=>{const b=d.map(T=>T.paymentId===_?{...T,paymentDate:a.paymentDate,costSnapshot:parseFloat(a.costSnapshot),trainingCountSnapshot:parseInt(a.trainingCountSnapshot),blockNameSnapshot:a.blockNameSnapshot}:T);r({...n,payments:b}),s(null)};return g.jsxs(qu,{show:t,onClose:e,title:` : ${n.name}`,children:[g.jsx("div",{className:"overflow-x-auto",children:p.length===0?g.jsx("p",{className:"text-gray-400 text-center py-4",children:"  "}):g.jsxs("table",{className:"min-w-full text-left text-sm text-gray-300",children:[g.jsx("thead",{className:"bg-gray-700 text-gray-100 uppercase font-medium",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-2",children:""}),g.jsx("th",{className:"px-4 py-2",children:""}),g.jsx("th",{className:"px-4 py-2",children:""}),g.jsx("th",{className:"px-4 py-2",children:""}),g.jsx("th",{className:"px-4 py-2 text-right",children:""})]})}),g.jsx("tbody",{className:"divide-y divide-gray-700",children:p.map(_=>{const b=i===_.paymentId;return g.jsx("tr",{className:"hover:bg-gray-700",children:b?g.jsxs(g.Fragment,{children:[g.jsx("td",{className:"px-4 py-2",children:g.jsx("input",{type:"date",value:a.paymentDate,onChange:T=>o({...a,paymentDate:T.target.value}),className:"w-full bg-gray-600 rounded p-1 text-white border border-gray-500"})}),g.jsx("td",{className:"px-4 py-2",children:g.jsx("input",{type:"text",value:a.blockNameSnapshot,onChange:T=>o({...a,blockNameSnapshot:T.target.value}),className:"w-full bg-gray-600 rounded p-1 text-white border border-gray-500"})}),g.jsx("td",{className:"px-4 py-2",children:g.jsx("input",{type:"number",value:a.costSnapshot,onChange:T=>o({...a,costSnapshot:T.target.value}),className:"w-20 bg-gray-600 rounded p-1 text-white border border-gray-500"})}),g.jsx("td",{className:"px-4 py-2",children:g.jsx("input",{type:"number",value:a.trainingCountSnapshot,onChange:T=>o({...a,trainingCountSnapshot:T.target.value}),className:"w-16 bg-gray-600 rounded p-1 text-white border border-gray-500"})}),g.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[g.jsx("button",{onClick:()=>R(_.paymentId),className:"text-green-400 hover:text-green-300",children:"."}),g.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-300",children:"."})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:new Date(_.paymentDate).toLocaleDateString("ru-RU")}),g.jsx("td",{className:"px-4 py-2",children:_.blockNameSnapshot||"/"}),g.jsxs("td",{className:"px-4 py-2",children:[_.costSnapshot!==void 0?_.costSnapshot:"---"," "]}),g.jsx("td",{className:"px-4 py-2",children:_.trainingCountSnapshot!==void 0?_.trainingCountSnapshot:"---"}),g.jsxs("td",{className:"px-4 py-2 text-right whitespace-nowrap",children:[g.jsx("button",{onClick:()=>A(_),className:"text-blue-400 hover:text-blue-500 mr-3",title:"",children:g.jsx(zm,{})}),g.jsx("button",{onClick:()=>f(_),className:"text-red-400 hover:text-red-500",title:"",children:g.jsx(Hm,{})})]})]})},_.paymentId)})})]})}),g.jsx("div",{className:"mt-6 flex justify-end",children:g.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:""})}),g.jsxs(Fm,{show:!!c,onClose:()=>u(null),onConfirm:m,title:" ?",children:[g.jsx("p",{children:" ,     ?   ."}),g.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[": ",c&&new Date(c.paymentDate).toLocaleDateString("ru-RU")]}),g.jsxs("p",{className:"text-sm text-gray-400",children:[": ",c&&c.costSnapshot," "]})]})]})},jj=({participants:t,setParticipants:e,blocks:n,attendance:r,setAttendance:i,addNotification:s})=>{const[a,o]=L.useState(!1),[c,u]=L.useState(!1),[d,p]=L.useState(null),[f,m]=L.useState(null),[A,D]=L.useState(null),[R,_]=L.useState("active"),[b,T]=L.useState(""),[N,M]=L.useState(!1),[V,w]=L.useState({name:""}),[v,x]=L.useState({blockId:"",paymentDate:""}),[S,I]=L.useState(""),O=()=>{w({name:""}),o(!0)},C=Q=>{p(Q),I(Q.name);const se=new Date().toISOString().split("T")[0];x({blockId:"",paymentDate:se,isCustom:!1,customAmount:"",customCount:""}),u(!0)},ee=()=>{o(!1),u(!1),p(null)},$=Q=>{Q.preventDefault(),e(se=>se.map(st=>{if(st.id===d.id){let Me={...st,name:S};if(v.isCustom&&v.customAmount&&v.customCount){const Pe={...v,blockId:"custom",paymentId:Date.now(),costSnapshot:parseFloat(v.customAmount),trainingCountSnapshot:parseInt(v.customCount),blockNameSnapshot:" "};Me.payments=[...st.payments||[],Pe]}else if(v.blockId){const Pe=n.find(Ce=>Ce.id===parseInt(v.blockId)),Hn={...v,blockId:parseInt(v.blockId),paymentId:Date.now(),costSnapshot:Pe?Pe.cost:0,trainingCountSnapshot:Pe?Pe.trainingCount:0,blockNameSnapshot:Pe?Pe.name:"Unknown Block"};if(Me.payments=[...st.payments||[],Hn],Pe&&Pe.type==="time"){const Ce=v.paymentDate||new Date().toISOString().split("T")[0],[Gt,ya,va]=Ce.split("-").map(Pl=>parseInt(Pl,10)),Ol=new Date(Gt,ya-1,va),ui=new Date(Ol);ui.setDate(ui.getDate()+(parseInt(Pe.duration)||0));const Od=ui.getFullYear(),Ml=String(ui.getMonth()+1).padStart(2,"0"),_a=String(ui.getDate()).padStart(2,"0");Me.activeUntil=`${Od}-${Ml}-${_a}`,Me.subscriptionType="time"}}return Me}return st})),s(" ","success"),ee()},z=Q=>{Q.preventDefault(),e(se=>[...se,{...V,id:Date.now(),payments:[],isArchived:!1}]),s(" ","success"),ee()},q=(Q,se)=>{e(st=>st.map(Me=>Me.id===Q?{...Me,isArchived:se}:Me)),s(se?"   ":" ","info")},G=Q=>{D(Q),M(!0)},ie=Q=>{e(se=>se.map(st=>st.id===Q.id?Q:st)),D(Q)},ae=()=>{f&&(e(Q=>Q.filter(se=>se.id!==f.id)),m(null),s("  ","warning"))},it=Q=>{if(!Q.destination||b||R!=="active")return;const se=Array.from(t),[st]=se.splice(Q.source.index,1);se.splice(Q.destination.index,0,st),e(se)},Xe=Array.isArray(t)?t:[],Ee=Array.isArray(n)?n:[],jt=Xe.filter(Q=>Q?R==="active"?!Q.isArchived:R==="archived"?Q.isArchived:!0:!1).filter(Q=>(Q.name||"").toLowerCase().includes(b.toLowerCase())),Ze=R==="active"&&!b;return g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0",children:[g.jsx("h1",{className:"text-3xl font-bold text-white text-center md:text-left",children:" "}),g.jsx("button",{onClick:O,className:"w-full md:w-auto px-5 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:" "})]}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-4 border-b border-gray-700 pb-2",children:[g.jsxs("div",{className:"flex space-x-4",children:[g.jsx("button",{className:`py-2 px-4 font-medium focus:outline-none ${R==="active"?"text-orange-500 border-b-2 border-orange-500":"text-gray-400 hover:text-gray-200"}`,onClick:()=>_("active"),children:""}),g.jsx("button",{className:`py-2 px-4 font-medium focus:outline-none ${R==="archived"?"text-orange-500 border-b-2 border-orange-500":"text-gray-400 hover:text-gray-200"}`,onClick:()=>_("archived"),children:""})]}),g.jsx("div",{className:"w-full md:w-64 mt-4 md:mt-0",children:g.jsx("input",{type:"text",placeholder:" ...",value:b,onChange:Q=>T(Q.target.value),className:"w-full p-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:ring-orange-500 focus:border-orange-500"})})]}),g.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-x-auto border border-gray-700",children:g.jsx(gA,{onDragEnd:it,children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[Ze&&g.jsx("th",{className:"px-2 py-3 w-8"})," ",g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:""}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"  "}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:" "}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:""})]})}),g.jsx(xA,{droppableId:"participants-list",isDropDisabled:!Ze,children:Q=>g.jsxs("tbody",{className:"divide-y divide-gray-700",...Q.droppableProps,ref:Q.innerRef,children:[jt.map((se,st)=>{const Me=se.payments&&Array.isArray(se.payments)&&se.payments.length>0?se.payments[se.payments.length-1]:null,Pe=Me?Ee.find(Ce=>Ce.id===Me.blockId):null,Hn=(Me==null?void 0:Me.blockNameSnapshot)||(Pe==null?void 0:Pe.name)||"N/A";return g.jsx(bA,{draggableId:String(se.id),index:st,isDragDisabled:!Ze,children:(Ce,Gt)=>g.jsxs("tr",{ref:Ce.innerRef,...Ce.draggableProps,className:`hover:bg-gray-700 ${Gt.isDragging?"bg-gray-700 shadow-xl border border-teal-500":""}`,children:[Ze&&g.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-center",...Ce.dragHandleProps,children:g.jsx("div",{className:"flex justify-center items-center h-full",children:g.jsx(IA,{})})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:se.name}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:Me?new Date(Me.paymentDate).toLocaleDateString("ru-RU"):"---"}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[g.jsx("div",{children:Hn}),se.activeUntil&&g.jsxs("div",{className:`text-xs mt-1 ${new Date(se.activeUntil)>=new Date().setHours(0,0,0,0)?"text-green-400":"text-red-400"}`,children:[": ",new Date(se.activeUntil).toLocaleDateString("ru-RU")]})]}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[g.jsx("button",{onClick:()=>G(se),className:"text-blue-400 hover:text-blue-500 mr-4",title:" ",children:g.jsx(Mj,{})}),g.jsx("button",{onClick:()=>C(se),className:"text-orange-400 hover:text-orange-500 mr-4",children:g.jsx(zm,{})}),R==="active"?g.jsx("button",{onClick:()=>q(se.id,!0),className:"text-red-400 hover:text-red-500",title:"",children:g.jsx(Nj,{})}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>q(se.id,!1),className:"text-green-400 hover:text-green-500 mr-4",title:"",children:g.jsx(Oj,{})}),g.jsx("button",{onClick:()=>m(se),className:"text-red-400 hover:text-red-500",title:" ",children:g.jsx(Hm,{})})]})]})]})},se.id)}),Q.placeholder]})})]})})}),g.jsx(qu,{show:a,onClose:ee,title:" ",children:g.jsxs("form",{onSubmit:z,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"name",value:V.name,onChange:Q=>w({name:Q.target.value}),placeholder:"",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2 bg-gray-700 rounded-lg",children:""}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:""})]})]})}),g.jsx(qu,{show:c,onClose:ee,title:" ",children:g.jsxs("form",{onSubmit:$,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:""}),g.jsx("input",{type:"text",value:S,onChange:Q=>I(Q.target.value),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0})]}),g.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"  ()"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center mb-2",children:[g.jsx("input",{type:"checkbox",id:"isCustom",checked:v.isCustom||!1,onChange:Q=>x({...v,isCustom:Q.target.checked}),className:"w-4 h-4 text-orange-600 bg-gray-700 border-gray-600 rounded focus:ring-orange-500 ring-offset-gray-800"}),g.jsx("label",{htmlFor:"isCustom",className:"ml-2 text-sm text-gray-300",children:"   "})]}),v.isCustom?g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:" ()"}),g.jsx("input",{type:"number",value:v.customAmount,onChange:Q=>x({...v,customAmount:Q.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",placeholder:"0"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:""}),g.jsx("input",{type:"number",value:v.customCount,onChange:Q=>x({...v,customCount:Q.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",placeholder:"0"})]})]}):g.jsxs("select",{name:"blockId",value:v.blockId,onChange:Q=>x({...v,blockId:Q.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",children:[g.jsx("option",{value:"",children:" "}),Ee.map(Q=>g.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),(v.blockId||v.isCustom&&v.customAmount&&v.customCount)&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-300",children:" "}),g.jsx("input",{type:"date",id:"paymentDate",name:"paymentDate",value:v.paymentDate,onChange:Q=>x({...v,paymentDate:Q.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500"})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2 bg-gray-700 rounded-lg",children:""}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:""})]})]})}),g.jsxs(Fm,{show:!!f,onClose:()=>m(null),onConfirm:ae,title:" ?",children:[g.jsxs("p",{children:[" ,      ",g.jsx("strong",{children:f==null?void 0:f.name}),"?"]}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"   ."})]}),g.jsx(Lj,{show:N,onClose:()=>M(!1),participant:A,onUpdateParticipant:ie})]})},Uj=({blocks:t,setBlocks:e,participants:n,setParticipants:r,rentAmount:i,setRentAmount:s})=>{const[a,o]=L.useState(!1),[c,u]=L.useState(null),[d,p]=L.useState(null),[f,m]=L.useState({name:"",cost:"",trainingCount:""}),A=(M=null)=>{u(M),m(M?{...M}:{name:"",cost:"",trainingCount:""}),o(!0)},D=()=>{o(!1),u(null)},R=M=>{const{name:V,value:w}=M.target;m(v=>({...v,[V]:w}))},_=M=>{M.preventDefault();const V={...f,cost:parseFloat(f.cost),trainingCount:f.type==="time"?0:parseInt(f.trainingCount,10),duration:f.type==="time"?parseInt(f.duration,10):0,type:f.type||"count"};e(c?w=>w.map(v=>v.id===c.id?{...V,id:c.id}:v):w=>[...w,{...V,id:Date.now()}]),D()},b=M=>{p(M)},T=()=>{e(M=>M.filter(V=>V.id!==d.id)),p(null)},N=M=>{const V=parseFloat(M.target.value);s(isNaN(V)?0:V)};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0",children:[g.jsx("h1",{className:"text-3xl font-bold text-white text-center md:text-left",children:" "}),g.jsx("button",{onClick:()=>A(),className:"w-full md:w-auto px-5 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:" "})]}),g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-700",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"  ( )"}),g.jsx("input",{type:"number",value:i,onChange:N,className:"w-full md:w-1/3 p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(M=>g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors relative group",children:[g.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:M.name}),g.jsxs("p",{className:"text-gray-300",children:[": ",g.jsxs("span",{className:"font-semibold text-orange-400",children:[M.cost," "]})]}),M.type==="time"?g.jsxs("p",{className:"text-gray-300",children:[": ",g.jsxs("span",{className:"font-semibold text-blue-400",children:[M.duration," ."]})]}):g.jsxs("p",{className:"text-gray-300",children:[" : ",g.jsx("span",{className:"font-semibold text-teal-400",children:M.trainingCount})]}),g.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>A(M),className:"text-gray-400 hover:text-white",children:g.jsx(zm,{})}),g.jsx("button",{onClick:()=>b(M),className:"text-red-400 hover:text-red-500",children:g.jsx(Hm,{})})]})]},M.id))}),g.jsx(qu,{show:a,onClose:D,title:c?" ":" ",children:g.jsxs("form",{onSubmit:_,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"name",value:f.name,onChange:R,placeholder:" ",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsx("input",{type:"number",name:"cost",value:f.cost,onChange:R,placeholder:"",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsxs("div",{className:"flex space-x-4 mb-2",children:[g.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"type",value:"count",checked:!f.type||f.type==="count",onChange:R,className:"text-orange-500 focus:ring-orange-500"}),g.jsx("span",{className:"text-gray-300",children:""})]}),g.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"type",value:"time",checked:f.type==="time",onChange:R,className:"text-orange-500 focus:ring-orange-500"}),g.jsx("span",{className:"text-gray-300",children:""})]})]}),f.type==="time"?g.jsx("input",{type:"number",name:"duration",value:f.duration||"",onChange:R,placeholder:" ()",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}):g.jsx("input",{type:"number",name:"trainingCount",value:f.trainingCount||"",onChange:R,placeholder:" ",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-700 rounded-lg",children:""}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:""})]})]})}),g.jsxs(Fm,{show:d!==null,onClose:()=>p(null),onConfirm:T,title:" ?",children:[' ,     "',d==null?void 0:d.name,'"?']})]})},Bj=({type:t,participants:e,blocks:n,attendance:r,rentAmount:i,onBack:s})=>{const[a,o]=L.useState(new Date().getMonth()),[c,u]=L.useState(new Date().getFullYear()),d=["","","","","","","","","","","",""],f=(()=>{if(t==="income"){const m=e.flatMap(D=>(D.payments||[]).map(R=>({...R,participantName:D.name}))).filter(D=>{const R=new Date(D.paymentDate);return R.getMonth()===a&&R.getFullYear()===c}).sort((D,R)=>new Date(D.paymentDate)-new Date(R.paymentDate)),A=m.reduce((D,R)=>{const _=n.find(T=>T.id===R.blockId),b=R.costSnapshot!==void 0?R.costSnapshot:_?_.cost:0;return D+b},0);return{items:m,total:A}}else if(t==="attendance"){const m=e.map(D=>{const R=Object.keys(r).filter(_=>{const b=_.split("-");return b[0]===String(D.id)&&parseInt(b[1])===c&&parseInt(b[2])===a&&r[_]}).length;return{name:D.name,visits:R}}).filter(D=>D.visits>0).sort((D,R)=>R.visits-D.visits),A=m.reduce((D,R)=>D+R.visits,0);return{items:m,total:A}}return{items:[],total:0}})();return g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[g.jsxs("button",{onClick:s,className:"flex items-center mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:[g.jsx(AA,{}),"  "]}),g.jsxs("div",{className:"flex space-x-4 mb-6",children:[g.jsx("select",{value:a,onChange:m=>o(parseInt(m.target.value)),className:"p-2 bg-gray-700 text-white rounded-lg border border-gray-600",children:d.map((m,A)=>g.jsx("option",{value:A,children:m},A))}),g.jsx("select",{value:c,onChange:m=>u(parseInt(m.target.value)),className:"p-2 bg-gray-700 text-white rounded-lg border border-gray-600",children:Array.from({length:5},(m,A)=>new Date().getFullYear()-2+A).map(m=>g.jsx("option",{value:m,children:m},m))})]}),g.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:t==="income"?"  ":"  "}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsx("tr",{children:t==="income"?g.jsxs(g.Fragment,{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:""}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:""}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:""}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:""})]}):g.jsxs(g.Fragment,{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:""}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:""})]})})}),g.jsx("tbody",{className:"divide-y divide-gray-700",children:f.items.map((m,A)=>{if(t==="income"){const D=n.find(b=>b.id===m.blockId),R=m.costSnapshot!==void 0?m.costSnapshot:D?D.cost:0,_=m.blockNameSnapshot||(D?D.name:"/");return g.jsxs("tr",{className:"hover:bg-gray-700",children:[g.jsx("td",{className:"px-6 py-4 text-sm text-gray-300",children:new Date(m.paymentDate).toLocaleDateString("ru-RU")}),g.jsx("td",{className:"px-6 py-4 text-sm font-medium text-white",children:m.participantName}),g.jsx("td",{className:"px-6 py-4 text-sm text-gray-300",children:_}),g.jsxs("td",{className:"px-6 py-4 text-sm text-right font-bold text-green-500",children:[R," "]})]},A)}else return g.jsxs("tr",{className:"hover:bg-gray-700",children:[g.jsx("td",{className:"px-6 py-4 text-sm font-medium text-white",children:m.name}),g.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-300",children:m.visits})]},A)})}),g.jsx("tfoot",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("td",{colSpan:t==="income"?3:1,className:"px-6 py-4 text-right text-sm font-bold text-gray-300 uppercase",children:":"}),g.jsx("td",{className:`px-6 py-4 text-right text-sm font-extrabold ${t==="income"?"text-green-500":"text-white"}`,children:t==="income"?`${f.total} `:f.total})]})})]})})]})},zj=({participants:t,blocks:e,attendance:n,rentAmount:r})=>{const[i,s]=L.useState("list");if(i!=="list")return g.jsx(Bj,{type:i,participants:t,blocks:e,attendance:n,rentAmount:r,onBack:()=>s("list")});const a=new Date().getMonth(),o=new Date().getFullYear(),c=t.reduce((d,p)=>d+(p.payments||[]).filter(f=>{const m=new Date(f.paymentDate);return m.getMonth()===a&&m.getFullYear()===o}).reduce((f,m)=>{const A=e.find(R=>R.id===m.blockId),D=m.costSnapshot!==void 0?m.costSnapshot:A?A.cost:0;return f+D},0),0),u=Object.keys(n).filter(d=>{const p=d.split("-");if(p.length!==4)return!1;const f=parseInt(p[0],10),m=parseInt(p[1],10),A=parseInt(p[2],10),D=t.some(R=>R.id===f);return m===o&&A===a&&n[d]&&D}).length;return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:""}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{onClick:()=>s("income"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" "}),g.jsxs("p",{className:"text-gray-400 mt-2",children:["   : ",g.jsxs("span",{className:"text-green-500 font-bold",children:[c," "]})]})]}),g.jsxs("div",{onClick:()=>s("attendance"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"  "}),g.jsxs("p",{className:"text-gray-400 mt-2",children:["   : ",g.jsx("span",{className:"text-orange-500 font-bold",children:u})]})]})]})]})},Hj=({participants:t,blocks:e,attendance:n,rentAmount:r,selectedDate:i,setSelectedDate:s})=>{const[a,o]=L.useState("overview"),[c,u]=L.useState(""),d=M=>{u(M),o("details")},p=M=>{s(V=>{const w=new Date(V);return M(w),w})},f=()=>{const M=i.getFullYear();return Array.from({length:12},(V,w)=>{let v=0;const x=t.reduce((O,C)=>{const ee=C.payments||[];let $=0,z=0;ee.forEach(ie=>{const ae=e.find(it=>it.id===ie.blockId);ae&&($+=ae.cost,z+=ae.trainingCount)});const q=z>0?$/z:0,G=Object.keys(n).filter(ie=>{const ae=ie.split("-");return ae.length===4&&ae[0]===String(C.id)&&n[ie]&&parseInt(ae[1],10)===M&&parseInt(ae[2],10)===w}).length;return v+=G,O+G*q},0),S=t.reduce((O,C)=>{const ee=(C.payments||[]).filter($=>{const z=new Date($.paymentDate);return z.getFullYear()===M&&z.getMonth()===w});return O+ee.reduce(($,z)=>{var G;const q=z.costSnapshot||((G=e.find(ie=>ie.id===z.blockId))==null?void 0:G.cost)||0;return $+q},0)},0),I=typeof r=="number"&&r>0?r:5e4;return{month:new Date(M,w).toLocaleString("ru-RU",{month:"short"}),income:S-I,netProfit:x-I,attendedCount:v}})},m=()=>{const M=i.getFullYear(),V={};return t.forEach(w=>{(w.payments||[]).forEach(v=>{var S,I;if(new Date(v.paymentDate).getFullYear()===M){const O=v.blockId,C=v.blockNameSnapshot||((S=e.find($=>$.id===O))==null?void 0:S.name)||" ",ee=v.costSnapshot||((I=e.find($=>$.id===O))==null?void 0:I.cost)||0;V[C]||(V[C]={count:0,totalIncome:0}),V[C].count+=1,V[C].totalIncome+=ee}})}),Object.entries(V).map(([w,v])=>({name:w,...v})).sort((w,v)=>v.count-w.count)},A=f(),D=m(),R=A.reduce((M,V)=>V.netProfit>0?M+V.netProfit:M,0),_=A.reduce((M,V)=>V.income>0?M+V.income:M,0),b=A.reduce((M,V)=>M+V.attendedCount,0),T=Math.max(...A.flatMap(M=>[M.income,M.netProfit,M.attendedCount]),0),N=Math.min(...A.flatMap(M=>[M.income,M.netProfit]),0);if(a==="details"){let M="",V=null,w=null;if(c==="blockPopularity"){M=`   ${i.getFullYear()} `;const v=Math.max(...D.map(x=>x.count),0);V=g.jsxs("div",{className:"w-full p-6 pt-10 border border-gray-700 rounded-lg bg-gray-900/50 flex flex-col space-y-6",children:[D.map((x,S)=>{const I=v>0?x.count/v*100:0;return g.jsxs("div",{className:"relative group",children:[g.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-1 font-medium",children:[g.jsx("span",{children:x.name}),g.jsxs("span",{className:"text-orange-400 font-bold",children:[x.count," ."]})]}),g.jsx("div",{className:"w-full h-8 bg-gray-700 rounded-full overflow-hidden shadow-inner relative",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400 rounded-full relative transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(251,146,60,0.5)] group-hover:shadow-[0_0_15px_rgba(251,146,60,0.8)]",style:{width:`${I}%`},children:g.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-white/20"})})}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[": ",g.jsxs("span",{className:"text-gray-400",children:[x.totalIncome.toLocaleString()," "]})]})]},S)}),D.length===0&&g.jsx("div",{className:"text-center text-gray-500 py-10",children:"      "})]}),w=g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:""}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:" ()"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:""})]})}),g.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:D.map((x,S)=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:x.name}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-orange-400",children:x.count}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-300",children:[x.totalIncome.toLocaleString()," "]})]},S))})]})}else{let v="",x=0,S="",I={};switch(c){case"netProfitByMonth":M=`     ${i.getFullYear()} `,v="netProfit",x=R,S=" ():",I={pos:{from:"from-emerald-400",to:"to-emerald-600",top:"bg-emerald-300",side:"bg-emerald-700",shadow:"rgba(52,211,153,0.5)",text:"text-emerald-400"},neg:{from:"from-rose-500",to:"to-rose-700",top:"bg-rose-400",side:"bg-rose-800",shadow:"rgba(244,63,94,0.5)",text:"text-rose-400"}};break;case"attendanceByMonth":M=`    ${i.getFullYear()} `,v="attendedCount",x=b,S=" :",I={pos:{from:"from-cyan-400",to:"to-blue-600",top:"bg-cyan-300",side:"bg-blue-700",shadow:"rgba(34,211,238,0.5)",text:"text-cyan-400"},neg:{from:"from-gray-500",to:"to-gray-700",top:"bg-gray-400",side:"bg-gray-800",shadow:"rgba(156,163,175,0.5)",text:"text-gray-400"}};break;default:M=` ()     ${i.getFullYear()} `,v="income",x=_,S=" ():",I={pos:{from:"from-teal-400",to:"to-teal-600",top:"bg-teal-300",side:"bg-teal-700",shadow:"rgba(45,212,191,0.5)",text:"text-teal-400"},neg:{from:"from-rose-500",to:"to-rose-700",top:"bg-rose-400",side:"bg-rose-800",shadow:"rgba(244,63,94,0.5)",text:"text-rose-400"}}}V=g.jsxs("div",{className:"w-full h-96 p-4 pt-10 border border-gray-700 rounded-lg flex justify-between items-center relative bg-gray-900/50",style:{minWidth:"600px"},children:[g.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-gray-700/50 dashed"}),A.map((O,C)=>{const ee=O[v],$=ee<0,z=c==="attendanceByMonth"?Math.max(...A.map(it=>it.attendedCount),10):Math.max(Math.abs(N),T,r),q=z===0?0:Math.abs(ee)/z*100,G=$?I.neg:I.pos,ie=`bg-gradient-to-b ${G.from} ${G.to}`,ae=`shadow-[0_0_15px_${G.shadow}]`;return g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center h-full relative px-1 group perspective-[1000px]",children:[g.jsx("div",{className:`w-full h-1/2 flex flex-col ${$?"justify-start":"justify-end"} items-center`,children:!$&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:`text-xs font-bold ${G.text} mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 absolute -top-6`,children:ee.toLocaleString("ru-RU")}),g.jsxs("div",{className:`w-5/6 relative transition-all duration-300 ease-out group-hover:-translate-y-2 group-hover:scale-105 ${ae}`,style:{height:`${q===0?1:q}%`},children:[g.jsx("div",{className:`absolute inset-0 ${ie} z-10`}),g.jsx("div",{className:`absolute top-0 left-0 w-full h-4 ${G.top} transform -skew-x-[45deg] -translate-y-4 origin-bottom-left z-0 brightness-110`}),g.jsx("div",{className:`absolute top-0 right-0 w-4 h-full ${G.side} transform -skew-y-[45deg] translate-x-4 origin-top-left z-0 brightness-90`})]})]})}),g.jsx("div",{className:`w-full h-1/2 flex flex-col ${$?"justify-start":"justify-end"} items-center`,children:$&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`w-5/6 relative transition-all duration-300 ease-out group-hover:translate-y-2 group-hover:scale-105 ${ae}`,style:{height:`${q}%`},children:[g.jsx("div",{className:`absolute inset-0 ${ie} z-10`}),g.jsx("div",{className:`absolute top-0 left-0 w-full h-4 ${G.top} transform -skew-x-[45deg] -translate-y-4 origin-bottom-left z-0 brightness-90`}),g.jsx("div",{className:`absolute top-0 right-0 w-4 h-full ${G.side} transform -skew-y-[45deg] translate-x-4 origin-top-left z-0 brightness-90`})]}),g.jsx("span",{className:`text-xs font-bold ${G.text} mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 absolute -bottom-6`,children:ee.toLocaleString("ru-RU")})]})}),g.jsx("span",{className:"absolute -bottom-2 text-xs font-medium text-gray-500 group-hover:text-white transition-colors",children:O.month.toUpperCase()})]},C)})]}),w=g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:""}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:c==="attendanceByMonth"?" ()":""})]})}),g.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:A.map((O,C)=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:new Date(i.getFullYear(),C).toLocaleString("ru-RU",{month:"long"})}),g.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-bold ${O[v]>=0?I.pos.text:I.neg.text}`,children:[O[v].toLocaleString("ru-RU")," ",c==="attendanceByMonth"?"":""]})]},C))}),g.jsx("tfoot",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-gray-300 uppercase",children:S}),g.jsxs("td",{className:`px-6 py-4 text-right text-sm font-extrabold ${I.pos.text}`,children:[x.toLocaleString("ru-RU")," ",c==="attendanceByMonth"?"":""]})]})})]})}return g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[g.jsxs("button",{onClick:()=>o("overview"),className:"flex items-center mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 w-full md:w-auto justify-center md:justify-start",children:[g.jsx(AA,{}),g.jsx("span",{className:"ml-2",children:"  "})]}),g.jsx("h2",{className:"text-2xl font-semibold text-white mb-4 text-center md:text-left",children:M}),g.jsx("div",{className:"overflow-x-auto",children:V}),g.jsx("div",{className:"mt-6 overflow-x-auto",children:w})]})}return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:""}),g.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[g.jsx("button",{onClick:()=>p(M=>M.setFullYear(M.getFullYear()-1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"<"}),g.jsx("h3",{className:"text-2xl font-bold text-white",children:i.getFullYear()}),g.jsx("button",{onClick:()=>p(M=>M.setFullYear(M.getFullYear()+1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:">"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{onClick:()=>d("incomeByMonth"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer group",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsx("div",{className:"p-3 bg-teal-500/20 rounded-lg text-teal-400 group-hover:bg-teal-500 group-hover:text-white transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" ()"}),g.jsx("p",{className:"text-gray-400 mt-2",children:"   "})]}),g.jsxs("div",{onClick:()=>d("netProfitByMonth"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-emerald-500 transition-colors cursor-pointer group",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-lg text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" "}),g.jsx("p",{className:"text-gray-400 mt-2",children:" "})]}),g.jsxs("div",{onClick:()=>d("attendanceByMonth"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-cyan-500 transition-colors cursor-pointer group",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsx("div",{className:"p-3 bg-cyan-500/20 rounded-lg text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:""}),g.jsx("p",{className:"text-gray-400 mt-2",children:" "})]}),g.jsxs("div",{onClick:()=>d("blockPopularity"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-orange-500 transition-colors cursor-pointer group",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg text-orange-400 group-hover:bg-orange-500 group-hover:text-white transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:" "}),g.jsx("p",{className:"text-gray-400 mt-2",children:"  "})]})]})]})},Fj=({id:t,message:e,type:n,onClose:r})=>{L.useEffect(()=>{const a=setTimeout(()=>{r(t)},3e3);return()=>clearTimeout(a)},[t,r]);const i={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-orange-500"},s={success:g.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),error:g.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),info:g.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),warning:g.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})};return g.jsxs("div",{className:`${i[n]||i.info} text-white px-6 py-4 rounded-lg shadow-lg mb-3 flex items-center transform transition-all duration-500 ease-in-out hover:scale-105 animate-slide-in-right glass-effect`,children:[s[n]||s.info,g.jsx("span",{className:"font-medium",children:e}),g.jsx("button",{onClick:()=>r(t),className:"ml-4 hover:text-gray-200 focus:outline-none",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},Gj=({user:t,initialData:e})=>{const[n,r]=L.useState("dashboard"),[i,s]=L.useState(new Date),[a,o]=L.useState(!1),c=L.useRef(null),[u,d]=L.useState([]),p=(I,O="success")=>{const C=Date.now();d(ee=>[...ee,{id:C,message:I,type:O}])},f=I=>{d(O=>O.filter(C=>C.id!==I))},[m,A]=L.useState(e.blocks||[]),[D,R]=L.useState(e.participants||[]),[_,b]=L.useState(e.attendance||{}),[T,N]=L.useState(()=>{const I=e==null?void 0:e.rentAmount;return typeof I=="number"&&I>0?I:5e4});L.useEffect(()=>{(typeof T!="number"||T<=0)&&N(5e4)},[T]),L.useEffect(()=>{const I=async()=>{if(t){const C={blocks:m,participants:D,attendance:_,rentAmount:T};await dx(hm(vm,"users",t.uid),C)}},O=setTimeout(()=>{I()},1e3);return()=>{clearTimeout(O)}},[m,D,_,T,t]);const M=async()=>{try{await ND(Vu)}catch(I){console.error(" :",I),p("  ","error")}},V=()=>{const I={blocks:m,participants:D,attendance:_,rentAmount:T,exportDate:new Date().toISOString()},O=JSON.stringify(I,null,2),C=new Blob([O],{type:"application/json"}),ee=URL.createObjectURL(C),$=document.createElement("a");$.href=ee,$.download=`backup_visitflow_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),p("   !","success")},w=()=>{c.current.click()},v=I=>{const O=I.target.files[0];if(!O)return;const C=new FileReader;C.onload=ee=>{try{const $=JSON.parse(ee.target.result);if(!$.blocks||!$.participants||!$.attendance){p(":   .","error");return}window.confirm(":        .    . ?")&&(A($.blocks),R($.participants),b($.attendance),$.rentAmount&&N($.rentAmount),p("  !","success"))}catch($){console.error("   :",$),p("   .","error")}},C.readAsText(O),I.target.value=""},x=()=>{const I={participants:D,setParticipants:R,blocks:m,setBlocks:A,attendance:_,setAttendance:b,rentAmount:T,setRentAmount:N,selectedDate:i,setSelectedDate:s,addNotification:p};switch(n){case"dashboard":return g.jsx(T_,{...I});case"calendar":return g.jsx(kj,{...I});case"participants":return g.jsx(jj,{...I});case"blocks":return g.jsx(Uj,{...I});case"reports":return g.jsx(zj,{...I});case"charts":return g.jsx(Hj,{...I});default:return g.jsx(T_,{...I})}},S=({page:I,icon:O,children:C})=>g.jsxs("button",{onClick:()=>{r(I),o(!1)},className:`flex items-center space-x-3 px-4 py-3 rounded-lg w-full text-left transition-colors ${n===I?"bg-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[O,g.jsx("span",{className:"font-medium",children:C})]});return g.jsxs("div",{className:"relative min-h-screen md:flex bg-gray-900 font-sans text-gray-300",children:[g.jsx("div",{className:"fixed top-5 right-5 z-50 flex flex-col items-end space-y-2 pointer-events-none",children:g.jsx("div",{className:"pointer-events-auto",children:u.map(I=>g.jsx(Fj,{...I,onClose:f},I.id))})}),g.jsxs("div",{className:"md:hidden flex justify-between items-center p-4 bg-gray-800 border-b border-gray-700",children:[g.jsxs("div",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"VisitFlow"})]}),g.jsx("button",{onClick:()=>o(!a),className:"text-gray-300 hover:text-white",children:g.jsx(Rj,{})})]}),g.jsxs("aside",{className:`w-64 bg-gray-800 p-4 flex flex-col border-r border-gray-700 fixed inset-y-0 left-0 z-30 transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 ${a?"translate-x-0":"-translate-x-full"}`,children:[g.jsxs("div",{className:"text-2xl font-bold text-white mb-8 items-center space-x-2 hidden md:flex",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"VisitFlow"})]}),g.jsx("nav",{className:"flex-grow",children:g.jsxs("div",{className:"flex flex-col space-y-2",children:[g.jsx(S,{page:"dashboard",icon:g.jsx(Tj,{}),children:""}),g.jsx(S,{page:"calendar",icon:g.jsx(wj,{}),children:""}),g.jsx(S,{page:"participants",icon:g.jsx(Sj,{}),children:""}),g.jsx(S,{page:"blocks",icon:g.jsx(xj,{}),children:""}),g.jsx(S,{page:"reports",icon:g.jsx(Aj,{}),children:""}),g.jsx(S,{page:"charts",icon:g.jsx(Ij,{}),children:""})]})}),g.jsxs("div",{className:"mt-auto space-y-4",children:[g.jsx("input",{type:"file",ref:c,onChange:v,className:"hidden",accept:".json"}),g.jsxs("button",{onClick:w,className:"flex items-center space-x-3 px-4 py-2 rounded-lg w-full text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",title:"   ",children:[g.jsx(Vj,{}),g.jsx("span",{className:"font-medium",children:""})]}),g.jsxs("button",{onClick:V,className:"flex items-center space-x-3 px-4 py-2 rounded-lg w-full text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",title:"   ",children:[g.jsx(Pj,{}),g.jsx("span",{className:"font-medium",children:" "})]}),g.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-900",children:[g.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.photoURL||`https://ui-avatars.com/api/?name=${t.email}&background=orange&color=fff`,onError:I=>{I.target.onerror=null,I.target.src=`https://ui-avatars.com/api/?name=${t.email}&background=orange&color=fff`},alt:"User"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white text-sm truncate",children:t.email}),g.jsx("button",{onClick:M,className:"text-sm text-orange-400 hover:underline",children:""})]})]})]})]}),g.jsx("main",{className:"flex-1 p-4 sm:p-8 overflow-y-auto",children:x()})]})};function qj(){const[t,e]=L.useState(null),[n,r]=L.useState(!0),[i,s]=L.useState(null);return L.useEffect(()=>{const a=DD(Vu,async o=>{if(o){const c=hm(vm,"users",o.uid),u=await Q4(c);u.exists()?s(u.data()):console.log("No such document for user!"),e(o)}else e(null),s(null);r(!1)});return()=>a()},[]),n||t&&!i?g.jsx("div",{className:"flex justify-center items-center h-screen font-bold text-xl bg-gray-900 text-white",children:"..."}):t?g.jsx(Gj,{user:t,initialData:i}):g.jsx(nP,{})}XR.createRoot(document.getElementById("root")).render(g.jsx(Ge.StrictMode,{children:g.jsx(qj,{})}));
