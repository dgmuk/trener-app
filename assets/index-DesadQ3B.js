(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function J_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t0={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=Symbol.for("react.transitional.element"),nS=Symbol.for("react.fragment");function e0(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:eS,type:e,key:i,ref:t!==void 0?t:null,props:n}}$u.Fragment=nS;$u.jsx=e0;$u.jsxs=e0;t0.exports=$u;var g=t0.exports,n0={exports:{}},W={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=Symbol.for("react.transitional.element"),iS=Symbol.for("react.portal"),rS=Symbol.for("react.fragment"),sS=Symbol.for("react.strict_mode"),aS=Symbol.for("react.profiler"),oS=Symbol.for("react.consumer"),lS=Symbol.for("react.context"),uS=Symbol.for("react.forward_ref"),cS=Symbol.for("react.suspense"),hS=Symbol.for("react.memo"),i0=Symbol.for("react.lazy"),np=Symbol.iterator;function fS(e){return e===null||typeof e!="object"?null:(e=np&&e[np]||e["@@iterator"],typeof e=="function"?e:null)}var r0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s0=Object.assign,a0={};function Os(e,t,n){this.props=e,this.context=t,this.refs=a0,this.updater=n||r0}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function o0(){}o0.prototype=Os.prototype;function gd(e,t,n){this.props=e,this.context=t,this.refs=a0,this.updater=n||r0}var pd=gd.prototype=new o0;pd.constructor=gd;s0(pd,Os.prototype);pd.isPureReactComponent=!0;var ip=Array.isArray,wt={H:null,A:null,T:null,S:null,V:null},l0=Object.prototype.hasOwnProperty;function yd(e,t,n,i,r,s){return n=s.ref,{$$typeof:md,type:e,key:t,ref:n!==void 0?n:null,props:s}}function dS(e,t){return yd(e.type,t,void 0,void 0,void 0,e.props)}function _d(e){return typeof e=="object"&&e!==null&&e.$$typeof===md}function mS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rp=/\/+/g;function Jc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mS(""+e.key):t.toString(36)}function sp(){}function gS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(sp,sp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Pr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case md:case iS:a=!0;break;case i0:return a=e._init,Pr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Jc(e,0):i,ip(r)?(n="",a!=null&&(n=a.replace(rp,"$&/")+"/"),Pr(r,t,n,"",function(h){return h})):r!=null&&(_d(r)&&(r=dS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(rp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(ip(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Jc(i,u),a+=Pr(i,t,n,s,r);else if(u=fS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Jc(i,u++),a+=Pr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Pr(gS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function ul(e,t,n){if(e==null)return e;var i=[],r=0;return Pr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function pS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ap=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yS(){}W.Children={map:ul,forEach:function(e,t,n){ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ul(e,function(){t++}),t},toArray:function(e){return ul(e,function(t){return t})||[]},only:function(e){if(!_d(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Os;W.Fragment=rS;W.Profiler=aS;W.PureComponent=gd;W.StrictMode=sS;W.Suspense=cS;W.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wt;W.__COMPILER_RUNTIME={__proto__:null,c:function(e){return wt.H.useMemoCache(e)}};W.cache=function(e){return function(){return e.apply(null,arguments)}};W.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=s0({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!l0.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return yd(e.type,r,void 0,void 0,s,i)};W.createContext=function(e){return e={$$typeof:lS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:oS,_context:e},e};W.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)l0.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return yd(e,s,void 0,void 0,null,r)};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:uS,render:e}};W.isValidElement=_d;W.lazy=function(e){return{$$typeof:i0,_payload:{_status:-1,_result:e},_init:pS}};W.memo=function(e,t){return{$$typeof:hS,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=wt.T,n={};wt.T=n;try{var i=e(),r=wt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(yS,ap)}catch(s){ap(s)}finally{wt.T=t}};W.unstable_useCacheRefresh=function(){return wt.H.useCacheRefresh()};W.use=function(e){return wt.H.use(e)};W.useActionState=function(e,t,n){return wt.H.useActionState(e,t,n)};W.useCallback=function(e,t){return wt.H.useCallback(e,t)};W.useContext=function(e){return wt.H.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e,t){return wt.H.useDeferredValue(e,t)};W.useEffect=function(e,t,n){var i=wt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};W.useId=function(){return wt.H.useId()};W.useImperativeHandle=function(e,t,n){return wt.H.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return wt.H.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return wt.H.useLayoutEffect(e,t)};W.useMemo=function(e,t){return wt.H.useMemo(e,t)};W.useOptimistic=function(e,t){return wt.H.useOptimistic(e,t)};W.useReducer=function(e,t,n){return wt.H.useReducer(e,t,n)};W.useRef=function(e){return wt.H.useRef(e)};W.useState=function(e){return wt.H.useState(e)};W.useSyncExternalStore=function(e,t,n){return wt.H.useSyncExternalStore(e,t,n)};W.useTransition=function(){return wt.H.useTransition()};W.version="19.1.1";n0.exports=W;var et=n0.exports;const _S=J_(et);var u0={exports:{}},Zu={},c0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,K){var $=B.length;B.push(K);t:for(;0<$;){var Et=$-1>>>1,Mt=B[Et];if(0<r(Mt,K))B[Et]=K,B[$]=Mt,$=Et;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],$=B.pop();if($!==K){B[0]=$;t:for(var Et=0,Mt=B.length,Ir=Mt>>>1;Et<Ir;){var xe=2*(Et+1)-1,Ut=B[xe],Sn=xe+1,sn=B[Sn];if(0>r(Ut,$))Sn<Mt&&0>r(sn,Ut)?(B[Et]=sn,B[Sn]=$,Et=Sn):(B[Et]=Ut,B[xe]=$,Et=xe);else if(Sn<Mt&&0>r(sn,$))B[Et]=sn,B[Sn]=$,Et=Sn;else break t}}return K}function r(B,K){var $=B.sortIndex-K.sortIndex;return $!==0?$:B.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,E=!1,D=!1,O=!1,V=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function x(B){for(var K=n(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=B)i(h),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(h)}}function P(B){if(O=!1,x(B),!D)if(n(u)!==null)D=!0,j||(j=!0,C());else{var K=n(h);K!==null&&Qt(P,K.startTime-B)}}var j=!1,A=-1,y=5,T=-1;function w(){return V?!0:!(e.unstable_now()-T<y)}function I(){if(V=!1,j){var B=e.unstable_now();T=B;var K=!0;try{t:{D=!1,O&&(O=!1,v(A),A=-1),E=!0;var $=m;try{e:{for(x(B),p=n(u);p!==null&&!(p.expirationTime>B&&w());){var Et=p.callback;if(typeof Et=="function"){p.callback=null,m=p.priorityLevel;var Mt=Et(p.expirationTime<=B);if(B=e.unstable_now(),typeof Mt=="function"){p.callback=Mt,x(B),K=!0;break e}p===n(u)&&i(u),x(B)}else i(u);p=n(u)}if(p!==null)K=!0;else{var Ir=n(h);Ir!==null&&Qt(P,Ir.startTime-B),K=!1}}break t}finally{p=null,m=$,E=!1}K=void 0}}finally{K?C():j=!1}}}var C;if(typeof S=="function")C=function(){S(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,pt=R.port2;R.port1.onmessage=I,C=function(){pt.postMessage(null)}}else C=function(){b(I,0)};function Qt(B,K){A=b(function(){B(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return B()}finally{m=$}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=m;m=B;try{return K()}finally{m=$}},e.unstable_scheduleCallback=function(B,K,$){var Et=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Et+$:Et):$=Et,B){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=$+Mt,B={id:d++,callback:K,priorityLevel:B,startTime:$,expirationTime:Mt,sortIndex:-1},$>Et?(B.sortIndex=$,t(h,B),n(u)===null&&B===n(h)&&(O?(v(A),A=-1):O=!0,Qt(P,$-Et))):(B.sortIndex=Mt,t(u,B),D||E||(D=!0,j||(j=!0,C()))),B},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(B){var K=m;return function(){var $=m;m=K;try{return B.apply(this,arguments)}finally{m=$}}}})(h0);c0.exports=h0;var vS=c0.exports,f0={exports:{}},Ee={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=et;function d0(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ti(){}var ve={d:{f:ti,r:function(){throw Error(d0(522))},D:ti,C:ti,L:ti,m:ti,X:ti,S:ti,M:ti},p:0,findDOMNode:null},TS=Symbol.for("react.portal");function bS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:TS,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Sa=ES.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Wu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve;Ee.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(d0(299));return bS(e,t,null,n)};Ee.flushSync=function(e){var t=Sa.T,n=ve.p;try{if(Sa.T=null,ve.p=2,e)return e()}finally{Sa.T=t,ve.p=n,ve.d.f()}};Ee.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ve.d.C(e,t))};Ee.prefetchDNS=function(e){typeof e=="string"&&ve.d.D(e)};Ee.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Wu(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ve.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ve.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ee.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Wu(t.as,t.crossOrigin);ve.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ve.d.M(e)};Ee.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Wu(n,t.crossOrigin);ve.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ee.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Wu(t.as,t.crossOrigin);ve.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ve.d.m(e)};Ee.requestFormReset=function(e){ve.d.r(e)};Ee.unstable_batchedUpdates=function(e,t){return e(t)};Ee.useFormState=function(e,t,n){return Sa.H.useFormState(e,t,n)};Ee.useFormStatus=function(){return Sa.H.useHostTransitionStatus()};Ee.version="19.1.1";function m0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m0)}catch(e){console.error(e)}}m0(),f0.exports=Ee;var SS=f0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=vS,g0=et,AS=SS;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function y0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function op(e){if(yo(e)!==e)throw Error(U(188))}function wS(e){var t=e.alternate;if(!t){if(t=yo(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return op(r),e;if(s===i)return op(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function _0(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_0(e),t!==null)return t;e=e.sibling}return null}var St=Object.assign,RS=Symbol.for("react.element"),cl=Symbol.for("react.transitional.element"),da=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),xS=Symbol.for("react.provider"),E0=Symbol.for("react.consumer"),Nn=Symbol.for("react.context"),vd=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Kh=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),Xh=Symbol.for("react.activity"),IS=Symbol.for("react.memo_cache_sentinel"),lp=Symbol.iterator;function sa(e){return e===null||typeof e!="object"?null:(e=lp&&e[lp]||e["@@iterator"],typeof e=="function"?e:null)}var CS=Symbol.for("react.client.reference");function $h(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===CS?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hr:return"Fragment";case Yh:return"Profiler";case v0:return"StrictMode";case Qh:return"Suspense";case Kh:return"SuspenseList";case Xh:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case da:return"Portal";case Nn:return(e.displayName||"Context")+".Provider";case E0:return(e._context.displayName||"Context")+".Consumer";case vd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ed:return t=e.displayName||null,t!==null?t:$h(e.type)||"Memo";case ri:t=e._payload,e=e._init;try{return $h(e(t))}catch{}}return null}var ma=Array.isArray,Q=g0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=AS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,er={pending:!1,data:null,method:null,action:null},Zh=[],Fr=-1;function Tn(e){return{current:e}}function Jt(e){0>Fr||(e.current=Zh[Fr],Zh[Fr]=null,Fr--)}function Rt(e,t){Fr++,Zh[Fr]=e.current,e.current=t}var cn=Tn(null),Ga=Tn(null),vi=Tn(null),Jl=Tn(null);function tu(e,t){switch(Rt(vi,t),Rt(Ga,e),Rt(cn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?dy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=dy(t),e=UE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Jt(cn),Rt(cn,e)}function ms(){Jt(cn),Jt(Ga),Jt(vi)}function Wh(e){e.memoizedState!==null&&Rt(Jl,e);var t=cn.current,n=UE(t,e.type);t!==n&&(Rt(Ga,e),Rt(cn,n))}function eu(e){Ga.current===e&&(Jt(cn),Jt(Ga)),Jl.current===e&&(Jt(Jl),eo._currentValue=er)}var Jh=Object.prototype.hasOwnProperty,Td=Yt.unstable_scheduleCallback,th=Yt.unstable_cancelCallback,NS=Yt.unstable_shouldYield,DS=Yt.unstable_requestPaint,hn=Yt.unstable_now,OS=Yt.unstable_getCurrentPriorityLevel,T0=Yt.unstable_ImmediatePriority,b0=Yt.unstable_UserBlockingPriority,nu=Yt.unstable_NormalPriority,MS=Yt.unstable_LowPriority,S0=Yt.unstable_IdlePriority,VS=Yt.log,PS=Yt.unstable_setDisableYieldValue,_o=null,Me=null;function mi(e){if(typeof VS=="function"&&PS(e),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(_o,e)}catch{}}var Ve=Math.clz32?Math.clz32:LS,kS=Math.log,US=Math.LN2;function LS(e){return e>>>=0,e===0?32:31-(kS(e)/US|0)|0}var hl=256,fl=4194304;function $i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ju(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=$i(i):(a&=l,a!==0?r=$i(a):n||(n=l&~e,n!==0&&(r=$i(n))))):(l=i&~s,l!==0?r=$i(l):a!==0?r=$i(a):n||(n=i&~e,n!==0&&(r=$i(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function vo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A0(){var e=hl;return hl<<=1,!(hl&4194048)&&(hl=256),e}function w0(){var e=fl;return fl<<=1,!(fl&62914560)&&(fl=4194304),e}function eh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zS(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ve(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var E=m[d];E!==null&&(E.lane&=-536870913)}n&=~p}i!==0&&R0(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function R0(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ve(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function x0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ve(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function bd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function I0(){var e=ct.p;return e!==0?e:(e=window.event,e===void 0?32:QE(e.type))}function BS(e,t){var n=ct.p;try{return ct.p=e,t()}finally{ct.p=n}}var Bi=Math.random().toString(36).slice(2),de="__reactFiber$"+Bi,we="__reactProps$"+Bi,Ms="__reactContainer$"+Bi,tf="__reactEvents$"+Bi,qS="__reactListeners$"+Bi,HS="__reactHandles$"+Bi,up="__reactResources$"+Bi,To="__reactMarker$"+Bi;function Ad(e){delete e[de],delete e[we],delete e[tf],delete e[qS],delete e[HS]}function Gr(e){var t=e[de];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ms]||n[de]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=py(e);e!==null;){if(n=e[de])return n;e=py(e)}return t}e=n,n=e.parentNode}return null}function Vs(e){if(e=e[de]||e[Ms]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function ns(e){var t=e[up];return t||(t=e[up]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $t(e){e[To]=!0}var C0=new Set,N0={};function vr(e,t){gs(e,t),gs(e+"Capture",t)}function gs(e,t){for(N0[e]=t,e=0;e<t.length;e++)C0.add(t[e])}var FS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cp={},hp={};function GS(e){return Jh.call(hp,e)?!0:Jh.call(cp,e)?!1:FS.test(e)?hp[e]=!0:(cp[e]=!0,!1)}function Nl(e,t,n){if(GS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function dl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Rn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var nh,fp;function kr(e){if(nh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nh=t&&t[1]||"",fp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nh+e+fp}var ih=!1;function rh(e,t){if(!e||ih)return"";ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(E){var m=E}Reflect.construct(e,[],p)}else{try{p.call()}catch(E){m=E}e.call(p.prototype)}}else{try{throw Error()}catch(E){m=E}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(E){if(E&&m&&typeof E.stack=="string")return[E.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{ih=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?kr(n):""}function YS(e){switch(e.tag){case 26:case 27:case 5:return kr(e.type);case 16:return kr("Lazy");case 13:return kr("Suspense");case 19:return kr("SuspenseList");case 0:case 15:return rh(e.type,!1);case 11:return rh(e.type.render,!1);case 1:return rh(e.type,!0);case 31:return kr("Activity");default:return""}}function dp(e){try{var t="";do t+=YS(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ze(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QS(e){var t=D0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function iu(e){e._valueTracker||(e._valueTracker=QS(e))}function O0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=D0(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ru(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var KS=/[\n"\\]/g;function He(e){return e.replace(KS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ef(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ze(t)):e.value!==""+ze(t)&&(e.value=""+ze(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?nf(e,a,ze(t)):n!=null?nf(e,a,ze(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+ze(l):e.removeAttribute("name")}function M0(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+ze(n):"",t=t!=null?""+ze(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function nf(e,t,n){t==="number"&&ru(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function is(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ze(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function V0(e,t,n){if(t!=null&&(t=""+ze(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ze(n):""}function P0(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(ma(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ze(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ps(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var XS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||XS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function k0(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&mp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&mp(e,s,t[s])}function wd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dl(e){return ZS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var rf=null;function Rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yr=null,rs=null;function gp(e){var t=Vs(e);if(t&&(e=t.stateNode)){var n=e[we]||null;t:switch(e=t.stateNode,t.type){case"input":if(ef(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+He(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[we]||null;if(!r)throw Error(U(90));ef(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&O0(i)}break t;case"textarea":V0(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&is(e,!!n.multiple,t,!1)}}}var sh=!1;function U0(e,t,n){if(sh)return e(t,n);sh=!0;try{var i=e(t);return i}finally{if(sh=!1,(Yr!==null||rs!==null)&&(uc(),Yr&&(t=Yr,e=rs,rs=Yr=null,gp(t),e)))for(t=0;t<e.length;t++)gp(e[t])}}function Ya(e,t){var n=e.stateNode;if(n===null)return null;var i=n[we]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=!1;if(Bn)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){sf=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{sf=!1}var gi=null,xd=null,Ol=null;function L0(){if(Ol)return Ol;var e,t=xd,n=t.length,i,r="value"in gi?gi.value:gi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Ol=r.slice(e,1<i?1-i:void 0)}function Ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function pp(){return!1}function Re(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ml:pp,this.isPropagationStopped=pp,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=Re(Er),bo=St({},Er,{view:0,detail:0}),WS=Re(bo),ah,oh,oa,ec=St({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oa&&(oa&&e.type==="mousemove"?(ah=e.screenX-oa.screenX,oh=e.screenY-oa.screenY):oh=ah=0,oa=e),ah)},movementY:function(e){return"movementY"in e?e.movementY:oh}}),yp=Re(ec),JS=St({},ec,{dataTransfer:0}),tA=Re(JS),eA=St({},bo,{relatedTarget:0}),lh=Re(eA),nA=St({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=Re(nA),rA=St({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sA=Re(rA),aA=St({},Er,{data:0}),_p=Re(aA),oA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uA[e])?!!t[e]:!1}function Id(){return cA}var hA=St({},bo,{key:function(e){if(e.key){var t=oA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fA=Re(hA),dA=St({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vp=Re(dA),mA=St({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),gA=Re(mA),pA=St({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),yA=Re(pA),_A=St({},ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vA=Re(_A),EA=St({},Er,{newState:0,oldState:0}),TA=Re(EA),bA=[9,13,27,32],Cd=Bn&&"CompositionEvent"in window,Aa=null;Bn&&"documentMode"in document&&(Aa=document.documentMode);var SA=Bn&&"TextEvent"in window&&!Aa,j0=Bn&&(!Cd||Aa&&8<Aa&&11>=Aa),Ep=" ",Tp=!1;function z0(e,t){switch(e){case"keyup":return bA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function AA(e,t){switch(e){case"compositionend":return B0(t);case"keypress":return t.which!==32?null:(Tp=!0,Ep);case"textInput":return e=t.data,e===Ep&&Tp?null:e;default:return null}}function wA(e,t){if(Qr)return e==="compositionend"||!Cd&&z0(e,t)?(e=L0(),Ol=xd=gi=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return j0&&t.locale!=="ko"?null:t.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RA[e.type]:t==="textarea"}function q0(e,t,n,i){Yr?rs?rs.push(i):rs=[i]:Yr=i,t=bu(t,"onChange"),0<t.length&&(n=new tc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var wa=null,Qa=null;function xA(e){VE(e,0)}function nc(e){var t=ga(e);if(O0(t))return e}function Sp(e,t){if(e==="change")return t}var H0=!1;if(Bn){var uh;if(Bn){var ch="oninput"in document;if(!ch){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),ch=typeof Ap.oninput=="function"}uh=ch}else uh=!1;H0=uh&&(!document.documentMode||9<document.documentMode)}function wp(){wa&&(wa.detachEvent("onpropertychange",F0),Qa=wa=null)}function F0(e){if(e.propertyName==="value"&&nc(Qa)){var t=[];q0(t,Qa,e,Rd(e)),U0(xA,t)}}function IA(e,t,n){e==="focusin"?(wp(),wa=t,Qa=n,wa.attachEvent("onpropertychange",F0)):e==="focusout"&&wp()}function CA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nc(Qa)}function NA(e,t){if(e==="click")return nc(t)}function DA(e,t){if(e==="input"||e==="change")return nc(t)}function OA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ue=typeof Object.is=="function"?Object.is:OA;function Ka(e,t){if(Ue(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Jh.call(t,r)||!Ue(e[r],t[r]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xp(e,t){var n=Rp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Rp(n)}}function G0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?G0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Y0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ru(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ru(e.document)}return t}function Nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var MA=Bn&&"documentMode"in document&&11>=document.documentMode,Kr=null,af=null,Ra=null,of=!1;function Ip(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;of||Kr==null||Kr!==ru(i)||(i=Kr,"selectionStart"in i&&Nd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ra&&Ka(Ra,i)||(Ra=i,i=bu(af,"onSelect"),0<i.length&&(t=new tc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Kr)))}function Xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xr={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},hh={},Q0={};Bn&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Tr(e){if(hh[e])return hh[e];if(!Xr[e])return e;var t=Xr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Q0)return hh[e]=t[n];return e}var K0=Tr("animationend"),X0=Tr("animationiteration"),$0=Tr("animationstart"),VA=Tr("transitionrun"),PA=Tr("transitionstart"),kA=Tr("transitioncancel"),Z0=Tr("transitionend"),W0=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function rn(e,t){W0.set(e,t),vr(t,[e])}var Cp=new WeakMap;function Fe(e,t){if(typeof e=="object"&&e!==null){var n=Cp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:dp(t)},Cp.set(e,t),t)}return{value:e,source:t,stack:dp(t)}}var je=[],$r=0,Dd=0;function ic(){for(var e=$r,t=Dd=$r=0;t<e;){var n=je[t];je[t++]=null;var i=je[t];je[t++]=null;var r=je[t];je[t++]=null;var s=je[t];if(je[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&J0(n,r,s)}}function rc(e,t,n,i){je[$r++]=e,je[$r++]=t,je[$r++]=n,je[$r++]=i,Dd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Od(e,t,n,i){return rc(e,t,n,i),su(e)}function Ps(e,t){return rc(e,null,null,t),su(e)}function J0(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Ve(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function su(e){if(50<ka)throw ka=0,Cf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Zr={};function UA(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oe(e,t,n,i){return new UA(e,t,n,i)}function Md(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Un(e,t){var n=e.alternate;return n===null?(n=Oe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function tv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Md(e)&&(a=1);else if(typeof e=="string")a=jw(e,n,cn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Xh:return e=Oe(31,n,t,r),e.elementType=Xh,e.lanes=s,e;case Hr:return nr(n.children,r,s,t);case v0:a=8,r|=24;break;case Yh:return e=Oe(12,n,t,r|2),e.elementType=Yh,e.lanes=s,e;case Qh:return e=Oe(13,n,t,r),e.elementType=Qh,e.lanes=s,e;case Kh:return e=Oe(19,n,t,r),e.elementType=Kh,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xS:case Nn:a=10;break t;case E0:a=9;break t;case vd:a=11;break t;case Ed:a=14;break t;case ri:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Oe(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function nr(e,t,n,i){return e=Oe(7,e,i,t),e.lanes=n,e}function fh(e,t,n){return e=Oe(6,e,null,t),e.lanes=n,e}function dh(e,t,n){return t=Oe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Jr=0,au=null,ou=0,Be=[],qe=0,ir=null,Dn=1,On="";function Zi(e,t){Wr[Jr++]=ou,Wr[Jr++]=au,au=e,ou=t}function ev(e,t,n){Be[qe++]=Dn,Be[qe++]=On,Be[qe++]=ir,ir=e;var i=Dn;e=On;var r=32-Ve(i)-1;i&=~(1<<r),n+=1;var s=32-Ve(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Dn=1<<32-Ve(t)+r|n<<r|i,On=s+e}else Dn=1<<s|n<<r|i,On=e}function Vd(e){e.return!==null&&(Zi(e,1),ev(e,1,0))}function Pd(e){for(;e===au;)au=Wr[--Jr],Wr[Jr]=null,ou=Wr[--Jr],Wr[Jr]=null;for(;e===ir;)ir=Be[--qe],Be[qe]=null,On=Be[--qe],Be[qe]=null,Dn=Be[--qe],Be[qe]=null}var _e=null,Dt=null,ut=!1,rr=null,ln=!1,uf=Error(U(519));function ur(e){var t=Error(U(418,""));throw Xa(Fe(t,e)),uf}function Np(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[de]=e,t[we]=i,n){case"dialog":tt("cancel",t),tt("close",t);break;case"iframe":case"object":case"embed":tt("load",t);break;case"video":case"audio":for(n=0;n<Wa.length;n++)tt(Wa[n],t);break;case"source":tt("error",t);break;case"img":case"image":case"link":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"input":tt("invalid",t),M0(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),iu(t);break;case"select":tt("invalid",t);break;case"textarea":tt("invalid",t),P0(t,i.value,i.defaultValue,i.children),iu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||kE(t.textContent,n)?(i.popover!=null&&(tt("beforetoggle",t),tt("toggle",t)),i.onScroll!=null&&tt("scroll",t),i.onScrollEnd!=null&&tt("scrollend",t),i.onClick!=null&&(t.onclick=fc),t=!0):t=!1,t||ur(e)}function Dp(e){for(_e=e.return;_e;)switch(_e.tag){case 5:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:_e=_e.return}}function la(e){if(e!==_e)return!1;if(!ut)return Dp(e),ut=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Pf(e.type,e.memoizedProps)),n=!n),n&&Dt&&ur(e),Dp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Dt=en(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Dt=null}}else t===27?(t=Dt,qi(e.type)?(e=Lf,Lf=null,Dt=e):Dt=t):Dt=_e?en(e.stateNode.nextSibling):null;return!0}function So(){Dt=_e=null,ut=!1}function Op(){var e=rr;return e!==null&&(Se===null?Se=e:Se.push.apply(Se,e),rr=null),e}function Xa(e){rr===null?rr=[e]:rr.push(e)}var cf=Tn(null),br=null,Mn=null;function ai(e,t,n){Rt(cf,t._currentValue),t._currentValue=n}function Ln(e){e._currentValue=cf.current,Jt(cf)}function hf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ff(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),hf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ao(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;Ue(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Jl.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(eo):e=[eo])}r=r.return}e!==null&&ff(t,e,n,i),t.flags|=262144}function lu(e){for(e=e.firstContext;e!==null;){if(!Ue(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cr(e){br=e,Mn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function me(e){return nv(br,e)}function gl(e,t){return br===null&&cr(e),nv(e,t)}function nv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Mn===null){if(e===null)throw Error(U(308));Mn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mn=Mn.next=t;return n}var LA=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},jA=Yt.unstable_scheduleCallback,zA=Yt.unstable_NormalPriority,qt={$$typeof:Nn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new LA,data:new Map,refCount:0}}function wo(e){e.refCount--,e.refCount===0&&jA(zA,function(){e.controller.abort()})}var xa=null,df=0,ys=0,ss=null;function BA(e,t){if(xa===null){var n=xa=[];df=0,ys=sm(),ss={status:"pending",value:void 0,then:function(i){n.push(i)}}}return df++,t.then(Mp,Mp),t}function Mp(){if(--df===0&&xa!==null){ss!==null&&(ss.status="fulfilled");var e=xa;xa=null,ys=0,ss=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qA(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Vp=Q.S;Q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&BA(e,t),Vp!==null&&Vp(e,t)};var sr=Tn(null);function Ud(){var e=sr.current;return e!==null?e:vt.pooledCache}function Pl(e,t){t===null?Rt(sr,sr.current):Rt(sr,t.pool)}function iv(){var e=Ud();return e===null?null:{parent:qt._currentValue,pool:e}}var Ro=Error(U(460)),rv=Error(U(474)),sc=Error(U(542)),mf={then:function(){}};function Pp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pl(){}function sv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(pl,pl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Up(e),e;default:if(typeof t.status=="string")t.then(pl,pl);else{if(e=vt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Up(e),e}throw Ia=t,Ro}}var Ia=null;function kp(){if(Ia===null)throw Error(U(459));var e=Ia;return Ia=null,e}function Up(e){if(e===Ro||e===sc)throw Error(U(483))}var si=!1;function Ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=su(e),J0(e,null,n),t}return rc(e,i,t,n),su(e)}function Ca(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,x0(e,n)}}function mh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var pf=!1;function Na(){if(pf){var e=ss;if(e!==null)throw e}}function Da(e,t,n,i){pf=!1;var r=e.updateQueue;si=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,E=m!==l.lane;if(E?(ot&m)===m:(i&m)===m){m!==0&&m===ys&&(pf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,O=l;m=t;var V=n;switch(O.tag){case 1:if(D=O.payload,typeof D=="function"){p=D.call(V,p,m);break t}p=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=O.payload,m=typeof D=="function"?D.call(V,p,m):D,m==null)break t;p=St({},p,m);break t;case 2:si=!0}}m=l.callback,m!==null&&(e.flags|=64,E&&(e.flags|=8192),E=r.callbacks,E===null?r.callbacks=[m]:E.push(m))}else E={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=E,u=p):d=d.next=E,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;E=l,l=E.next,E.next=null,r.lastBaseUpdate=E,r.shared.pending=null}}while(!0);d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Vi|=a,e.lanes=a,e.memoizedState=p}}function av(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function ov(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)av(n[e],t)}var _s=Tn(null),uu=Tn(0);function Lp(e,t){e=Fn,Rt(uu,e),Rt(_s,t),Fn=e|t.baseLanes}function yf(){Rt(uu,Fn),Rt(_s,_s.current)}function jd(){Fn=uu.current,Jt(_s),Jt(uu)}var Oi=0,J=null,gt=null,jt=null,cu=!1,as=!1,hr=!1,hu=0,$a=0,os=null,HA=0;function Vt(){throw Error(U(321))}function zd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ue(e[n],t[n]))return!1;return!0}function Bd(e,t,n,i,r,s){return Oi=s,J=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q.H=e===null||e.memoizedState===null?Lv:jv,hr=!1,s=n(i,r),hr=!1,as&&(s=uv(t,n,i,r)),lv(e),s}function lv(e){Q.H=fu;var t=gt!==null&&gt.next!==null;if(Oi=0,jt=gt=J=null,cu=!1,$a=0,os=null,t)throw Error(U(300));e===null||Zt||(e=e.dependencies,e!==null&&lu(e)&&(Zt=!0))}function uv(e,t,n,i){J=e;var r=0;do{if(as&&(os=null),$a=0,as=!1,25<=r)throw Error(U(301));if(r+=1,jt=gt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Q.H=$A,s=t(n,i)}while(as);return s}function FA(){var e=Q.H,t=e.useState()[0];return t=typeof t.then=="function"?xo(t):t,e=e.useState()[0],(gt!==null?gt.memoizedState:null)!==e&&(J.flags|=1024),t}function qd(){var e=hu!==0;return hu=0,e}function Hd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fd(e){if(cu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}cu=!1}Oi=0,jt=gt=J=null,as=!1,$a=hu=0,os=null}function Te(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?J.memoizedState=jt=e:jt=jt.next=e,jt}function Bt(){if(gt===null){var e=J.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=jt===null?J.memoizedState:jt.next;if(t!==null)jt=t,gt=e;else{if(e===null)throw J.alternate===null?Error(U(467)):Error(U(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},jt===null?J.memoizedState=jt=e:jt=jt.next=e}return jt}function Gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xo(e){var t=$a;return $a+=1,os===null&&(os=[]),e=sv(os,e,t),t=J,(jt===null?t.memoizedState:jt.next)===null&&(t=t.alternate,Q.H=t===null||t.memoizedState===null?Lv:jv),e}function ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xo(e);if(e.$$typeof===Nn)return me(e)}throw Error(U(438,String(e)))}function Yd(e){var t=null,n=J.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=J.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Gd(),J.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=IS;return t.index++,n}function qn(e,t){return typeof t=="function"?t(e):t}function kl(e){var t=Bt();return Qd(t,gt,e)}function Qd(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(ot&p)===p:(Oi&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===ys&&(d=!0);else if((Oi&m)===m){h=h.next,m===ys&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=s):u=u.next=p,J.lanes|=m,Vi|=m;p=h.action,hr&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,J.lanes|=p,Vi|=p;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!Ue(s,e.memoizedState)&&(Zt=!0,d&&(n=ss,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function gh(e){var t=Bt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Ue(s,t.memoizedState)||(Zt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function cv(e,t,n){var i=J,r=Bt(),s=ut;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!Ue((gt||r).memoizedState,n);a&&(r.memoizedState=n,Zt=!0),r=r.queue;var l=dv.bind(null,i,r,e);if(Io(2048,8,l,[e]),r.getSnapshot!==t||a||jt!==null&&jt.memoizedState.tag&1){if(i.flags|=2048,vs(9,oc(),fv.bind(null,i,r,n,t),null),vt===null)throw Error(U(349));s||Oi&124||hv(i,t,n)}return n}function hv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=J.updateQueue,t===null?(t=Gd(),J.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fv(e,t,n,i){t.value=n,t.getSnapshot=i,mv(t)&&gv(e)}function dv(e,t,n){return n(function(){mv(t)&&gv(e)})}function mv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ue(e,n)}catch{return!0}}function gv(e){var t=Ps(e,2);t!==null&&ke(t,e,2)}function _f(e){var t=Te();if(typeof e=="function"){var n=e;if(e=n(),hr){mi(!0);try{n()}finally{mi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:e},t}function pv(e,t,n,i){return e.baseState=n,Qd(e,gt,typeof i=="function"?i:qn)}function GA(e,t,n,i,r){if(lc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Q.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,yv(t,s)):(s.next=n.next,t.pending=n.next=s)}}function yv(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Q.T,a={};Q.T=a;try{var l=n(r,i),u=Q.S;u!==null&&u(a,l),jp(e,t,l)}catch(h){vf(e,t,h)}finally{Q.T=s}}else try{s=n(r,i),jp(e,t,s)}catch(h){vf(e,t,h)}}function jp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){zp(e,t,i)},function(i){return vf(e,t,i)}):zp(e,t,n)}function zp(e,t,n){t.status="fulfilled",t.value=n,_v(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,yv(e,n)))}function vf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,_v(t),t=t.next;while(t!==i)}e.action=null}function _v(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vv(e,t){return t}function Bp(e,t){if(ut){var n=vt.formState;if(n!==null){t:{var i=J;if(ut){if(Dt){e:{for(var r=Dt,s=ln;r.nodeType!==8;){if(!s){r=null;break e}if(r=en(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Dt=en(r.nextSibling),i=r.data==="F!";break t}}ur(i)}i=!1}i&&(t=n[0])}}return n=Te(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vv,lastRenderedState:t},n.queue=i,n=Pv.bind(null,J,i),i.dispatch=n,i=_f(!1),s=Zd.bind(null,J,!1,i.queue),i=Te(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=GA.bind(null,J,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function qp(e){var t=Bt();return Ev(t,gt,e)}function Ev(e,t,n){if(t=Qd(e,t,vv)[0],e=kl(qn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=xo(t)}catch(a){throw a===Ro?sc:a}else i=t;t=Bt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(J.flags|=2048,vs(9,oc(),YA.bind(null,r,n),null)),[i,s,e]}function YA(e,t){e.action=t}function Hp(e){var t=Bt(),n=gt;if(n!==null)return Ev(t,n,e);Bt(),t=t.memoizedState,n=Bt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function vs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=J.updateQueue,t===null&&(t=Gd(),J.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function oc(){return{destroy:void 0,resource:void 0}}function Tv(){return Bt().memoizedState}function Ul(e,t,n,i){var r=Te();i=i===void 0?null:i,J.flags|=e,r.memoizedState=vs(1|t,oc(),n,i)}function Io(e,t,n,i){var r=Bt();i=i===void 0?null:i;var s=r.memoizedState.inst;gt!==null&&i!==null&&zd(i,gt.memoizedState.deps)?r.memoizedState=vs(t,s,n,i):(J.flags|=e,r.memoizedState=vs(1|t,s,n,i))}function Fp(e,t){Ul(8390656,8,e,t)}function bv(e,t){Io(2048,8,e,t)}function Sv(e,t){return Io(4,2,e,t)}function Av(e,t){return Io(4,4,e,t)}function wv(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rv(e,t,n){n=n!=null?n.concat([e]):null,Io(4,4,wv.bind(null,t,e),n)}function Kd(){}function xv(e,t){var n=Bt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&zd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Iv(e,t){var n=Bt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&zd(t,i[1]))return i[0];if(i=e(),hr){mi(!0);try{e()}finally{mi(!1)}}return n.memoizedState=[i,t],i}function Xd(e,t,n){return n===void 0||Oi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=_E(),J.lanes|=e,Vi|=e,n)}function Cv(e,t,n,i){return Ue(n,t)?n:_s.current!==null?(e=Xd(e,n,i),Ue(e,t)||(Zt=!0),e):Oi&42?(e=_E(),J.lanes|=e,Vi|=e,t):(Zt=!0,e.memoizedState=n)}function Nv(e,t,n,i,r){var s=ct.p;ct.p=s!==0&&8>s?s:8;var a=Q.T,l={};Q.T=l,Zd(e,!1,t,n);try{var u=r(),h=Q.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=qA(u,i);Oa(e,t,d,Pe(e))}else Oa(e,t,i,Pe(e))}catch(p){Oa(e,t,{then:function(){},status:"rejected",reason:p},Pe())}finally{ct.p=s,Q.T=a}}function QA(){}function Ef(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=Dv(e).queue;Nv(e,r,t,er,n===null?QA:function(){return Ov(e),n(i)})}function Dv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:er,baseState:er,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:er},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ov(e){var t=Dv(e).next.queue;Oa(e,t,{},Pe())}function $d(){return me(eo)}function Mv(){return Bt().memoizedState}function Vv(){return Bt().memoizedState}function KA(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pe();e=Ei(n);var i=Ti(t,e,n);i!==null&&(ke(i,t,n),Ca(i,t,n)),t={cache:kd()},e.payload=t;return}t=t.return}}function XA(e,t,n){var i=Pe();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},lc(e)?kv(t,n):(n=Od(e,t,n,i),n!==null&&(ke(n,e,i),Uv(n,t,i)))}function Pv(e,t,n){var i=Pe();Oa(e,t,n,i)}function Oa(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(lc(e))kv(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Ue(l,a))return rc(e,t,r,0),vt===null&&ic(),!1}catch{}finally{}if(n=Od(e,t,r,i),n!==null)return ke(n,e,i),Uv(n,t,i),!0}return!1}function Zd(e,t,n,i){if(i={lane:2,revertLane:sm(),action:i,hasEagerState:!1,eagerState:null,next:null},lc(e)){if(t)throw Error(U(479))}else t=Od(e,n,i,2),t!==null&&ke(t,e,2)}function lc(e){var t=e.alternate;return e===J||t!==null&&t===J}function kv(e,t){as=cu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uv(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,x0(e,n)}}var fu={readContext:me,use:ac,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt},Lv={readContext:me,use:ac,useCallback:function(e,t){return Te().memoizedState=[e,t===void 0?null:t],e},useContext:me,useEffect:Fp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ul(4194308,4,wv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ul(4194308,4,e,t)},useInsertionEffect:function(e,t){Ul(4,2,e,t)},useMemo:function(e,t){var n=Te();t=t===void 0?null:t;var i=e();if(hr){mi(!0);try{e()}finally{mi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Te();if(n!==void 0){var r=n(t);if(hr){mi(!0);try{n(t)}finally{mi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=XA.bind(null,J,e),[i.memoizedState,e]},useRef:function(e){var t=Te();return e={current:e},t.memoizedState=e},useState:function(e){e=_f(e);var t=e.queue,n=Pv.bind(null,J,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Kd,useDeferredValue:function(e,t){var n=Te();return Xd(n,e,t)},useTransition:function(){var e=_f(!1);return e=Nv.bind(null,J,e.queue,!0,!1),Te().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=J,r=Te();if(ut){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),vt===null)throw Error(U(349));ot&124||hv(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Fp(dv.bind(null,i,s,e),[e]),i.flags|=2048,vs(9,oc(),fv.bind(null,i,s,n,t),null),n},useId:function(){var e=Te(),t=vt.identifierPrefix;if(ut){var n=On,i=Dn;n=(i&~(1<<32-Ve(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=hu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=HA++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:$d,useFormState:Bp,useActionState:Bp,useOptimistic:function(e){var t=Te();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Zd.bind(null,J,!0,n),n.dispatch=t,[e,t]},useMemoCache:Yd,useCacheRefresh:function(){return Te().memoizedState=KA.bind(null,J)}},jv={readContext:me,use:ac,useCallback:xv,useContext:me,useEffect:bv,useImperativeHandle:Rv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Iv,useReducer:kl,useRef:Tv,useState:function(){return kl(qn)},useDebugValue:Kd,useDeferredValue:function(e,t){var n=Bt();return Cv(n,gt.memoizedState,e,t)},useTransition:function(){var e=kl(qn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:xo(e),t]},useSyncExternalStore:cv,useId:Mv,useHostTransitionStatus:$d,useFormState:qp,useActionState:qp,useOptimistic:function(e,t){var n=Bt();return pv(n,gt,e,t)},useMemoCache:Yd,useCacheRefresh:Vv},$A={readContext:me,use:ac,useCallback:xv,useContext:me,useEffect:bv,useImperativeHandle:Rv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Iv,useReducer:gh,useRef:Tv,useState:function(){return gh(qn)},useDebugValue:Kd,useDeferredValue:function(e,t){var n=Bt();return gt===null?Xd(n,e,t):Cv(n,gt.memoizedState,e,t)},useTransition:function(){var e=gh(qn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:xo(e),t]},useSyncExternalStore:cv,useId:Mv,useHostTransitionStatus:$d,useFormState:Hp,useActionState:Hp,useOptimistic:function(e,t){var n=Bt();return gt!==null?pv(n,gt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:Vv},ls=null,Za=0;function yl(e){var t=Za;return Za+=1,ls===null&&(ls=[]),sv(ls,e,t)}function ua(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _l(e,t){throw t.$$typeof===RS?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Gp(e){var t=e._init;return t(e._payload)}function zv(e){function t(b,v){if(e){var S=b.deletions;S===null?(b.deletions=[v],b.flags|=16):S.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function i(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(b,v){return b=Un(b,v),b.index=0,b.sibling=null,b}function s(b,v,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<v?(b.flags|=67108866,v):S):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function a(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,v,S,x){return v===null||v.tag!==6?(v=fh(S,b.mode,x),v.return=b,v):(v=r(v,S),v.return=b,v)}function u(b,v,S,x){var P=S.type;return P===Hr?d(b,v,S.props.children,x,S.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ri&&Gp(P)===v.type)?(v=r(v,S.props),ua(v,S),v.return=b,v):(v=Vl(S.type,S.key,S.props,null,b.mode,x),ua(v,S),v.return=b,v)}function h(b,v,S,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=dh(S,b.mode,x),v.return=b,v):(v=r(v,S.children||[]),v.return=b,v)}function d(b,v,S,x,P){return v===null||v.tag!==7?(v=nr(S,b.mode,x,P),v.return=b,v):(v=r(v,S),v.return=b,v)}function p(b,v,S){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=fh(""+v,b.mode,S),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cl:return S=Vl(v.type,v.key,v.props,null,b.mode,S),ua(S,v),S.return=b,S;case da:return v=dh(v,b.mode,S),v.return=b,v;case ri:var x=v._init;return v=x(v._payload),p(b,v,S)}if(ma(v)||sa(v))return v=nr(v,b.mode,S,null),v.return=b,v;if(typeof v.then=="function")return p(b,yl(v),S);if(v.$$typeof===Nn)return p(b,gl(b,v),S);_l(b,v)}return null}function m(b,v,S,x){var P=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return P!==null?null:l(b,v,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:return S.key===P?u(b,v,S,x):null;case da:return S.key===P?h(b,v,S,x):null;case ri:return P=S._init,S=P(S._payload),m(b,v,S,x)}if(ma(S)||sa(S))return P!==null?null:d(b,v,S,x,null);if(typeof S.then=="function")return m(b,v,yl(S),x);if(S.$$typeof===Nn)return m(b,v,gl(b,S),x);_l(b,S)}return null}function E(b,v,S,x,P){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return b=b.get(S)||null,l(v,b,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cl:return b=b.get(x.key===null?S:x.key)||null,u(v,b,x,P);case da:return b=b.get(x.key===null?S:x.key)||null,h(v,b,x,P);case ri:var j=x._init;return x=j(x._payload),E(b,v,S,x,P)}if(ma(x)||sa(x))return b=b.get(S)||null,d(v,b,x,P,null);if(typeof x.then=="function")return E(b,v,S,yl(x),P);if(x.$$typeof===Nn)return E(b,v,S,gl(v,x),P);_l(v,x)}return null}function D(b,v,S,x){for(var P=null,j=null,A=v,y=v=0,T=null;A!==null&&y<S.length;y++){A.index>y?(T=A,A=null):T=A.sibling;var w=m(b,A,S[y],x);if(w===null){A===null&&(A=T);break}e&&A&&w.alternate===null&&t(b,A),v=s(w,v,y),j===null?P=w:j.sibling=w,j=w,A=T}if(y===S.length)return n(b,A),ut&&Zi(b,y),P;if(A===null){for(;y<S.length;y++)A=p(b,S[y],x),A!==null&&(v=s(A,v,y),j===null?P=A:j.sibling=A,j=A);return ut&&Zi(b,y),P}for(A=i(A);y<S.length;y++)T=E(A,b,y,S[y],x),T!==null&&(e&&T.alternate!==null&&A.delete(T.key===null?y:T.key),v=s(T,v,y),j===null?P=T:j.sibling=T,j=T);return e&&A.forEach(function(I){return t(b,I)}),ut&&Zi(b,y),P}function O(b,v,S,x){if(S==null)throw Error(U(151));for(var P=null,j=null,A=v,y=v=0,T=null,w=S.next();A!==null&&!w.done;y++,w=S.next()){A.index>y?(T=A,A=null):T=A.sibling;var I=m(b,A,w.value,x);if(I===null){A===null&&(A=T);break}e&&A&&I.alternate===null&&t(b,A),v=s(I,v,y),j===null?P=I:j.sibling=I,j=I,A=T}if(w.done)return n(b,A),ut&&Zi(b,y),P;if(A===null){for(;!w.done;y++,w=S.next())w=p(b,w.value,x),w!==null&&(v=s(w,v,y),j===null?P=w:j.sibling=w,j=w);return ut&&Zi(b,y),P}for(A=i(A);!w.done;y++,w=S.next())w=E(A,b,y,w.value,x),w!==null&&(e&&w.alternate!==null&&A.delete(w.key===null?y:w.key),v=s(w,v,y),j===null?P=w:j.sibling=w,j=w);return e&&A.forEach(function(C){return t(b,C)}),ut&&Zi(b,y),P}function V(b,v,S,x){if(typeof S=="object"&&S!==null&&S.type===Hr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:t:{for(var P=S.key;v!==null;){if(v.key===P){if(P=S.type,P===Hr){if(v.tag===7){n(b,v.sibling),x=r(v,S.props.children),x.return=b,b=x;break t}}else if(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ri&&Gp(P)===v.type){n(b,v.sibling),x=r(v,S.props),ua(x,S),x.return=b,b=x;break t}n(b,v);break}else t(b,v);v=v.sibling}S.type===Hr?(x=nr(S.props.children,b.mode,x,S.key),x.return=b,b=x):(x=Vl(S.type,S.key,S.props,null,b.mode,x),ua(x,S),x.return=b,b=x)}return a(b);case da:t:{for(P=S.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(b,v.sibling),x=r(v,S.children||[]),x.return=b,b=x;break t}else{n(b,v);break}else t(b,v);v=v.sibling}x=dh(S,b.mode,x),x.return=b,b=x}return a(b);case ri:return P=S._init,S=P(S._payload),V(b,v,S,x)}if(ma(S))return D(b,v,S,x);if(sa(S)){if(P=sa(S),typeof P!="function")throw Error(U(150));return S=P.call(S),O(b,v,S,x)}if(typeof S.then=="function")return V(b,v,yl(S),x);if(S.$$typeof===Nn)return V(b,v,gl(b,S),x);_l(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,v!==null&&v.tag===6?(n(b,v.sibling),x=r(v,S),x.return=b,b=x):(n(b,v),x=fh(S,b.mode,x),x.return=b,b=x),a(b)):n(b,v)}return function(b,v,S,x){try{Za=0;var P=V(b,v,S,x);return ls=null,P}catch(A){if(A===Ro||A===sc)throw A;var j=Oe(29,A,null,b.mode);return j.lanes=x,j.return=b,j}finally{}}}var Es=zv(!0),Bv=zv(!1),Xe=Tn(null),fn=null;function oi(e){var t=e.alternate;Rt(Ht,Ht.current&1),Rt(Xe,e),fn===null&&(t===null||_s.current!==null||t.memoizedState!==null)&&(fn=e)}function qv(e){if(e.tag===22){if(Rt(Ht,Ht.current),Rt(Xe,e),fn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(fn=e)}}else li()}function li(){Rt(Ht,Ht.current),Rt(Xe,Xe.current)}function Vn(e){Jt(Xe),fn===e&&(fn=null),Jt(Ht)}var Ht=Tn(0);function du(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Uf(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ph(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Pe(),r=Ei(i);r.payload=t,n!=null&&(r.callback=n),t=Ti(e,r,i),t!==null&&(ke(t,e,i),Ca(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Pe(),r=Ei(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ti(e,r,i),t!==null&&(ke(t,e,i),Ca(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pe(),i=Ei(n);i.tag=2,t!=null&&(i.callback=t),t=Ti(e,i,n),t!==null&&(ke(t,e,n),Ca(t,e,n))}};function Yp(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ka(n,i)||!Ka(r,s):!0}function Qp(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Tf.enqueueReplaceState(t,t.state,null)}function fr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=St({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var mu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hv(e){mu(e)}function Fv(e){console.error(e)}function Gv(e){mu(e)}function gu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Kp(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function bf(e,t,n){return n=Ei(n),n.tag=3,n.payload={element:null},n.callback=function(){gu(e,t)},n}function Yv(e){return e=Ei(e),e.tag=3,e}function Qv(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Kp(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Kp(t,n,i),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function ZA(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ao(t,n,r,!0),n=Xe.current,n!==null){switch(n.tag){case 13:return fn===null?Nf():n.alternate===null&&Ot===0&&(Ot=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===mf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),xh(e,i,r)),!1;case 22:return n.flags|=65536,i===mf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),xh(e,i,r)),!1}throw Error(U(435,n.tag))}return xh(e,i,r),Nf(),!1}if(ut)return t=Xe.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==uf&&(e=Error(U(422),{cause:i}),Xa(Fe(e,n)))):(i!==uf&&(t=Error(U(423),{cause:i}),Xa(Fe(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Fe(i,n),r=bf(e.stateNode,i,r),mh(e,r),Ot!==4&&(Ot=2)),!1;var s=Error(U(520),{cause:i});if(s=Fe(s,n),Pa===null?Pa=[s]:Pa.push(s),Ot!==4&&(Ot=2),t===null)return!0;i=Fe(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=bf(n.stateNode,i,e),mh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(bi===null||!bi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Yv(r),Qv(r,e,n,i),mh(n,r),!1}n=n.return}while(n!==null);return!1}var Kv=Error(U(461)),Zt=!1;function ee(e,t,n,i){t.child=e===null?Bv(t,null,n,i):Es(t,e.child,n,i)}function Xp(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return cr(t),i=Bd(e,t,n,a,s,r),l=qd(),e!==null&&!Zt?(Hd(e,t,r),Hn(e,t,r)):(ut&&l&&Vd(t),t.flags|=1,ee(e,t,i,r),t.child)}function $p(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Md(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Xv(e,t,s,i,r)):(e=Vl(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Wd(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(a,i)&&e.ref===t.ref)return Hn(e,t,r)}return t.flags|=1,e=Un(s,i),e.ref=t.ref,e.return=t,t.child=e}function Xv(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Ka(s,i)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=i=s,Wd(e,r))e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,Hn(e,t,r)}return Sf(e,t,n,i,r)}function $v(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Zp(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pl(t,s!==null?s.cachePool:null),s!==null?Lp(t,s):yf(),qv(t);else return t.lanes=t.childLanes=536870912,Zp(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(Pl(t,s.cachePool),Lp(t,s),li(),t.memoizedState=null):(e!==null&&Pl(t,null),yf(),li());return ee(e,t,r,n),t.child}function Zp(e,t,n,i){var r=Ud();return r=r===null?null:{parent:qt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Pl(t,null),yf(),qv(t),e!==null&&Ao(e,t,i,!0),null}function Ll(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Sf(e,t,n,i,r){return cr(t),n=Bd(e,t,n,i,void 0,r),i=qd(),e!==null&&!Zt?(Hd(e,t,r),Hn(e,t,r)):(ut&&i&&Vd(t),t.flags|=1,ee(e,t,n,r),t.child)}function Wp(e,t,n,i,r,s){return cr(t),t.updateQueue=null,n=uv(t,i,n,r),lv(e),i=qd(),e!==null&&!Zt?(Hd(e,t,s),Hn(e,t,s)):(ut&&i&&Vd(t),t.flags|=1,ee(e,t,n,s),t.child)}function Jp(e,t,n,i,r){if(cr(t),t.stateNode===null){var s=Zr,a=n.contextType;typeof a=="object"&&a!==null&&(s=me(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Ld(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?me(a):Zr,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(ph(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Tf.enqueueReplaceState(s,s.state,null),Da(t,i,s,r),Na(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=fr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Zr,typeof d=="object"&&d!==null&&(a=me(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Qp(t,s,i,a),si=!1;var m=t.memoizedState;s.state=m,Da(t,i,s,r),Na(),h=t.memoizedState,l||m!==h||si?(typeof p=="function"&&(ph(t,n,p,i),h=t.memoizedState),(u=si||Yp(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,gf(e,t),a=t.memoizedProps,d=fr(n,a),s.props=d,p=t.pendingProps,m=s.context,h=n.contextType,u=Zr,typeof h=="object"&&h!==null&&(u=me(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==u)&&Qp(t,s,i,u),si=!1,m=t.memoizedState,s.state=m,Da(t,i,s,r),Na();var E=t.memoizedState;a!==p||m!==E||si||e!==null&&e.dependencies!==null&&lu(e.dependencies)?(typeof l=="function"&&(ph(t,n,l,i),E=t.memoizedState),(d=si||Yp(t,n,d,i,m,E,u)||e!==null&&e.dependencies!==null&&lu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,E,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,E,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=E),s.props=i,s.state=E,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Ll(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Es(t,e.child,null,r),t.child=Es(t,null,n,r)):ee(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Hn(e,t,r),e}function ty(e,t,n,i){return So(),t.flags|=256,ee(e,t,n,i),t.child}var yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _h(e){return{baseLanes:e,cachePool:iv()}}function vh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ke),e}function Zv(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Ht.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ut){if(r?oi(t):li(),ut){var l=Dt,u;if(u=l){t:{for(u=l,l=ln;u.nodeType!==8;){if(!l){l=null;break t}if(u=en(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:ir!==null?{id:Dn,overflow:On}:null,retryLane:536870912,hydrationErrors:null},u=Oe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,_e=t,Dt=null,u=!0):u=!1}u||ur(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Uf(l)?t.lanes=32:t.lanes=536870912,null;Vn(t)}return l=i.children,i=i.fallback,r?(li(),r=t.mode,l=pu({mode:"hidden",children:l},r),i=nr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=_h(n),r.childLanes=vh(e,a,n),t.memoizedState=yh,i):(oi(t),Af(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(oi(t),t.flags&=-257,t=Eh(e,t,n)):t.memoizedState!==null?(li(),t.child=e.child,t.flags|=128,t=null):(li(),r=i.fallback,l=t.mode,i=pu({mode:"visible",children:i.children},l),r=nr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Es(t,e.child,null,n),i=t.child,i.memoizedState=_h(n),i.childLanes=vh(e,a,n),t.memoizedState=yh,t=r);else if(oi(t),Uf(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,Xa({value:i,source:null,stack:null}),t=Eh(e,t,n)}else if(Zt||Ao(e,t,n,!1),a=(n&e.childLanes)!==0,Zt||a){if(a=vt,a!==null&&(i=n&-n,i=i&42?1:bd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Ps(e,i),ke(a,e,i),Kv;l.data==="$?"||Nf(),t=Eh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Dt=en(l.nextSibling),_e=t,ut=!0,rr=null,ln=!1,e!==null&&(Be[qe++]=Dn,Be[qe++]=On,Be[qe++]=ir,Dn=e.id,On=e.overflow,ir=t),t=Af(t,i.children),t.flags|=4096);return t}return r?(li(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Un(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Un(h,r):(r=nr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=_h(n):(u=l.cachePool,u!==null?(h=qt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=iv(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=vh(e,a,n),t.memoizedState=yh,i):(oi(t),n=e.child,e=n.sibling,n=Un(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Af(e,t){return t=pu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function pu(e,t){return e=Oe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Eh(e,t,n){return Es(t,e.child,null,n),e=Af(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ey(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),hf(e.return,t,n)}function Th(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Wv(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ee(e,t,i.children,n),i=Ht.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ey(e,n,t);else if(e.tag===19)ey(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Rt(Ht,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&du(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Th(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&du(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Th(t,!0,n,null,s);break;case"together":Th(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ao(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Wd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&lu(e)))}function WA(e,t,n){switch(t.tag){case 3:tu(t,t.stateNode.containerInfo),ai(t,qt,e.memoizedState.cache),So();break;case 27:case 5:Wh(t);break;case 4:tu(t,t.stateNode.containerInfo);break;case 10:ai(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(oi(t),t.flags|=128,null):n&t.child.childLanes?Zv(e,t,n):(oi(t),e=Hn(e,t,n),e!==null?e.sibling:null);oi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ao(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return Wv(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rt(Ht,Ht.current),i)break;return null;case 22:case 23:return t.lanes=0,$v(e,t,n);case 24:ai(t,qt,e.memoizedState.cache)}return Hn(e,t,n)}function Jv(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Zt=!0;else{if(!Wd(e,n)&&!(t.flags&128))return Zt=!1,WA(e,t,n);Zt=!!(e.flags&131072)}else Zt=!1,ut&&t.flags&1048576&&ev(t,ou,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Md(i)?(e=fr(i,e),t.tag=1,t=Jp(null,t,i,e,n)):(t.tag=0,t=Sf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===vd){t.tag=11,t=Xp(null,t,i,e,n);break t}else if(r===Ed){t.tag=14,t=$p(null,t,i,e,n);break t}}throw t=$h(i)||i,Error(U(306,t,""))}}return t;case 0:return Sf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=fr(i,t.pendingProps),Jp(e,t,i,r,n);case 3:t:{if(tu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,gf(e,t),Da(t,i,null,n);var a=t.memoizedState;if(i=a.cache,ai(t,qt,i),i!==s.cache&&ff(t,[qt],n,!0),Na(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=ty(e,t,i,n);break t}else if(i!==r){r=Fe(Error(U(424)),t),Xa(r),t=ty(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Dt=en(e.firstChild),_e=t,ut=!0,rr=null,ln=!0,n=Bv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(So(),i===r){t=Hn(e,t,n);break t}ee(e,t,i,n)}t=t.child}return t;case 26:return Ll(e,t),e===null?(n=_y(t.type,null,t.pendingProps,null))?t.memoizedState=n:ut||(n=t.type,e=t.pendingProps,i=Su(vi.current).createElement(n),i[de]=t,i[we]=e,se(i,n,e),$t(i),t.stateNode=i):t.memoizedState=_y(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Wh(t),e===null&&ut&&(i=t.stateNode=jE(t.type,t.pendingProps,vi.current),_e=t,ln=!0,r=Dt,qi(t.type)?(Lf=r,Dt=en(i.firstChild)):Dt=r),ee(e,t,t.pendingProps.children,n),Ll(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ut&&((r=i=Dt)&&(i=Rw(i,t.type,t.pendingProps,ln),i!==null?(t.stateNode=i,_e=t,Dt=en(i.firstChild),ln=!1,r=!0):r=!1),r||ur(t)),Wh(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Pf(r,s)?i=null:a!==null&&Pf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Bd(e,t,FA,null,null,n),eo._currentValue=r),Ll(e,t),ee(e,t,i,n),t.child;case 6:return e===null&&ut&&((e=n=Dt)&&(n=xw(n,t.pendingProps,ln),n!==null?(t.stateNode=n,_e=t,Dt=null,e=!0):e=!1),e||ur(t)),null;case 13:return Zv(e,t,n);case 4:return tu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Es(t,null,i,n):ee(e,t,i,n),t.child;case 11:return Xp(e,t,t.type,t.pendingProps,n);case 7:return ee(e,t,t.pendingProps,n),t.child;case 8:return ee(e,t,t.pendingProps.children,n),t.child;case 12:return ee(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ai(t,t.type,i.value),ee(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,cr(t),r=me(r),i=i(r),t.flags|=1,ee(e,t,i,n),t.child;case 14:return $p(e,t,t.type,t.pendingProps,n);case 15:return Xv(e,t,t.type,t.pendingProps,n);case 19:return Wv(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=pu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Un(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return $v(e,t,n);case 24:return cr(t),i=me(qt),e===null?(r=Ud(),r===null&&(r=vt,s=kd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Ld(t),ai(t,qt,r)):(e.lanes&n&&(gf(e,t),Da(t,null,null,n),Na()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ai(t,qt,i)):(i=s.cache,ai(t,qt,i),i!==r.cache&&ff(t,[qt],n,!0))),ee(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function xn(e){e.flags|=4}function ny(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!qE(t)){if(t=Xe.current,t!==null&&((ot&4194048)===ot?fn!==null:(ot&62914560)!==ot&&!(ot&536870912)||t!==fn))throw Ia=mf,rv;e.flags|=8192}}function vl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?w0():536870912,e.lanes|=t,Ts|=t)}function ca(e,t){if(!ut)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function JA(e,t,n){var i=t.pendingProps;switch(Pd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return xt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ln(qt),ms(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(la(t)?xn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Op())),xt(t),null;case 26:return n=t.memoizedState,e===null?(xn(t),n!==null?(xt(t),ny(t,n)):(xt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(xn(t),xt(t),ny(t,n)):(xt(t),t.flags&=-16777217):(e.memoizedProps!==i&&xn(t),xt(t),t.flags&=-16777217),null;case 27:eu(t),n=vi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return xt(t),null}e=cn.current,la(t)?Np(t):(e=jE(r,i,n),t.stateNode=e,xn(t))}return xt(t),null;case 5:if(eu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return xt(t),null}if(e=cn.current,la(t))Np(t);else{switch(r=Su(vi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[de]=t,e[we]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(se(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&xn(t)}}return xt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&xn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=vi.current,la(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=_e,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[de]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||kE(e.nodeValue,n)),e||ur(t)}else e=Su(e).createTextNode(i),e[de]=t,t.stateNode=e}return xt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=la(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[de]=t}else So(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xt(t),r=!1}else r=Op(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Vn(t),t):(Vn(t),null)}if(Vn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),vl(t,t.updateQueue),xt(t),null;case 4:return ms(),e===null&&am(t.stateNode.containerInfo),xt(t),null;case 10:return Ln(t.type),xt(t),null;case 19:if(Jt(Ht),r=t.memoizedState,r===null)return xt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)ca(r,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=du(e),s!==null){for(t.flags|=128,ca(r,!1),e=s.updateQueue,t.updateQueue=e,vl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)tv(n,e),n=n.sibling;return Rt(Ht,Ht.current&1|2),t.child}e=e.sibling}r.tail!==null&&hn()>_u&&(t.flags|=128,i=!0,ca(r,!1),t.lanes=4194304)}else{if(!i)if(e=du(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,vl(t,e),ca(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ut)return xt(t),null}else 2*hn()-r.renderingStartTime>_u&&n!==536870912&&(t.flags|=128,i=!0,ca(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=hn(),t.sibling=null,e=Ht.current,Rt(Ht,i?e&1|2:e&1),t):(xt(t),null);case 22:case 23:return Vn(t),jd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),n=t.updateQueue,n!==null&&vl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Jt(sr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ln(qt),xt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function tw(e,t){switch(Pd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ln(qt),ms(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return eu(t),null;case 13:if(Vn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));So()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(Ht),null;case 4:return ms(),null;case 10:return Ln(t.type),null;case 22:case 23:return Vn(t),jd(),e!==null&&Jt(sr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ln(qt),null;case 25:return null;default:return null}}function tE(e,t){switch(Pd(t),t.tag){case 3:Ln(qt),ms();break;case 26:case 27:case 5:eu(t);break;case 4:ms();break;case 13:Vn(t);break;case 19:Jt(Ht);break;case 10:Ln(t.type);break;case 22:case 23:Vn(t),jd(),e!==null&&Jt(sr);break;case 24:Ln(qt)}}function Co(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){_t(t,t.return,l)}}function Mi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){_t(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){_t(t,t.return,d)}}function eE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ov(t,n)}catch(i){_t(e,e.return,i)}}}function nE(e,t,n){n.props=fr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){_t(e,t,i)}}function Ma(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){_t(e,t,r)}}function un(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){_t(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){_t(e,t,r)}else n.current=null}function iE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){_t(e,e.return,r)}}function bh(e,t,n){try{var i=e.stateNode;Tw(i,e.type,n,t),i[we]=t}catch(r){_t(e,e.return,r)}}function rE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&qi(e.type)||e.tag===4}function Sh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||rE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&qi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fc));else if(i!==4&&(i===27&&qi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(wf(e,t,n),e=e.sibling;e!==null;)wf(e,t,n),e=e.sibling}function yu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&qi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(yu(e,t,n),e=e.sibling;e!==null;)yu(e,t,n),e=e.sibling}function sE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);se(t,i,n),t[de]=e,t[we]=n}catch(s){_t(e,e.return,s)}}var Cn=!1,Pt=!1,Ah=!1,iy=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function ew(e,t){if(e=e.containerInfo,Mf=xu,e=Y0(e),Nd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,p=e,m=null;e:for(;;){for(var E;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==s||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(E=p.firstChild)!==null;)m=p,p=E;for(;;){if(p===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(E=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vf={focusedElem:e,selectionRange:n},xu=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){switch(t=Xt,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var D=fr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){_t(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}}function aE(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ei(e,n),i&4&&Co(5,n);break;case 1:if(ei(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){_t(n,n.return,a)}else{var r=fr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){_t(n,n.return,a)}}i&64&&eE(n),i&512&&Ma(n,n.return);break;case 3:if(ei(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ov(e,t)}catch(a){_t(n,n.return,a)}}break;case 27:t===null&&i&4&&sE(n);case 26:case 5:ei(e,n),t===null&&i&4&&iE(n),i&512&&Ma(n,n.return);break;case 12:ei(e,n);break;case 13:ei(e,n),i&4&&uE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=cw.bind(null,n),Iw(e,n))));break;case 22:if(i=n.memoizedState!==null||Cn,!i){t=t!==null&&t.memoizedState!==null||Pt,r=Cn;var s=Pt;Cn=i,(Pt=t)&&!s?ii(e,n,(n.subtreeFlags&8772)!==0):ei(e,n),Cn=r,Pt=s}break;case 30:break;default:ei(e,n)}}function oE(e){var t=e.alternate;t!==null&&(e.alternate=null,oE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ad(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var At=null,be=!1;function In(e,t,n){for(n=n.child;n!==null;)lE(e,t,n),n=n.sibling}function lE(e,t,n){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(_o,n)}catch{}switch(n.tag){case 26:Pt||un(n,t),In(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Pt||un(n,t);var i=At,r=be;qi(n.type)&&(At=n.stateNode,be=!1),In(e,t,n),Ua(n.stateNode),At=i,be=r;break;case 5:Pt||un(n,t);case 6:if(i=At,r=be,At=null,In(e,t,n),At=i,be=r,At!==null)if(be)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(n.stateNode)}catch(s){_t(n,t,s)}else try{At.removeChild(n.stateNode)}catch(s){_t(n,t,s)}break;case 18:At!==null&&(be?(e=At,gy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ro(e)):gy(At,n.stateNode));break;case 4:i=At,r=be,At=n.stateNode.containerInfo,be=!0,In(e,t,n),At=i,be=r;break;case 0:case 11:case 14:case 15:Pt||Mi(2,n,t),Pt||Mi(4,n,t),In(e,t,n);break;case 1:Pt||(un(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&nE(n,t,i)),In(e,t,n);break;case 21:In(e,t,n);break;case 22:Pt=(i=Pt)||n.memoizedState!==null,In(e,t,n),Pt=i;break;default:In(e,t,n)}}function uE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ro(e)}catch(n){_t(t,t.return,n)}}function nw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new iy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new iy),t;default:throw Error(U(435,e.tag))}}function wh(e,t){var n=nw(e);t.forEach(function(i){var r=hw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ce(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(qi(l.type)){At=l.stateNode,be=!1;break t}break;case 5:At=l.stateNode,be=!1;break t;case 3:case 4:At=l.stateNode.containerInfo,be=!0;break t}l=l.return}if(At===null)throw Error(U(160));lE(s,a,r),At=null,be=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)cE(t,e),t=t.sibling}var We=null;function cE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ce(t,e),Ne(e),i&4&&(Mi(3,e,e.return),Co(3,e),Mi(5,e,e.return));break;case 1:Ce(t,e),Ne(e),i&512&&(Pt||n===null||un(n,n.return)),i&64&&Cn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=We;if(Ce(t,e),Ne(e),i&512&&(Pt||n===null||un(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[To]||s[de]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),se(s,i,n),s[de]=e,$t(s),i=s;break t;case"link":var a=Ey("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),se(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Ey("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),se(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[de]=e,$t(s),i=s}e.stateNode=i}else Ty(r,e.type,e.stateNode);else e.stateNode=vy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Ty(r,e.type,e.stateNode):vy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&bh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ce(t,e),Ne(e),i&512&&(Pt||n===null||un(n,n.return)),n!==null&&i&4&&bh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ce(t,e),Ne(e),i&512&&(Pt||n===null||un(n,n.return)),e.flags&32){r=e.stateNode;try{ps(r,"")}catch(E){_t(e,e.return,E)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,bh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Ah=!0);break;case 6:if(Ce(t,e),Ne(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(E){_t(e,e.return,E)}}break;case 3:if(Bl=null,r=We,We=Au(t.containerInfo),Ce(t,e),We=r,Ne(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(t.containerInfo)}catch(E){_t(e,e.return,E)}Ah&&(Ah=!1,hE(e));break;case 4:i=We,We=Au(e.stateNode.containerInfo),Ce(t,e),Ne(e),We=i;break;case 12:Ce(t,e),Ne(e);break;case 13:Ce(t,e),Ne(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(im=hn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,wh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Cn,d=Pt;if(Cn=h||r,Pt=d||u,Ce(t,e),Pt=d,Cn=h,Ne(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Cn||Pt||Wi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(E){_t(u,u.return,E)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(E){_t(u,u.return,E)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,wh(e,n))));break;case 19:Ce(t,e),Ne(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,wh(e,i)));break;case 30:break;case 21:break;default:Ce(t,e),Ne(e)}}function Ne(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(rE(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=Sh(e);yu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(ps(a,""),n.flags&=-33);var l=Sh(e);yu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Sh(e);wf(e,h,u);break;default:throw Error(U(161))}}catch(d){_t(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hE(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;hE(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ei(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)aE(e,t.alternate,t),t=t.sibling}function Wi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Mi(4,t,t.return),Wi(t);break;case 1:un(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&nE(t,t.return,n),Wi(t);break;case 27:Ua(t.stateNode);case 26:case 5:un(t,t.return),Wi(t);break;case 22:t.memoizedState===null&&Wi(t);break;case 30:Wi(t);break;default:Wi(t)}e=e.sibling}}function ii(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:ii(r,s,n),Co(4,s);break;case 1:if(ii(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){_t(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)av(u[r],l)}catch(h){_t(i,i.return,h)}}n&&a&64&&eE(s),Ma(s,s.return);break;case 27:sE(s);case 26:case 5:ii(r,s,n),n&&i===null&&a&4&&iE(s),Ma(s,s.return);break;case 12:ii(r,s,n);break;case 13:ii(r,s,n),n&&a&4&&uE(r,s);break;case 22:s.memoizedState===null&&ii(r,s,n),Ma(s,s.return);break;case 30:break;default:ii(r,s,n)}t=t.sibling}}function Jd(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&wo(n))}function tm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wo(e))}function an(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fE(e,t,n,i),t=t.sibling}function fE(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:an(e,t,n,i),r&2048&&Co(9,t);break;case 1:an(e,t,n,i);break;case 3:an(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wo(e)));break;case 12:if(r&2048){an(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){_t(t,t.return,u)}}else an(e,t,n,i);break;case 13:an(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?an(e,t,n,i):Va(e,t):s._visibility&2?an(e,t,n,i):(s._visibility|=2,Ur(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Jd(a,t);break;case 24:an(e,t,n,i),r&2048&&tm(t.alternate,t);break;default:an(e,t,n,i)}}function Ur(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Ur(s,a,l,u,r),Co(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Ur(s,a,l,u,r):Va(s,a):(d._visibility|=2,Ur(s,a,l,u,r)),r&&h&2048&&Jd(a.alternate,a);break;case 24:Ur(s,a,l,u,r),r&&h&2048&&tm(a.alternate,a);break;default:Ur(s,a,l,u,r)}t=t.sibling}}function Va(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Va(n,i),r&2048&&Jd(i.alternate,i);break;case 24:Va(n,i),r&2048&&tm(i.alternate,i);break;default:Va(n,i)}t=t.sibling}}var pa=8192;function Mr(e){if(e.subtreeFlags&pa)for(e=e.child;e!==null;)dE(e),e=e.sibling}function dE(e){switch(e.tag){case 26:Mr(e),e.flags&pa&&e.memoizedState!==null&&Bw(We,e.memoizedState,e.memoizedProps);break;case 5:Mr(e);break;case 3:case 4:var t=We;We=Au(e.stateNode.containerInfo),Mr(e),We=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=pa,pa=16777216,Mr(e),pa=t):Mr(e));break;default:Mr(e)}}function mE(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ha(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,pE(i,e)}mE(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gE(e),e=e.sibling}function gE(e){switch(e.tag){case 0:case 11:case 15:ha(e),e.flags&2048&&Mi(9,e,e.return);break;case 3:ha(e);break;case 12:ha(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):ha(e);break;default:ha(e)}}function jl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,pE(i,e)}mE(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Mi(8,t,t.return),jl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function pE(e,t){for(;Xt!==null;){var n=Xt;switch(n.tag){case 0:case 11:case 15:Mi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:wo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Xt=i;else t:for(n=e;Xt!==null;){i=Xt;var r=i.sibling,s=i.return;if(oE(i),i===n){Xt=null;break t}if(r!==null){r.return=s,Xt=r;break t}Xt=s}}}var iw={getCacheForType:function(e){var t=me(qt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},rw=typeof WeakMap=="function"?WeakMap:Map,dt=0,vt=null,nt=null,ot=0,ft=0,De=null,pi=!1,ks=!1,em=!1,Fn=0,Ot=0,Vi=0,ar=0,nm=0,Ke=0,Ts=0,Pa=null,Se=null,Rf=!1,im=0,_u=1/0,vu=null,bi=null,ie=0,Si=null,bs=null,us=0,xf=0,If=null,yE=null,ka=0,Cf=null;function Pe(){if(dt&2&&ot!==0)return ot&-ot;if(Q.T!==null){var e=ys;return e!==0?e:sm()}return I0()}function _E(){Ke===0&&(Ke=!(ot&536870912)||ut?A0():536870912);var e=Xe.current;return e!==null&&(e.flags|=32),Ke}function ke(e,t,n){(e===vt&&(ft===2||ft===9)||e.cancelPendingCommit!==null)&&(Ss(e,0),yi(e,ot,Ke,!1)),Eo(e,n),(!(dt&2)||e!==vt)&&(e===vt&&(!(dt&2)&&(ar|=n),Ot===4&&yi(e,ot,Ke,!1)),bn(e))}function vE(e,t,n){if(dt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||vo(e,t),r=i?ow(e,t):Rh(e,t,!0),s=i;do{if(r===0){ks&&!i&&yi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!sw(n)){r=Rh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=Pa;var u=l.current.memoizedState.isDehydrated;if(u&&(Ss(l,a).flags|=256),a=Rh(l,a,!1),a!==2){if(em&&!u){l.errorRecoveryDisabledLanes|=s,ar|=s,r=4;break t}s=Se,Se=r,s!==null&&(Se===null?Se=s:Se.push.apply(Se,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ss(e,0),yi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:yi(i,t,Ke,!pi);break t;case 2:Se=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=im+300-hn(),10<r)){if(yi(i,t,Ke,!pi),Ju(i,0,!0)!==0)break t;i.timeoutHandle=LE(ry.bind(null,i,n,Se,vu,Rf,t,Ke,ar,Ts,pi,s,2,-0,0),r);break t}ry(i,n,Se,vu,Rf,t,Ke,ar,Ts,pi,s,0,-0,0)}}break}while(!0);bn(e)}function ry(e,t,n,i,r,s,a,l,u,h,d,p,m,E){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(to={stylesheets:null,count:0,unsuspend:zw},dE(t),p=qw(),p!==null)){e.cancelPendingCommit=p(ay.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,E)),yi(e,s,a,!h);return}ay(e,t,s,n,i,r,a,l,u)}function sw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ue(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yi(e,t,n,i){t&=~nm,t&=~ar,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Ve(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&R0(e,n,t)}function uc(){return dt&6?!0:(No(0),!1)}function rm(){if(nt!==null){if(ft===0)var e=nt.return;else e=nt,Mn=br=null,Fd(e),ls=null,Za=0,e=nt;for(;e!==null;)tE(e.alternate,e),e=e.return;nt=null}}function Ss(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Sw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),rm(),vt=e,nt=n=Un(e.current,null),ot=t,ft=0,De=null,pi=!1,ks=vo(e,t),em=!1,Ts=Ke=nm=ar=Vi=Ot=0,Se=Pa=null,Rf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Ve(i),s=1<<r;t|=e[r],i&=~s}return Fn=t,ic(),n}function EE(e,t){J=null,Q.H=fu,t===Ro||t===sc?(t=kp(),ft=3):t===rv?(t=kp(),ft=4):ft=t===Kv?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,De=t,nt===null&&(Ot=1,gu(e,Fe(t,e.current)))}function TE(){var e=Q.H;return Q.H=fu,e===null?fu:e}function bE(){var e=Q.A;return Q.A=iw,e}function Nf(){Ot=4,pi||(ot&4194048)!==ot&&Xe.current!==null||(ks=!0),!(Vi&134217727)&&!(ar&134217727)||vt===null||yi(vt,ot,Ke,!1)}function Rh(e,t,n){var i=dt;dt|=2;var r=TE(),s=bE();(vt!==e||ot!==t)&&(vu=null,Ss(e,t)),t=!1;var a=Ot;t:do try{if(ft!==0&&nt!==null){var l=nt,u=De;switch(ft){case 8:rm(),a=6;break t;case 3:case 2:case 9:case 6:Xe.current===null&&(t=!0);var h=ft;if(ft=0,De=null,ts(e,l,u,h),n&&ks){a=0;break t}break;default:h=ft,ft=0,De=null,ts(e,l,u,h)}}aw(),a=Ot;break}catch(d){EE(e,d)}while(!0);return t&&e.shellSuspendCounter++,Mn=br=null,dt=i,Q.H=r,Q.A=s,nt===null&&(vt=null,ot=0,ic()),a}function aw(){for(;nt!==null;)SE(nt)}function ow(e,t){var n=dt;dt|=2;var i=TE(),r=bE();vt!==e||ot!==t?(vu=null,_u=hn()+500,Ss(e,t)):ks=vo(e,t);t:do try{if(ft!==0&&nt!==null){t=nt;var s=De;e:switch(ft){case 1:ft=0,De=null,ts(e,t,s,1);break;case 2:case 9:if(Pp(s)){ft=0,De=null,sy(t);break}t=function(){ft!==2&&ft!==9||vt!==e||(ft=7),bn(e)},s.then(t,t);break t;case 3:ft=7;break t;case 4:ft=5;break t;case 7:Pp(s)?(ft=0,De=null,sy(t)):(ft=0,De=null,ts(e,t,s,7));break;case 5:var a=null;switch(nt.tag){case 26:a=nt.memoizedState;case 5:case 27:var l=nt;if(!a||qE(a)){ft=0,De=null;var u=l.sibling;if(u!==null)nt=u;else{var h=l.return;h!==null?(nt=h,cc(h)):nt=null}break e}}ft=0,De=null,ts(e,t,s,5);break;case 6:ft=0,De=null,ts(e,t,s,6);break;case 8:rm(),Ot=6;break t;default:throw Error(U(462))}}lw();break}catch(d){EE(e,d)}while(!0);return Mn=br=null,Q.H=i,Q.A=r,dt=n,nt!==null?0:(vt=null,ot=0,ic(),Ot)}function lw(){for(;nt!==null&&!NS();)SE(nt)}function SE(e){var t=Jv(e.alternate,e,Fn);e.memoizedProps=e.pendingProps,t===null?cc(e):nt=t}function sy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wp(n,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=Wp(n,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:Fd(t);default:tE(n,t),t=nt=tv(t,Fn),t=Jv(n,t,Fn)}e.memoizedProps=e.pendingProps,t===null?cc(e):nt=t}function ts(e,t,n,i){Mn=br=null,Fd(t),ls=null,Za=0;var r=t.return;try{if(ZA(e,r,t,n,ot)){Ot=1,gu(e,Fe(n,e.current)),nt=null;return}}catch(s){if(r!==null)throw nt=r,s;Ot=1,gu(e,Fe(n,e.current)),nt=null;return}t.flags&32768?(ut||i===1?e=!0:ks||ot&536870912?e=!1:(pi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Xe.current,i!==null&&i.tag===13&&(i.flags|=16384))),AE(t,e)):cc(t)}function cc(e){var t=e;do{if(t.flags&32768){AE(t,pi);return}e=t.return;var n=JA(t.alternate,t,Fn);if(n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);Ot===0&&(Ot=5)}function AE(e,t){do{var n=tw(e.alternate,e);if(n!==null){n.flags&=32767,nt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=n}while(e!==null);Ot=6,nt=null}function ay(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do hc();while(ie!==0);if(dt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=Dd,zS(e,n,s,a,l,u),e===vt&&(nt=vt=null,ot=0),bs=t,Si=e,us=n,xf=s,If=r,yE=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,fw(nu,function(){return CE(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Q.T,Q.T=null,r=ct.p,ct.p=2,a=dt,dt|=4;try{ew(e,t,n)}finally{dt=a,ct.p=r,Q.T=i}}ie=1,wE(),RE(),xE()}}function wE(){if(ie===1){ie=0;var e=Si,t=bs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Q.T,Q.T=null;var i=ct.p;ct.p=2;var r=dt;dt|=4;try{cE(t,e);var s=Vf,a=Y0(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&G0(l.ownerDocument.documentElement,l)){if(u!==null&&Nd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var E=m.getSelection(),D=l.textContent.length,O=Math.min(u.start,D),V=u.end===void 0?O:Math.min(u.end,D);!E.extend&&O>V&&(a=V,V=O,O=a);var b=xp(l,O),v=xp(l,V);if(b&&v&&(E.rangeCount!==1||E.anchorNode!==b.node||E.anchorOffset!==b.offset||E.focusNode!==v.node||E.focusOffset!==v.offset)){var S=p.createRange();S.setStart(b.node,b.offset),E.removeAllRanges(),O>V?(E.addRange(S),E.extend(v.node,v.offset)):(S.setEnd(v.node,v.offset),E.addRange(S))}}}}for(p=[],E=l;E=E.parentNode;)E.nodeType===1&&p.push({element:E,left:E.scrollLeft,top:E.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var x=p[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}xu=!!Mf,Vf=Mf=null}finally{dt=r,ct.p=i,Q.T=n}}e.current=t,ie=2}}function RE(){if(ie===2){ie=0;var e=Si,t=bs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Q.T,Q.T=null;var i=ct.p;ct.p=2;var r=dt;dt|=4;try{aE(e,t.alternate,t)}finally{dt=r,ct.p=i,Q.T=n}}ie=3}}function xE(){if(ie===4||ie===3){ie=0,DS();var e=Si,t=bs,n=us,i=yE;t.subtreeFlags&10256||t.flags&10256?ie=5:(ie=0,bs=Si=null,IE(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(bi=null),Sd(n),t=t.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(_o,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Q.T,r=ct.p,ct.p=2,Q.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Q.T=t,ct.p=r}}us&3&&hc(),bn(e),r=e.pendingLanes,n&4194090&&r&42?e===Cf?ka++:(ka=0,Cf=e):ka=0,No(0)}}function IE(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wo(t)))}function hc(e){return wE(),RE(),xE(),CE()}function CE(){if(ie!==5)return!1;var e=Si,t=xf;xf=0;var n=Sd(us),i=Q.T,r=ct.p;try{ct.p=32>n?32:n,Q.T=null,n=If,If=null;var s=Si,a=us;if(ie=0,bs=Si=null,us=0,dt&6)throw Error(U(331));var l=dt;if(dt|=4,gE(s.current),fE(s,s.current,a,n),dt=l,No(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(_o,s)}catch{}return!0}finally{ct.p=r,Q.T=i,IE(e,t)}}function oy(e,t,n){t=Fe(n,t),t=bf(e.stateNode,t,2),e=Ti(e,t,2),e!==null&&(Eo(e,2),bn(e))}function _t(e,t,n){if(e.tag===3)oy(e,e,n);else for(;t!==null;){if(t.tag===3){oy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bi===null||!bi.has(i))){e=Fe(n,e),n=Yv(2),i=Ti(t,n,2),i!==null&&(Qv(n,i,t,e),Eo(i,2),bn(i));break}}t=t.return}}function xh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new rw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(em=!0,r.add(n),e=uw.bind(null,e,t,n),t.then(e,e))}function uw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,vt===e&&(ot&n)===n&&(Ot===4||Ot===3&&(ot&62914560)===ot&&300>hn()-im?!(dt&2)&&Ss(e,0):nm|=n,Ts===ot&&(Ts=0)),bn(e)}function NE(e,t){t===0&&(t=w0()),e=Ps(e,t),e!==null&&(Eo(e,t),bn(e))}function cw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),NE(e,n)}function hw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),NE(e,n)}function fw(e,t){return Td(e,t)}var Eu=null,Lr=null,Df=!1,Tu=!1,Ih=!1,or=0;function bn(e){e!==Lr&&e.next===null&&(Lr===null?Eu=Lr=e:Lr=Lr.next=e),Tu=!0,Df||(Df=!0,mw())}function No(e,t){if(!Ih&&Tu){Ih=!0;do for(var n=!1,i=Eu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Ve(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,ly(i,s))}else s=ot,s=Ju(i,i===vt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||vo(i,s)||(n=!0,ly(i,s));i=i.next}while(n);Ih=!1}}function dw(){DE()}function DE(){Tu=Df=!1;var e=0;or!==0&&(bw()&&(e=or),or=0);for(var t=hn(),n=null,i=Eu;i!==null;){var r=i.next,s=OE(i,t);s===0?(i.next=null,n===null?Eu=r:n.next=r,r===null&&(Lr=n)):(n=i,(e!==0||s&3)&&(Tu=!0)),i=r}No(e)}function OE(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Ve(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=jS(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=vt,n=ot,n=Ju(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(ft===2||ft===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&th(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||vo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&th(i),Sd(n)){case 2:case 8:n=b0;break;case 32:n=nu;break;case 268435456:n=S0;break;default:n=nu}return i=ME.bind(null,e),n=Td(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&th(i),e.callbackPriority=2,e.callbackNode=null,2}function ME(e,t){if(ie!==0&&ie!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(hc()&&e.callbackNode!==n)return null;var i=ot;return i=Ju(e,e===vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(vE(e,i,t),OE(e,hn()),e.callbackNode!=null&&e.callbackNode===n?ME.bind(null,e):null)}function ly(e,t){if(hc())return null;vE(e,t,!0)}function mw(){Aw(function(){dt&6?Td(T0,dw):DE()})}function sm(){return or===0&&(or=A0()),or}function uy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Dl(""+e)}function cy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function gw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=uy((r[we]||null).action),a=i.submitter;a&&(t=(t=a[we]||null)?uy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new tc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(or!==0){var u=a?cy(r,a):new FormData(r);Ef(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?cy(r,a):new FormData(r),Ef(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Ch=0;Ch<lf.length;Ch++){var Nh=lf[Ch],pw=Nh.toLowerCase(),yw=Nh[0].toUpperCase()+Nh.slice(1);rn(pw,"on"+yw)}rn(K0,"onAnimationEnd");rn(X0,"onAnimationIteration");rn($0,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(VA,"onTransitionRun");rn(PA,"onTransitionStart");rn(kA,"onTransitionCancel");rn(Z0,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wa));function VE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){mu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){mu(d)}r.currentTarget=null,s=u}}}}function tt(e,t){var n=t[tf];n===void 0&&(n=t[tf]=new Set);var i=e+"__bubble";n.has(i)||(PE(t,e,2,!1),n.add(i))}function Dh(e,t,n){var i=0;t&&(i|=4),PE(n,e,i,t)}var El="_reactListening"+Math.random().toString(36).slice(2);function am(e){if(!e[El]){e[El]=!0,C0.forEach(function(n){n!=="selectionchange"&&(_w.has(n)||Dh(n,!1,e),Dh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[El]||(t[El]=!0,Dh("selectionchange",!1,t))}}function PE(e,t,n,i){switch(QE(t)){case 2:var r=Gw;break;case 8:r=Yw;break;default:r=cm}n=r.bind(null,t,n,e),r=void 0,!sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Oh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Gr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}U0(function(){var h=s,d=Rd(n),p=[];t:{var m=W0.get(e);if(m!==void 0){var E=tc,D=e;switch(e){case"keypress":if(Ml(n)===0)break t;case"keydown":case"keyup":E=fA;break;case"focusin":D="focus",E=lh;break;case"focusout":D="blur",E=lh;break;case"beforeblur":case"afterblur":E=lh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=tA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=gA;break;case K0:case X0:case $0:E=iA;break;case Z0:E=yA;break;case"scroll":case"scrollend":E=WS;break;case"wheel":E=vA;break;case"copy":case"cut":case"paste":E=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=vp;break;case"toggle":case"beforetoggle":E=TA}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),b=O?m!==null?m+"Capture":null:m;O=[];for(var v=h,S;v!==null;){var x=v;if(S=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||S===null||b===null||(x=Ya(v,b),x!=null&&O.push(Ja(v,x,S))),V)break;v=v.return}0<O.length&&(m=new E(m,D,null,n,d),p.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",m&&n!==rf&&(D=n.relatedTarget||n.fromElement)&&(Gr(D)||D[Ms]))break t;if((E||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,E?(D=n.relatedTarget||n.toElement,E=h,D=D?Gr(D):null,D!==null&&(V=yo(D),O=D.tag,D!==V||O!==5&&O!==27&&O!==6)&&(D=null)):(E=null,D=h),E!==D)){if(O=yp,x="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(O=vp,x="onPointerLeave",b="onPointerEnter",v="pointer"),V=E==null?m:ga(E),S=D==null?m:ga(D),m=new O(x,v+"leave",E,n,d),m.target=V,m.relatedTarget=S,x=null,Gr(d)===h&&(O=new O(b,v+"enter",D,n,d),O.target=S,O.relatedTarget=V,x=O),V=x,E&&D)e:{for(O=E,b=D,v=0,S=O;S;S=Vr(S))v++;for(S=0,x=b;x;x=Vr(x))S++;for(;0<v-S;)O=Vr(O),v--;for(;0<S-v;)b=Vr(b),S--;for(;v--;){if(O===b||b!==null&&O===b.alternate)break e;O=Vr(O),b=Vr(b)}O=null}else O=null;E!==null&&hy(p,m,E,O,!1),D!==null&&V!==null&&hy(p,V,D,O,!0)}}t:{if(m=h?ga(h):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var P=Sp;else if(bp(m))if(H0)P=DA;else{P=CA;var j=IA}else E=m.nodeName,!E||E.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&wd(h.elementType)&&(P=Sp):P=NA;if(P&&(P=P(e,h))){q0(p,P,n,d);break t}j&&j(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&nf(m,"number",m.value)}switch(j=h?ga(h):window,e){case"focusin":(bp(j)||j.contentEditable==="true")&&(Kr=j,af=h,Ra=null);break;case"focusout":Ra=af=Kr=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Ip(p,n,d);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":Ip(p,n,d)}var A;if(Cd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Qr?z0(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(j0&&n.locale!=="ko"&&(Qr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qr&&(A=L0()):(gi=d,xd="value"in gi?gi.value:gi.textContent,Qr=!0)),j=bu(h,y),0<j.length&&(y=new _p(y,e,null,n,d),p.push({event:y,listeners:j}),A?y.data=A:(A=B0(n),A!==null&&(y.data=A)))),(A=SA?AA(e,n):wA(e,n))&&(y=bu(h,"onBeforeInput"),0<y.length&&(j=new _p("onBeforeInput","beforeinput",null,n,d),p.push({event:j,listeners:y}),j.data=A)),gw(p,e,h,n,d)}VE(p,t)})}function Ja(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Ya(e,n),r!=null&&i.unshift(Ja(e,r,s)),r=Ya(e,t),r!=null&&i.push(Ja(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Ya(n,s),h!=null&&a.unshift(Ja(n,h,u))):r||(h=Ya(n,s),h!=null&&a.push(Ja(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var vw=/\r\n?/g,Ew=/\u0000|\uFFFD/g;function fy(e){return(typeof e=="string"?e:""+e).replace(vw,`
`).replace(Ew,"")}function kE(e,t){return t=fy(t),fy(e)===t}function fc(){}function mt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ps(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ps(e,""+i);break;case"className":dl(e,"class",i);break;case"tabIndex":dl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(e,n,i);break;case"style":k0(e,i,s);break;case"data":if(t!=="object"){dl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Dl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&mt(e,t,"name",r.name,r,null),mt(e,t,"formEncType",r.formEncType,r,null),mt(e,t,"formMethod",r.formMethod,r,null),mt(e,t,"formTarget",r.formTarget,r,null)):(mt(e,t,"encType",r.encType,r,null),mt(e,t,"method",r.method,r,null),mt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Dl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=fc);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Dl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":tt("beforetoggle",e),tt("toggle",e),Nl(e,"popover",i);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Nl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$S.get(n)||n,Nl(e,n,i))}}function Of(e,t,n,i,r,s){switch(n){case"style":k0(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ps(e,i):(typeof i=="number"||typeof i=="bigint")&&ps(e,""+i);break;case"onScroll":i!=null&&tt("scroll",e);break;case"onScrollEnd":i!=null&&tt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!N0.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[we]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Nl(e,n,i)}}}function se(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:mt(e,t,s,a,n,null)}}r&&mt(e,t,"srcSet",n.srcSet,n,null),i&&mt(e,t,"src",n.src,n,null);return;case"input":tt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:mt(e,t,i,d,n,null)}}M0(e,s,l,u,h,a,r,!1),iu(e);return;case"select":tt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:mt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?is(e,!!i,t,!1):n!=null&&is(e,!!i,n,!0);return;case"textarea":tt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:mt(e,t,a,l,n,null)}P0(e,i,r,s),iu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:mt(e,t,u,i,n,null)}return;case"dialog":tt("beforetoggle",e),tt("toggle",e),tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(i=0;i<Wa.length;i++)tt(Wa[i],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:mt(e,t,h,i,n,null)}return;default:if(wd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Of(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&mt(e,t,l,i,n,null))}function Tw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(E in n){var p=n[E];if(n.hasOwnProperty(E)&&p!=null)switch(E){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(E)||mt(e,t,E,null,i,p)}}for(var m in i){var E=i[m];if(p=n[m],i.hasOwnProperty(m)&&(E!=null||p!=null))switch(m){case"type":s=E;break;case"name":r=E;break;case"checked":h=E;break;case"defaultChecked":d=E;break;case"value":a=E;break;case"defaultValue":l=E;break;case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(U(137,t));break;default:E!==p&&mt(e,t,m,E,i,p)}}ef(e,a,l,u,h,d,s,r);return;case"select":E=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":E=u;default:i.hasOwnProperty(s)||mt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&mt(e,t,r,s,i,u)}t=l,n=a,i=E,m!=null?is(e,!!n,m,!1):!!i!=!!n&&(t!=null?is(e,!!n,t,!0):is(e,!!n,n?[]:"",!1));return;case"textarea":E=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:mt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":E=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&mt(e,t,a,r,i,s)}V0(e,m,E);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:mt(e,t,D,null,i,m)}for(u in i)if(m=i[u],E=n[u],i.hasOwnProperty(u)&&m!==E&&(m!=null||E!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:mt(e,t,u,m,i,E)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&mt(e,t,O,null,i,m);for(h in i)if(m=i[h],E=n[h],i.hasOwnProperty(h)&&m!==E&&(m!=null||E!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:mt(e,t,h,m,i,E)}return;default:if(wd(t)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&Of(e,t,V,void 0,i,m);for(d in i)m=i[d],E=n[d],!i.hasOwnProperty(d)||m===E||m===void 0&&E===void 0||Of(e,t,d,m,i,E);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&mt(e,t,b,null,i,m);for(p in i)m=i[p],E=n[p],!i.hasOwnProperty(p)||m===E||m==null&&E==null||mt(e,t,p,m,i,E)}var Mf=null,Vf=null;function Su(e){return e.nodeType===9?e:e.ownerDocument}function dy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UE(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mh=null;function bw(){var e=window.event;return e&&e.type==="popstate"?e===Mh?!1:(Mh=e,!0):(Mh=null,!1)}var LE=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(e){return my.resolve(null).then(e).catch(ww)}:LE;function ww(e){setTimeout(function(){throw e})}function qi(e){return e==="head"}function gy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&Ua(a.documentElement),n&2&&Ua(a.body),n&4)for(n=a.head,Ua(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[To]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),ro(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);ro(t)}function kf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kf(n),Ad(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Rw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[To])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=en(e.nextSibling),e===null)break}return null}function xw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=en(e.nextSibling),e===null))return null;return e}function Uf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Iw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Lf=null;function py(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function jE(e,t,n){switch(t=Su(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function Ua(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ad(e)}var $e=new Map,yy=new Set;function Au(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xn=ct.d;ct.d={f:Cw,r:Nw,D:Dw,C:Ow,L:Mw,m:Vw,X:kw,S:Pw,M:Uw};function Cw(){var e=Xn.f(),t=uc();return e||t}function Nw(e){var t=Vs(e);t!==null&&t.tag===5&&t.type==="form"?Ov(t):Xn.r(e)}var Us=typeof document>"u"?null:document;function zE(e,t,n){var i=Us;if(i&&typeof t=="string"&&t){var r=He(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),yy.has(r)||(yy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),se(t,"link",e),$t(t),i.head.appendChild(t)))}}function Dw(e){Xn.D(e),zE("dns-prefetch",e,null)}function Ow(e,t){Xn.C(e,t),zE("preconnect",e,t)}function Mw(e,t,n){Xn.L(e,t,n);var i=Us;if(i&&e&&t){var r='link[rel="preload"][as="'+He(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+He(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+He(n.imageSizes)+'"]')):r+='[href="'+He(e)+'"]';var s=r;switch(t){case"style":s=As(e);break;case"script":s=Ls(e)}$e.has(s)||(e=St({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),$e.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Do(s))||t==="script"&&i.querySelector(Oo(s))||(t=i.createElement("link"),se(t,"link",e),$t(t),i.head.appendChild(t)))}}function Vw(e,t){Xn.m(e,t);var n=Us;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+He(i)+'"][href="'+He(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ls(e)}if(!$e.has(s)&&(e=St({rel:"modulepreload",href:e},t),$e.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Oo(s)))return}i=n.createElement("link"),se(i,"link",e),$t(i),n.head.appendChild(i)}}}function Pw(e,t,n){Xn.S(e,t,n);var i=Us;if(i&&e){var r=ns(i).hoistableStyles,s=As(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Do(s)))l.loading=5;else{e=St({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$e.get(s))&&om(e,n);var u=a=i.createElement("link");$t(u),se(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,zl(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function kw(e,t){Xn.X(e,t);var n=Us;if(n&&e){var i=ns(n).hoistableScripts,r=Ls(e),s=i.get(r);s||(s=n.querySelector(Oo(r)),s||(e=St({src:e,async:!0},t),(t=$e.get(r))&&lm(e,t),s=n.createElement("script"),$t(s),se(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Uw(e,t){Xn.M(e,t);var n=Us;if(n&&e){var i=ns(n).hoistableScripts,r=Ls(e),s=i.get(r);s||(s=n.querySelector(Oo(r)),s||(e=St({src:e,async:!0,type:"module"},t),(t=$e.get(r))&&lm(e,t),s=n.createElement("script"),$t(s),se(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function _y(e,t,n,i){var r=(r=vi.current)?Au(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=As(n.href),n=ns(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=As(n.href);var s=ns(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Do(e)))&&!s._p&&(a.instance=s,a.state.loading=5),$e.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$e.set(e,n),s||Lw(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ls(n),n=ns(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function As(e){return'href="'+He(e)+'"'}function Do(e){return'link[rel="stylesheet"]['+e+"]"}function BE(e){return St({},e,{"data-precedence":e.precedence,precedence:null})}function Lw(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),se(t,"link",n),$t(t),e.head.appendChild(t))}function Ls(e){return'[src="'+He(e)+'"]'}function Oo(e){return"script[async]"+e}function vy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+He(n.href)+'"]');if(i)return t.instance=i,$t(i),i;var r=St({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),$t(i),se(i,"style",r),zl(i,n.precedence,e),t.instance=i;case"stylesheet":r=As(n.href);var s=e.querySelector(Do(r));if(s)return t.state.loading|=4,t.instance=s,$t(s),s;i=BE(n),(r=$e.get(r))&&om(i,r),s=(e.ownerDocument||e).createElement("link"),$t(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),se(s,"link",i),t.state.loading|=4,zl(s,n.precedence,e),t.instance=s;case"script":return s=Ls(n.src),(r=e.querySelector(Oo(s)))?(t.instance=r,$t(r),r):(i=n,(r=$e.get(s))&&(i=St({},n),lm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),$t(r),se(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,zl(i,n.precedence,e));return t.instance}function zl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function om(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function lm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Bl=null;function Ey(e,t,n){if(Bl===null){var i=new Map,r=Bl=new Map;r.set(n,i)}else r=Bl,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[To]||s[de]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Ty(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function jw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function qE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var to=null;function zw(){}function Bw(e,t,n){if(to===null)throw Error(U(475));var i=to;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=As(n.href),s=e.querySelector(Do(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=wu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,$t(s);return}s=e.ownerDocument||e,n=BE(n),(r=$e.get(r))&&om(n,r),s=s.createElement("link"),$t(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),se(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=wu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function qw(){if(to===null)throw Error(U(475));var e=to;return e.stylesheets&&e.count===0&&jf(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&jf(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function wu(){if(this.count--,this.count===0){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ru=null;function jf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ru=new Map,t.forEach(Hw,e),Ru=null,wu.call(e))}function Hw(e,t){if(!(t.state.loading&4)){var n=Ru.get(e);if(n)var i=n.get(null);else{n=new Map,Ru.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=wu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var eo={$$typeof:Nn,Provider:null,Consumer:null,_currentValue:er,_currentValue2:er,_threadCount:0};function Fw(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eh(0),this.hiddenUpdates=eh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function HE(e,t,n,i,r,s,a,l,u,h,d,p){return e=new Fw(e,t,n,a,l,u,h,p),t=1,s===!0&&(t|=24),s=Oe(3,null,null,t),e.current=s,s.stateNode=e,t=kd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Ld(s),e}function FE(e){return e?(e=Zr,e):Zr}function GE(e,t,n,i,r,s){r=FE(r),i.context===null?i.context=r:i.pendingContext=r,i=Ei(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ti(e,i,t),n!==null&&(ke(n,e,t),Ca(n,e,t))}function by(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function um(e,t){by(e,t),(e=e.alternate)&&by(e,t)}function YE(e){if(e.tag===13){var t=Ps(e,67108864);t!==null&&ke(t,e,67108864),um(e,67108864)}}var xu=!0;function Gw(e,t,n,i){var r=Q.T;Q.T=null;var s=ct.p;try{ct.p=2,cm(e,t,n,i)}finally{ct.p=s,Q.T=r}}function Yw(e,t,n,i){var r=Q.T;Q.T=null;var s=ct.p;try{ct.p=8,cm(e,t,n,i)}finally{ct.p=s,Q.T=r}}function cm(e,t,n,i){if(xu){var r=zf(i);if(r===null)Oh(e,t,i,Iu,n),Sy(e,i);else if(Kw(r,e,t,n,i))i.stopPropagation();else if(Sy(e,i),t&4&&-1<Qw.indexOf(e)){for(;r!==null;){var s=Vs(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=$i(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Ve(a);l.entanglements[1]|=u,a&=~u}bn(s),!(dt&6)&&(_u=hn()+500,No(0))}}break;case 13:l=Ps(s,2),l!==null&&ke(l,s,2),uc(),um(s,2)}if(s=zf(i),s===null&&Oh(e,t,i,Iu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Oh(e,t,i,null,n)}}function zf(e){return e=Rd(e),hm(e)}var Iu=null;function hm(e){if(Iu=null,e=Gr(e),e!==null){var t=yo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=y0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Iu=e,null}function QE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(OS()){case T0:return 2;case b0:return 8;case nu:case MS:return 32;case S0:return 268435456;default:return 32}default:return 32}}var Bf=!1,Ai=null,wi=null,Ri=null,no=new Map,io=new Map,ui=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sy(e,t){switch(e){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":no.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(t.pointerId)}}function fa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Vs(t),t!==null&&YE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Kw(e,t,n,i,r){switch(t){case"focusin":return Ai=fa(Ai,e,t,n,i,r),!0;case"dragenter":return wi=fa(wi,e,t,n,i,r),!0;case"mouseover":return Ri=fa(Ri,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return no.set(s,fa(no.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,io.set(s,fa(io.get(s)||null,e,t,n,i,r)),!0}return!1}function KE(e){var t=Gr(e.target);if(t!==null){var n=yo(t);if(n!==null){if(t=n.tag,t===13){if(t=y0(n),t!==null){e.blockedOn=t,BS(e.priority,function(){if(n.tag===13){var i=Pe();i=bd(i);var r=Ps(n,i);r!==null&&ke(r,n,i),um(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zf(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);rf=i,n.target.dispatchEvent(i),rf=null}else return t=Vs(n),t!==null&&YE(t),e.blockedOn=n,!1;t.shift()}return!0}function Ay(e,t,n){ql(e)&&n.delete(t)}function Xw(){Bf=!1,Ai!==null&&ql(Ai)&&(Ai=null),wi!==null&&ql(wi)&&(wi=null),Ri!==null&&ql(Ri)&&(Ri=null),no.forEach(Ay),io.forEach(Ay)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,Bf||(Bf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Xw)))}var bl=null;function wy(e){bl!==e&&(bl=e,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,function(){bl===e&&(bl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(hm(i||n)===null)continue;break}var s=Vs(n);s!==null&&(e.splice(t,3),t-=3,Ef(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function ro(e){function t(u){return Tl(u,e)}Ai!==null&&Tl(Ai,e),wi!==null&&Tl(wi,e),Ri!==null&&Tl(Ri,e),no.forEach(t),io.forEach(t);for(var n=0;n<ui.length;n++){var i=ui[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)KE(n),n.blockedOn===null&&ui.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[we]||null;if(typeof s=="function")a||wy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[we]||null)l=a.formAction;else if(hm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),wy(n)}}}function fm(e){this._internalRoot=e}dc.prototype.render=fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Pe();GE(n,i,e,t,null,null)};dc.prototype.unmount=fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;GE(e.current,2,null,e,null,null),uc(),t[Ms]=null}};function dc(e){this._internalRoot=e}dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=I0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ui.length&&t!==0&&t<ui[n].priority;n++);ui.splice(n,0,e),n===0&&KE(e)}};var Ry=g0.version;if(Ry!=="19.1.1")throw Error(U(527,Ry,"19.1.1"));ct.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=wS(t),e=e!==null?_0(e):null,e=e===null?null:e.stateNode,e};var $w={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{_o=Sl.inject($w),Me=Sl}catch{}}Zu.createRoot=function(e,t){if(!p0(e))throw Error(U(299));var n=!1,i="",r=Hv,s=Fv,a=Gv,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=HE(e,1,!1,null,null,n,i,r,s,a,l,null),e[Ms]=t.current,am(e),new fm(t)};Zu.hydrateRoot=function(e,t,n){if(!p0(e))throw Error(U(299));var i=!1,r="",s=Hv,a=Fv,l=Gv,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=HE(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=FE(null),n=t.current,i=Pe(),i=bd(i),r=Ei(i),r.callback=null,Ti(n,r,i),n=i,t.current.lanes=n,Eo(t,n),bn(t),e[Ms]=t.current,am(e),new dc(t)};Zu.version="19.1.1";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(e){console.error(e)}}XE(),u0.exports=Zu;var Zw=u0.exports;const Ww=J_(Zw),Jw=()=>{};var xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},t2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},ZE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,E=h&63;u||(E=64,a||(m=64)),i.push(n[d],n[p],n[m],n[E])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($E(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):t2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new e2;const m=s<<2|l>>4;if(i.push(m),h!==64){const E=l<<4&240|h>>2;if(i.push(E),p!==64){const D=h<<6&192|p;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class e2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n2=function(e){const t=$E(e);return ZE.encodeByteArray(t,!0)},Cu=function(e){return n2(e).replace(/\./g,"")},WE=function(e){try{return ZE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=()=>i2().__FIREBASE_DEFAULTS__,s2=()=>{if(typeof process>"u"||typeof xy>"u")return;const e=xy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},a2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&WE(e[1]);return t&&JSON.parse(t)},mc=()=>{try{return Jw()||r2()||s2()||a2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},JE=e=>{var t,n;return(n=(t=mc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},o2=e=>{const t=JE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},tT=()=>{var e;return(e=mc())==null?void 0:e.config},eT=e=>{var t;return(t=mc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Cu(JSON.stringify(n)),Cu(JSON.stringify(a)),""].join(".")}const La={};function c2(){const e={prod:[],emulator:[]};for(const t of Object.keys(La))La[t]?e.emulator.push(t):e.prod.push(t);return e}function h2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Iy=!1;function iT(e,t){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||La[e]===t||La[e]||Iy)return;La[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=c2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,E){m.setAttribute("width","24"),m.setAttribute("id",E),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Iy=!0,a()},m}function d(m,E){m.setAttribute("id",E),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=h2(i),E=n("text"),D=document.getElementById(E)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),d(V,O);const x=h();u(v,b),S.append(v,D,V,x),document.body.appendChild(S)}s?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ge())}function d2(){var t;const e=(t=mc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function p2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y2(){const e=ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _2(){return!d2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v2(){try{return typeof indexedDB=="object"}catch{return!1}}function E2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="FirebaseError";class $n extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=T2,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mo.prototype.create)}}class Mo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?b2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new $n(r,l,i)}}function b2(e,t){return e.replace(S2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const S2=/\{\$([^}]+)}/g;function A2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Cy(s)&&Cy(a)){if(!dr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Cy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ya(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function _a(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function w2(e,t){const n=new R2(e,t);return n.subscribe.bind(n)}class R2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");x2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Vh),r.error===void 0&&(r.error=Vh),r.complete===void 0&&(r.complete=Vh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(e){return e&&e._delegate?e._delegate:e}class mr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new l2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(N2(t))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Ji){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ji){return this.instances.has(t)}getOptions(t=Ji){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ji){return this.component?this.component.multipleInstances?t:Ji:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C2(e){return e===Ji?void 0:e}function N2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new I2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(it||(it={}));const O2={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},M2=it.INFO,V2={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},P2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=V2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dm{constructor(t){this.name=t,this._logLevel=M2,this._logHandler=P2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in it))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?O2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const k2=(e,t)=>t.some(n=>e instanceof n);let Ny,Dy;function U2(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L2(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rT=new WeakMap,qf=new WeakMap,sT=new WeakMap,Ph=new WeakMap,mm=new WeakMap;function j2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(xi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&rT.set(n,e)}).catch(()=>{}),mm.set(t,e),t}function z2(e){if(qf.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});qf.set(e,t)}let Hf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||sT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function B2(e){Hf=e(Hf)}function q2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(kh(this),t,...n);return sT.set(i,t.sort?t.sort():[t]),xi(i)}:L2().includes(e)?function(...t){return e.apply(kh(this),t),xi(rT.get(this))}:function(...t){return xi(e.apply(kh(this),t))}}function H2(e){return typeof e=="function"?q2(e):(e instanceof IDBTransaction&&z2(e),k2(e,U2())?new Proxy(e,Hf):e)}function xi(e){if(e instanceof IDBRequest)return j2(e);if(Ph.has(e))return Ph.get(e);const t=H2(e);return t!==e&&(Ph.set(e,t),mm.set(t,e)),t}const kh=e=>mm.get(e);function F2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=xi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(xi(a.result),u.oldVersion,u.newVersion,xi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const G2=["get","getKey","getAll","getAllKeys","count"],Y2=["put","add","delete","clear"],Uh=new Map;function Oy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Uh.get(t))return Uh.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Y2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||G2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return Uh.set(t,s),s}B2(e=>({...e,get:(t,n,i)=>Oy(t,n)||e.get(t,n,i),has:(t,n)=>!!Oy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function K2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ff="@firebase/app",My="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new dm("@firebase/app"),X2="@firebase/app-compat",$2="@firebase/analytics-compat",Z2="@firebase/analytics",W2="@firebase/app-check-compat",J2="@firebase/app-check",tR="@firebase/auth",eR="@firebase/auth-compat",nR="@firebase/database",iR="@firebase/data-connect",rR="@firebase/database-compat",sR="@firebase/functions",aR="@firebase/functions-compat",oR="@firebase/installations",lR="@firebase/installations-compat",uR="@firebase/messaging",cR="@firebase/messaging-compat",hR="@firebase/performance",fR="@firebase/performance-compat",dR="@firebase/remote-config",mR="@firebase/remote-config-compat",gR="@firebase/storage",pR="@firebase/storage-compat",yR="@firebase/firestore",_R="@firebase/ai",vR="@firebase/firestore-compat",ER="firebase",TR="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]",bR={[Ff]:"fire-core",[X2]:"fire-core-compat",[Z2]:"fire-analytics",[$2]:"fire-analytics-compat",[J2]:"fire-app-check",[W2]:"fire-app-check-compat",[tR]:"fire-auth",[eR]:"fire-auth-compat",[nR]:"fire-rtdb",[iR]:"fire-data-connect",[rR]:"fire-rtdb-compat",[sR]:"fire-fn",[aR]:"fire-fn-compat",[oR]:"fire-iid",[lR]:"fire-iid-compat",[uR]:"fire-fcm",[cR]:"fire-fcm-compat",[hR]:"fire-perf",[fR]:"fire-perf-compat",[dR]:"fire-rc",[mR]:"fire-rc-compat",[gR]:"fire-gcs",[pR]:"fire-gcs-compat",[yR]:"fire-fst",[vR]:"fire-fst-compat",[_R]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Map,SR=new Map,Yf=new Map;function Vy(e,t){try{e.container.addComponent(t)}catch(n){Gn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ws(e){const t=e.name;if(Yf.has(t))return Gn.debug(`There were multiple attempts to register component ${t}.`),!1;Yf.set(t,e);for(const n of Nu.values())Vy(n,e);for(const n of SR.values())Vy(n,e);return!0}function gm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ge(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Mo("app","Firebase",AR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=TR;function aT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Gf,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Ii.create("bad-app-name",{appName:String(r)});if(n||(n=tT()),!n)throw Ii.create("no-options");const s=Nu.get(r);if(s){if(dr(n,s.options)&&dr(i,s.config))return s;throw Ii.create("duplicate-app",{appName:r})}const a=new D2(r);for(const u of Yf.values())a.addComponent(u);const l=new wR(n,i,a);return Nu.set(r,l),l}function oT(e=Gf){const t=Nu.get(e);if(!t&&e===Gf&&tT())return aT();if(!t)throw Ii.create("no-app",{appName:e});return t}function Ci(e,t,n){let i=bR[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}ws(new mr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",xR=1,so="firebase-heartbeat-store";let Lh=null;function lT(){return Lh||(Lh=F2(RR,xR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(so)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ii.create("idb-open",{originalErrorMessage:e.message})})),Lh}async function IR(e){try{const n=(await lT()).transaction(so),i=await n.objectStore(so).get(uT(e));return await n.done,i}catch(t){if(t instanceof $n)Gn.warn(t.message);else{const n=Ii.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Gn.warn(n.message)}}}async function Py(e,t){try{const i=(await lT()).transaction(so,"readwrite");await i.objectStore(so).put(t,uT(e)),await i.done}catch(n){if(n instanceof $n)Gn.warn(n.message);else{const i=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(i.message)}}}function uT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1024,NR=30;class DR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ky();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>NR){const a=VR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Gn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ky(),{heartbeatsToSend:i,unsentEntries:r}=OR(this._heartbeatsCache.heartbeats),s=Cu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Gn.warn(n),""}}}function ky(){return new Date().toISOString().substring(0,10)}function OR(e,t=CR){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Uy(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Uy(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v2()?E2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Py(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Py(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Uy(e){return Cu(JSON.stringify({version:2,heartbeats:e})).length}function VR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(e){ws(new mr("platform-logger",t=>new Q2(t),"PRIVATE")),ws(new mr("heartbeat",t=>new DR(t),"PRIVATE")),Ci(Ff,My,e),Ci(Ff,My,"esm2020"),Ci("fire-js","")}PR("");var kR="firebase",UR="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(kR,UR,"app");function cT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=cT,hT=new Mo("auth","Firebase",cT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new dm("@firebase/auth");function jR(e,...t){Du.logLevel<=it.WARN&&Du.warn(`Auth (${zs}): ${e}`,...t)}function Hl(e,...t){Du.logLevel<=it.ERROR&&Du.error(`Auth (${zs}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(e,...t){throw pm(e,...t)}function dn(e,...t){return pm(e,...t)}function fT(e,t,n){const i={...LR(),[t]:n};return new Mo("auth","Firebase",i).create(t,{appName:e.name})}function jn(e){return fT(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return hT.create(e,...t)}function G(e,t,...n){if(!e)throw pm(t,...n)}function Pn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hl(t),new Error(t)}function Yn(e,t){e||Pn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function zR(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zR()||g2()||"connection"in navigator)?navigator.onLine:!0}function qR(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yn(n>t,"Short delay should be less than long delay!"),this.isMobile=f2()||p2()}get(){return BR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(e,t){Yn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GR=new Po(3e4,6e4);function Hi(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Fi(e,t,n,i,r={}){return mT(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Vo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return m2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&js(e.emulatorConfig.host)&&(h.credentials="include"),dT.fetch()(await gT(e,e.config.apiHost,n,l),h)})}async function mT(e,t,n){e._canInitEmulator=!1;const i={...HR,...t};try{const r=new QR(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Al(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Al(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Al(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Al(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw fT(e,d,h);nn(e,d)}}catch(r){if(r instanceof $n)throw r;nn(e,"network-request-failed",{message:String(r)})}}async function ko(e,t,n,i,r={}){const s=await Fi(e,t,n,i,r);return"mfaPendingCredential"in s&&nn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function gT(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?ym(e.config,r):`${e.config.apiScheme}://${r}`;return FR.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function YR(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(dn(this.auth,"network-request-failed")),GR.get())})}}function Al(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=dn(e,t,i);return r.customData._tokenResponse=n,r}function jy(e){return e!==void 0&&e.enterprise!==void 0}class KR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return YR(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XR(e,t){return Fi(e,"GET","/v2/recaptchaConfig",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(e,t){return Fi(e,"POST","/v1/accounts:delete",t)}async function Ou(e,t){return Fi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ZR(e,t=!1){const n=Le(e),i=await n.getIdToken(t),r=_m(i);G(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ja(jh(r.auth_time)),issuedAtTime:ja(jh(r.iat)),expirationTime:ja(jh(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jh(e){return Number(e)*1e3}function _m(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{const r=WE(n);return r?JSON.parse(r):(Hl("Failed to decode base64 JWT payload"),null)}catch(r){return Hl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function zy(e){const t=_m(e);return G(t,"internal-error"),G(typeof t.exp<"u","internal-error"),G(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof $n&&WR(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function WR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(e){var p;const t=e.auth,n=await e.getIdToken(),i=await ao(e,Ou(t,{idToken:n}));G(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(p=r.providerUserInfo)!=null&&p.length?pT(r.providerUserInfo):[],a=ex(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Kf(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function tx(e){const t=Le(e);await Mu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ex(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function pT(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(e,t){const n=await mT(e,{},async()=>{const i=Vo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await gT(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&js(e.emulatorConfig.host)&&(u.credentials="include"),dT.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ix(e,t){return Fi(e,"POST","/v2/accounts:revokeToken",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){G(t.idToken,"internal-error"),G(typeof t.idToken<"u","internal-error"),G(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):zy(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){G(t.length!==0,"internal-error");const n=zy(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await nx(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new cs;return i&&(G(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cs,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e,t){G(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Je{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Kf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await ao(this,this.stsTokenManager.getToken(this.auth,t));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ZR(this,t)}reload(){return tx(this)}_assign(t){this!==t&&(G(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Je({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Mu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ge(this.auth.app))return Promise.reject(jn(this.auth));const t=await this.getIdToken();return await ao(this,$R(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:E,providerData:D,stsTokenManager:O}=n;G(p&&O,t,"internal-error");const V=cs.fromJSON(this.name,O);G(typeof p=="string",t,"internal-error"),ni(i,t.name),ni(r,t.name),G(typeof m=="boolean",t,"internal-error"),G(typeof E=="boolean",t,"internal-error"),ni(s,t.name),ni(a,t.name),ni(l,t.name),ni(u,t.name),ni(h,t.name),ni(d,t.name);const b=new Je({uid:p,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(b.providerData=D.map(v=>({...v}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(t,n,i=!1){const r=new cs;r.updateFromServerResponse(n);const s=new Je({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Mu(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];G(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?pT(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new cs;l.updateFromIdToken(i);const u=new Je({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Kf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;function kn(e){Yn(e instanceof Function,"Expected a class definition");let t=By.get(e);return t?(Yn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,By.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}yT.type="NONE";const qy=yT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(e,t,n){return`firebase:${e}:${t}:${n}`}class hs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Fl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fl("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ou(this.auth,{idToken:t}).catch(()=>{});return n?Je._fromGetAccountInfoResponse(this.auth,n,t):null}return Je._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new hs(kn(qy),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||kn(qy);const a=Fl(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const m=await Ou(t,{idToken:d}).catch(()=>{});if(!m)break;p=await Je._fromGetAccountInfoResponse(t,m,d)}else p=Je._fromJSON(t,d);h!==s&&(l=p),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new hs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new hs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(TT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_T(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ST(t))return"Blackberry";if(AT(t))return"Webos";if(vT(t))return"Safari";if((t.includes("chrome/")||ET(t))&&!t.includes("edge/"))return"Chrome";if(bT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function _T(e=ge()){return/firefox\//i.test(e)}function vT(e=ge()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ET(e=ge()){return/crios\//i.test(e)}function TT(e=ge()){return/iemobile/i.test(e)}function bT(e=ge()){return/android/i.test(e)}function ST(e=ge()){return/blackberry/i.test(e)}function AT(e=ge()){return/webos/i.test(e)}function vm(e=ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function rx(e=ge()){var t;return vm(e)&&!!((t=window.navigator)!=null&&t.standalone)}function sx(){return y2()&&document.documentMode===10}function wT(e=ge()){return vm(e)||bT(e)||AT(e)||ST(e)||/windows phone/i.test(e)||TT(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(e,t=[]){let n;switch(e){case"Browser":n=Hy(ge());break;case"Worker":n=`${Hy(ge())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(e,t={}){return Fi(e,"GET","/v2/passwordPolicy",Hi(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=6;class ux{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fy(this),this.idTokenSubscription=new Fy(this),this.beforeStateQueue=new ax(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=kn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await hs.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ou(this,{idToken:t}),i=await Je._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Ge(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Mu(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=qR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ge(this.app))return Promise.reject(jn(this));const n=t?Le(t):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&G(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ge(this.app)?Promise.reject(jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ge(this.app)?Promise.reject(jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ox(this),n=new ux(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Mo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ix(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&kn(t)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await hs.create(this,[kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=RT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&jR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Sr(e){return Le(e)}class Fy{constructor(t){this.auth=t,this.observer=null,this.addObserver=w2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hx(e){gc=e}function xT(e){return gc.loadJS(e)}function fx(){return gc.recaptchaEnterpriseScript}function dx(){return gc.gapiScript}function mx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class gx{constructor(){this.enterprise=new px}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class px{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const yx="recaptcha-enterprise",IT="NO_RECAPTCHA";class _x{constructor(t){this.type=yx,this.auth=Sr(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{XR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new KR(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;jy(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(IT)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gx().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&jy(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fx();u.length!==0&&(u+=l),xT(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function Gy(e,t,n,i=!1,r=!1){const s=new _x(e);let a;if(r)a=IT;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Xf(e,t,n,i,r){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Gy(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Gy(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(e,t){const n=gm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(dr(s,t??{}))return r;nn(r,"already-initialized")}return n.initialize({options:t})}function Ex(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(kn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function Tx(e,t,n){const i=Sr(e);G(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=CT(t),{host:a,port:l}=bx(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){G(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),G(dr(h,i.config.emulator)&&dr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,js(a)?(nT(`${s}//${a}${u}`),iT("Auth",!0)):Sx()}function CT(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bx(e){const t=CT(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Yy(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:Yy(a)}}}function Yy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Sx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(t){return Pn("not implemented")}_linkToIdToken(t,n){return Pn("not implemented")}_getReauthenticationResolver(t){return Pn("not implemented")}}async function Ax(e,t){return Fi(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(e,t){return ko(e,"POST","/v1/accounts:signInWithPassword",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(e,t){return ko(e,"POST","/v1/accounts:signInWithEmailLink",Hi(e,t))}async function xx(e,t){return ko(e,"POST","/v1/accounts:signInWithEmailLink",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Em{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new oo(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new oo(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(t,n,"signInWithPassword",wx);case"emailLink":return Rx(t,{email:this._email,oobCode:this._password});default:nn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(t,i,"signUpPassword",Ax);case"emailLink":return xx(t,{idToken:n,email:this._email,oobCode:this._password});default:nn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fs(e,t){return ko(e,"POST","/v1/accounts:signInWithIdp",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="http://localhost";class gr extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new gr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new gr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return fs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,fs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,fs(t,n)}buildRequest(){const t={requestUri:Ix,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nx(e){const t=ya(_a(e)).link,n=t?ya(_a(t)).deep_link_id:null,i=ya(_a(e)).deep_link_id;return(i?ya(_a(i)).link:null)||i||n||t||e}class Tm{constructor(t){const n=ya(_a(t)),i=n.apiKey??null,r=n.oobCode??null,s=Cx(n.mode??null);G(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=Nx(t);try{return new Tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.providerId=Bs.PROVIDER_ID}static credential(t,n){return oo._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=Tm.parseLink(n);return G(i,"argument-error"),oo._fromEmailAndCode(t,i.code,i.tenantId)}}Bs.PROVIDER_ID="password";Bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends NT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Uo{constructor(){super("facebook.com")}static credential(t){return gr._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ci.credentialFromTaggedObject(t)}static credentialFromError(t){return ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ci.credential(t.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return gr._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return hi.credentialFromTaggedObject(t)}static credentialFromError(t){return hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return hi.credential(n,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Uo{constructor(){super("github.com")}static credential(t){return gr._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return fi.credentialFromTaggedObject(t)}static credentialFromError(t){return fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return fi.credential(t.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Uo{constructor(){super("twitter.com")}static credential(t,n){return gr._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return di.credentialFromTaggedObject(t)}static credentialFromError(t){return di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return di.credential(n,i)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(e,t){return ko(e,"POST","/v1/accounts:signUp",Hi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await Je._fromIdTokenResponse(t,i,r),a=Qy(i);return new pr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=Qy(i);return new pr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function Qy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends $n{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Vu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Vu(t,n,i,r)}}function DT(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Vu._fromErrorAndOperation(e,s,t,i):s})}async function Ox(e,t,n=!1){const i=await ao(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return pr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(e,t,n=!1){const{auth:i}=e;if(Ge(i.app))return Promise.reject(jn(i));const r="reauthenticate";try{const s=await ao(e,DT(i,r,t,e),n);G(s.idToken,i,"internal-error");const a=_m(s.idToken);G(a,i,"internal-error");const{sub:l}=a;return G(e.uid===l,i,"user-mismatch"),pr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(e,t,n=!1){if(Ge(e.app))return Promise.reject(jn(e));const i="signIn",r=await DT(e,i,t),s=await pr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function Vx(e,t){return OT(Sr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(e){const t=Sr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Px(e,t,n){if(Ge(e.app))return Promise.reject(jn(e));const i=Sr(e),a=await Xf(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dx).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&MT(e),u}),l=await pr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function kx(e,t,n){return Ge(e.app)?Promise.reject(jn(e)):Vx(Le(e),Bs.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&MT(e),i})}function Ux(e,t,n,i){return Le(e).onIdTokenChanged(t,n,i)}function Lx(e,t,n){return Le(e).beforeAuthStateChanged(t,n)}function jx(e,t,n,i){return Le(e).onAuthStateChanged(t,n,i)}function zx(e){return Le(e).signOut()}const Pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=1e3,qx=10;class PT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);sx()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,qx):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},Bx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PT.type="LOCAL";const Hx=PT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kT.type="SESSION";const UT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new pc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await Fx(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=bm("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function Yx(e){mn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function Qx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Xx(){return LT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firebaseLocalStorageDb",$x=1,ku="firebaseLocalStorage",zT="fbase_key";class Lo{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yc(e,t){return e.transaction([ku],t?"readwrite":"readonly").objectStore(ku)}function Zx(){const e=indexedDB.deleteDatabase(jT);return new Lo(e).toPromise()}function $f(){const e=indexedDB.open(jT,$x);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(ku,{keyPath:zT})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(ku)?t(i):(i.close(),await Zx(),t(await $f()))})})}async function Ky(e,t,n){const i=yc(e,!0).put({[zT]:t,value:n});return new Lo(i).toPromise()}async function Wx(e,t){const n=yc(e,!1).get(t),i=await new Lo(n).toPromise();return i===void 0?null:i.value}function Xy(e,t){const n=yc(e,!0).delete(t);return new Lo(n).toPromise()}const Jx=800,tI=3;class BT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $f(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>tI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pc._getInstance(Xx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Qx(),!this.activeServiceWorker)return;this.sender=new Gx(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Kx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $f();return await Ky(t,Pu,"1"),await Xy(t,Pu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ky(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Wx(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xy(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=yc(r,!1).getAll();return new Lo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BT.type="LOCAL";const eI=BT;new Po(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(e,t){return t?kn(t):(G(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Em{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return fs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return fs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function iI(e){return OT(e.auth,new Sm(e),e.bypassAuthState)}function rI(e){const{auth:t,user:n}=e;return G(n,t,"internal-error"),Mx(n,new Sm(e),e.bypassAuthState)}async function sI(e){const{auth:t,user:n}=e;return G(n,t,"internal-error"),Ox(n,new Sm(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return rI;default:nn(this.auth,"internal-error")}}resolve(t){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new Po(2e3,1e4);class es extends qT{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return G(t,this.auth,"internal-error"),t}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const t=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,aI.get())};t()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="pendingRedirect",Gl=new Map;class lI extends qT{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Gl.get(this.auth._key());if(!t){try{const i=await uI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Gl.set(this.auth._key(),t)}return this.bypassAuthState||Gl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uI(e,t){const n=fI(t),i=hI(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function cI(e,t){Gl.set(e._key(),t)}function hI(e){return kn(e._redirectPersistence)}function fI(e){return Fl(oI,e.config.apiKey,e.name)}async function dI(e,t,n=!1){if(Ge(e.app))return Promise.reject(jn(e));const i=Sr(e),r=nI(i,t),a=await new lI(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=10*60*1e3;class gI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!pI(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!HT(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mI&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(t))}saveEventToCache(t){this.cachedEventUids.add($y(t)),this.lastProcessedEventTime=Date.now()}}function $y(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function HT({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function pI(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(e,t={}){return Fi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vI=/^https?/;async function EI(e){if(e.config.emulator)return;const{authorizedDomains:t}=await yI(e);for(const n of t)try{if(TI(n))return}catch{}nn(e,"unauthorized-domain")}function TI(e){const t=Qf(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!vI.test(n))return!1;if(_I.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new Po(3e4,6e4);function Zy(){const e=mn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function SI(e){return new Promise((t,n)=>{var r,s,a;function i(){Zy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zy(),n(dn(e,"network-request-failed"))},timeout:bI.get()})}if((s=(r=mn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=mn().gapi)!=null&&a.load)i();else{const l=mx("iframefcb");return mn()[l]=()=>{gapi.load?i():n(dn(e,"network-request-failed"))},xT(`${dx()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Yl=null,t})}let Yl=null;function AI(e){return Yl=Yl||SI(e),Yl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Po(5e3,15e3),RI="__/auth/iframe",xI="emulator/auth/iframe",II={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(e){const t=e.config;G(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ym(t,xI):`https://${e.config.authDomain}/${RI}`,i={apiKey:t.apiKey,appName:e.name,v:zs},r=CI.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Vo(i).slice(1)}`}async function DI(e){const t=await AI(e),n=mn().gapi;return G(n,e,"internal-error"),t.open({where:document.body,url:NI(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:II,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=dn(e,"network-request-failed"),l=mn().setTimeout(()=>{s(a)},wI.get());function u(){mn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MI=500,VI=600,PI="_blank",kI="http://localhost";class Wy{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UI(e,t,n,i=MI,r=VI){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...OI,width:i.toString(),height:r.toString(),top:s,left:a},h=ge().toLowerCase();n&&(l=ET(h)?PI:n),_T(h)&&(t=t||kI,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[E,D])=>`${m}${E}=${D},`,"");if(rx(h)&&l!=="_self")return LI(t||"",l),new Wy(null);const p=window.open(t||"",l,d);G(p,e,"popup-blocked");try{p.focus()}catch{}return new Wy(p)}function LI(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="__/auth/handler",zI="emulator/auth/handler",BI=encodeURIComponent("fac");async function Jy(e,t,n,i,r,s){G(e.config.authDomain,e,"auth-domain-config-required"),G(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:zs,eventId:r};if(t instanceof NT){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",A2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof Uo){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${BI}=${encodeURIComponent(u)}`:"";return`${qI(e)}?${Vo(l).slice(1)}${h}`}function qI({config:e}){return e.emulator?ym(e,zI):`https://${e.authDomain}/${jI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="webStorageSupport";class HI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=dI,this._overrideRedirectResult=cI}async _openPopup(t,n,i,r){var a;Yn((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Jy(t,n,i,Qf(),r);return UI(t,s,bm())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await Jy(t,n,i,Qf(),r);return Yx(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Yn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await DI(t),i=new gI(t);return n.register("authEvent",r=>(G(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(zh,{type:zh},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[zh];s!==void 0&&n(!!s),nn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return wT()||vT()||vm()}}const FI=HI;var t_="@firebase/auth",e_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QI(e){ws(new mr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;G(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RT(e)},h=new cx(i,r,s,u);return Ex(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ws(new mr("auth-internal",t=>{const n=Sr(t.getProvider("auth").getImmediate());return(i=>new GI(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(t_,e_,YI(e)),Ci(t_,e_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=5*60,XI=eT("authIdTokenMaxAge")||KI;let n_=null;const $I=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>XI)return;const r=n==null?void 0:n.token;n_!==r&&(n_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ZI(e=oT()){const t=gm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vx(e,{popupRedirectResolver:FI,persistence:[eI,Hx,UT]}),i=eT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=$I(s.toString());Lx(n,a,()=>a(n.currentUser)),Ux(n,l=>a(l))}}const r=JE("auth");return r&&Tx(n,`http://${r}`),n}function WI(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}hx({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=dn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",WI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QI("Browser");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,FT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,y){function T(){}T.prototype=y.prototype,A.D=y.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(w,I,C){for(var R=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)R[pt-2]=arguments[pt];return y.prototype[I].apply(w,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,y,T){T||(T=0);var w=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)w[I]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(I=0;16>I;++I)w[I]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=A.g[0],T=A.g[1],I=A.g[2];var C=A.g[3],R=y+(C^T&(I^C))+w[0]+3614090360&4294967295;y=T+(R<<7&4294967295|R>>>25),R=C+(I^y&(T^I))+w[1]+3905402710&4294967295,C=y+(R<<12&4294967295|R>>>20),R=I+(T^C&(y^T))+w[2]+606105819&4294967295,I=C+(R<<17&4294967295|R>>>15),R=T+(y^I&(C^y))+w[3]+3250441966&4294967295,T=I+(R<<22&4294967295|R>>>10),R=y+(C^T&(I^C))+w[4]+4118548399&4294967295,y=T+(R<<7&4294967295|R>>>25),R=C+(I^y&(T^I))+w[5]+1200080426&4294967295,C=y+(R<<12&4294967295|R>>>20),R=I+(T^C&(y^T))+w[6]+2821735955&4294967295,I=C+(R<<17&4294967295|R>>>15),R=T+(y^I&(C^y))+w[7]+4249261313&4294967295,T=I+(R<<22&4294967295|R>>>10),R=y+(C^T&(I^C))+w[8]+1770035416&4294967295,y=T+(R<<7&4294967295|R>>>25),R=C+(I^y&(T^I))+w[9]+2336552879&4294967295,C=y+(R<<12&4294967295|R>>>20),R=I+(T^C&(y^T))+w[10]+4294925233&4294967295,I=C+(R<<17&4294967295|R>>>15),R=T+(y^I&(C^y))+w[11]+2304563134&4294967295,T=I+(R<<22&4294967295|R>>>10),R=y+(C^T&(I^C))+w[12]+1804603682&4294967295,y=T+(R<<7&4294967295|R>>>25),R=C+(I^y&(T^I))+w[13]+4254626195&4294967295,C=y+(R<<12&4294967295|R>>>20),R=I+(T^C&(y^T))+w[14]+2792965006&4294967295,I=C+(R<<17&4294967295|R>>>15),R=T+(y^I&(C^y))+w[15]+1236535329&4294967295,T=I+(R<<22&4294967295|R>>>10),R=y+(I^C&(T^I))+w[1]+4129170786&4294967295,y=T+(R<<5&4294967295|R>>>27),R=C+(T^I&(y^T))+w[6]+3225465664&4294967295,C=y+(R<<9&4294967295|R>>>23),R=I+(y^T&(C^y))+w[11]+643717713&4294967295,I=C+(R<<14&4294967295|R>>>18),R=T+(C^y&(I^C))+w[0]+3921069994&4294967295,T=I+(R<<20&4294967295|R>>>12),R=y+(I^C&(T^I))+w[5]+3593408605&4294967295,y=T+(R<<5&4294967295|R>>>27),R=C+(T^I&(y^T))+w[10]+38016083&4294967295,C=y+(R<<9&4294967295|R>>>23),R=I+(y^T&(C^y))+w[15]+3634488961&4294967295,I=C+(R<<14&4294967295|R>>>18),R=T+(C^y&(I^C))+w[4]+3889429448&4294967295,T=I+(R<<20&4294967295|R>>>12),R=y+(I^C&(T^I))+w[9]+568446438&4294967295,y=T+(R<<5&4294967295|R>>>27),R=C+(T^I&(y^T))+w[14]+3275163606&4294967295,C=y+(R<<9&4294967295|R>>>23),R=I+(y^T&(C^y))+w[3]+4107603335&4294967295,I=C+(R<<14&4294967295|R>>>18),R=T+(C^y&(I^C))+w[8]+1163531501&4294967295,T=I+(R<<20&4294967295|R>>>12),R=y+(I^C&(T^I))+w[13]+2850285829&4294967295,y=T+(R<<5&4294967295|R>>>27),R=C+(T^I&(y^T))+w[2]+4243563512&4294967295,C=y+(R<<9&4294967295|R>>>23),R=I+(y^T&(C^y))+w[7]+1735328473&4294967295,I=C+(R<<14&4294967295|R>>>18),R=T+(C^y&(I^C))+w[12]+2368359562&4294967295,T=I+(R<<20&4294967295|R>>>12),R=y+(T^I^C)+w[5]+4294588738&4294967295,y=T+(R<<4&4294967295|R>>>28),R=C+(y^T^I)+w[8]+2272392833&4294967295,C=y+(R<<11&4294967295|R>>>21),R=I+(C^y^T)+w[11]+1839030562&4294967295,I=C+(R<<16&4294967295|R>>>16),R=T+(I^C^y)+w[14]+4259657740&4294967295,T=I+(R<<23&4294967295|R>>>9),R=y+(T^I^C)+w[1]+2763975236&4294967295,y=T+(R<<4&4294967295|R>>>28),R=C+(y^T^I)+w[4]+1272893353&4294967295,C=y+(R<<11&4294967295|R>>>21),R=I+(C^y^T)+w[7]+4139469664&4294967295,I=C+(R<<16&4294967295|R>>>16),R=T+(I^C^y)+w[10]+3200236656&4294967295,T=I+(R<<23&4294967295|R>>>9),R=y+(T^I^C)+w[13]+681279174&4294967295,y=T+(R<<4&4294967295|R>>>28),R=C+(y^T^I)+w[0]+3936430074&4294967295,C=y+(R<<11&4294967295|R>>>21),R=I+(C^y^T)+w[3]+3572445317&4294967295,I=C+(R<<16&4294967295|R>>>16),R=T+(I^C^y)+w[6]+76029189&4294967295,T=I+(R<<23&4294967295|R>>>9),R=y+(T^I^C)+w[9]+3654602809&4294967295,y=T+(R<<4&4294967295|R>>>28),R=C+(y^T^I)+w[12]+3873151461&4294967295,C=y+(R<<11&4294967295|R>>>21),R=I+(C^y^T)+w[15]+530742520&4294967295,I=C+(R<<16&4294967295|R>>>16),R=T+(I^C^y)+w[2]+3299628645&4294967295,T=I+(R<<23&4294967295|R>>>9),R=y+(I^(T|~C))+w[0]+4096336452&4294967295,y=T+(R<<6&4294967295|R>>>26),R=C+(T^(y|~I))+w[7]+1126891415&4294967295,C=y+(R<<10&4294967295|R>>>22),R=I+(y^(C|~T))+w[14]+2878612391&4294967295,I=C+(R<<15&4294967295|R>>>17),R=T+(C^(I|~y))+w[5]+4237533241&4294967295,T=I+(R<<21&4294967295|R>>>11),R=y+(I^(T|~C))+w[12]+1700485571&4294967295,y=T+(R<<6&4294967295|R>>>26),R=C+(T^(y|~I))+w[3]+2399980690&4294967295,C=y+(R<<10&4294967295|R>>>22),R=I+(y^(C|~T))+w[10]+4293915773&4294967295,I=C+(R<<15&4294967295|R>>>17),R=T+(C^(I|~y))+w[1]+2240044497&4294967295,T=I+(R<<21&4294967295|R>>>11),R=y+(I^(T|~C))+w[8]+1873313359&4294967295,y=T+(R<<6&4294967295|R>>>26),R=C+(T^(y|~I))+w[15]+4264355552&4294967295,C=y+(R<<10&4294967295|R>>>22),R=I+(y^(C|~T))+w[6]+2734768916&4294967295,I=C+(R<<15&4294967295|R>>>17),R=T+(C^(I|~y))+w[13]+1309151649&4294967295,T=I+(R<<21&4294967295|R>>>11),R=y+(I^(T|~C))+w[4]+4149444226&4294967295,y=T+(R<<6&4294967295|R>>>26),R=C+(T^(y|~I))+w[11]+3174756917&4294967295,C=y+(R<<10&4294967295|R>>>22),R=I+(y^(C|~T))+w[2]+718787259&4294967295,I=C+(R<<15&4294967295|R>>>17),R=T+(C^(I|~y))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+I&4294967295,A.g[3]=A.g[3]+C&4294967295}i.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var T=y-this.blockSize,w=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=T;)r(this,A,C),C+=this.blockSize;if(typeof A=="string"){for(;C<y;)if(w[I++]=A.charCodeAt(C++),I==this.blockSize){r(this,w),I=0;break}}else for(;C<y;)if(w[I++]=A[C++],I==this.blockSize){r(this,w),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var T=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=T&255,T/=256;for(this.u(A),A=Array(16),y=T=0;4>y;++y)for(var w=0;32>w;w+=8)A[T++]=this.g[y]>>>w&255;return A};function s(A,y){var T=l;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=y(A)}function a(A,y){this.h=y;for(var T=[],w=!0,I=A.length-1;0<=I;I--){var C=A[I]|0;w&&C==y||(T[I]=C,w=!1)}this.g=T}var l={};function u(A){return-128<=A&&128>A?s(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return V(h(-A));for(var y=[],T=1,w=0;A>=T;w++)y[w]=A/T|0,T*=4294967296;return new a(y,0)}function d(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return V(d(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),w=p,I=0;I<A.length;I+=8){var C=Math.min(8,A.length-I),R=parseInt(A.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),w=w.j(C).add(h(R))):(w=w.j(T),w=w.add(h(R)))}return w}var p=u(0),m=u(1),E=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var A=0,y=1,T=0;T<this.g.length;T++){var w=this.i(T);A+=(0<=w?w:4294967296+w)*y,y*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D(this))return"0";if(O(this))return"-"+V(this).toString(A);for(var y=h(Math.pow(A,6)),T=this,w="";;){var I=x(T,y).g;T=b(T,I.j(y));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=I,D(T))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function D(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function O(A){return A.h==-1}e.l=function(A){return A=b(this,A),O(A)?-1:D(A)?0:1};function V(A){for(var y=A.g.length,T=[],w=0;w<y;w++)T[w]=~A.g[w];return new a(T,~A.h).add(m)}e.abs=function(){return O(this)?V(this):this},e.add=function(A){for(var y=Math.max(this.g.length,A.g.length),T=[],w=0,I=0;I<=y;I++){var C=w+(this.i(I)&65535)+(A.i(I)&65535),R=(C>>>16)+(this.i(I)>>>16)+(A.i(I)>>>16);w=R>>>16,C&=65535,R&=65535,T[I]=R<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(A,y){return A.add(V(y))}e.j=function(A){if(D(this)||D(A))return p;if(O(this))return O(A)?V(this).j(V(A)):V(V(this).j(A));if(O(A))return V(this.j(V(A)));if(0>this.l(E)&&0>A.l(E))return h(this.m()*A.m());for(var y=this.g.length+A.g.length,T=[],w=0;w<2*y;w++)T[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<A.g.length;I++){var C=this.i(w)>>>16,R=this.i(w)&65535,pt=A.i(I)>>>16,Qt=A.i(I)&65535;T[2*w+2*I]+=R*Qt,v(T,2*w+2*I),T[2*w+2*I+1]+=C*Qt,v(T,2*w+2*I+1),T[2*w+2*I+1]+=R*pt,v(T,2*w+2*I+1),T[2*w+2*I+2]+=C*pt,v(T,2*w+2*I+2)}for(w=0;w<y;w++)T[w]=T[2*w+1]<<16|T[2*w];for(w=y;w<2*y;w++)T[w]=0;return new a(T,0)};function v(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function S(A,y){this.g=A,this.h=y}function x(A,y){if(D(y))throw Error("division by zero");if(D(A))return new S(p,p);if(O(A))return y=x(V(A),y),new S(V(y.g),V(y.h));if(O(y))return y=x(A,V(y)),new S(V(y.g),y.h);if(30<A.g.length){if(O(A)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,w=y;0>=w.l(A);)T=P(T),w=P(w);var I=j(T,1),C=j(w,1);for(w=j(w,2),T=j(T,2);!D(w);){var R=C.add(w);0>=R.l(A)&&(I=I.add(T),C=R),w=j(w,1),T=j(T,1)}return y=b(A,I.j(y)),new S(I,y)}for(I=p;0<=A.l(y);){for(T=Math.max(1,Math.floor(A.m()/y.m())),w=Math.ceil(Math.log(T)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=h(T),R=C.j(y);O(R)||0<R.l(A);)T-=w,C=h(T),R=C.j(y);D(C)&&(C=m),I=I.add(C),A=b(A,R)}return new S(I,A)}e.A=function(A){return x(this,A).h},e.and=function(A){for(var y=Math.max(this.g.length,A.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)&A.i(w);return new a(T,this.h&A.h)},e.or=function(A){for(var y=Math.max(this.g.length,A.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)|A.i(w);return new a(T,this.h|A.h)},e.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)^A.i(w);return new a(T,this.h^A.h)};function P(A){for(var y=A.g.length+1,T=[],w=0;w<y;w++)T[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(T,A.h)}function j(A,y){var T=y>>5;y%=32;for(var w=A.g.length-T,I=[],C=0;C<w;C++)I[C]=0<y?A.i(C+T)>>>y|A.i(C+T+1)<<32-y:A.i(C+T);return new a(I,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,FT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Ni=a}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GT,va,YT,Ql,Zf,QT,KT,XT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof wl=="object"&&wl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var _=0;_<o.length-1;_++){var N=o[_];if(!(N in f))break t;f=f[N]}o=o[o.length-1],_=f[o],c=c(_),c!=_&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,_=!1,N={next:function(){if(!_&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function E(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(_,N,M){for(var z=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)z[yt-2]=arguments[yt];return c.prototype[N].apply(_,z)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let _=0;_<c;_++)f[_]=o[_];return f}return[]}function V(o,c){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const N=o.length||0,M=_.length||0;o.length=N+M;for(let z=0;z<M;z++)o[N+z]=_[z]}else o.push(_)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var P=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(o,c,f){for(const _ in o)c.call(f,o[_],_,o)}function A(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(f in _)o[f]=_[f];for(let M=0;M<T.length;M++)f=T[M],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function R(){var o=Et;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class pt{constructor(){this.h=this.g=null}add(c,f){const _=Qt.get();_.set(c,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Qt=new b(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,$=!1,Et=new pt,Mt=()=>{const o=l.Promise.resolve(void 0);K=()=>{o.then(Ir)}};var Ir=()=>{for(var o;o=R();){try{o.h.call(o.g)}catch(f){C(f)}var c=Qt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function sn(o,c){if(Ut.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(P){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Sb[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&sn.aa.h.call(this)}}D(sn,Ut);var Sb={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Fo="closure_listenable_"+(1e6*Math.random()|0),Ab=0;function wb(o,c,f,_,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!_,this.ha=N,this.key=++Ab,this.da=this.fa=!1}function Go(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Yo(o){this.src=o,this.g={},this.h=0}Yo.prototype.add=function(o,c,f,_,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var z=Dc(o,c,_,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new wb(c,this.src,M,!!_,N),c.fa=f,o.push(c)),c};function Nc(o,c){var f=c.type;if(f in o.g){var _=o.g[f],N=Array.prototype.indexOf.call(_,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(_,N,1),M&&(Go(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Dc(o,c,f,_){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==_)return N}return-1}var Oc="closure_lm_"+(1e6*Math.random()|0),Mc={};function ig(o,c,f,_,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)ig(o,c[M],f,_,N);return null}return f=ag(f),o&&o[Fo]?o.K(c,f,h(_)?!!_.capture:!1,N):Rb(o,c,f,!1,_,N)}function Rb(o,c,f,_,N,M){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,yt=Pc(o);if(yt||(o[Oc]=yt=new Yo(o)),f=yt.add(c,f,_,z,M),f.proxy)return f;if(_=xb(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)Sn||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),_,N);else if(o.attachEvent)o.attachEvent(sg(c.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function xb(){function o(f){return c.call(o.src,o.listener,f)}const c=Ib;return o}function rg(o,c,f,_,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)rg(o,c[M],f,_,N);else _=h(_)?!!_.capture:!!_,f=ag(f),o&&o[Fo]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=Dc(M,f,_,N),-1<f&&(Go(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Pc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Dc(c,f,_,N)),(f=-1<o?c[o]:null)&&Vc(f))}function Vc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Fo])Nc(c.i,o);else{var f=o.type,_=o.proxy;c.removeEventListener?c.removeEventListener(f,_,o.capture):c.detachEvent?c.detachEvent(sg(f),_):c.addListener&&c.removeListener&&c.removeListener(_),(f=Pc(c))?(Nc(f,o),f.h==0&&(f.src=null,c[Oc]=null)):Go(o)}}}function sg(o){return o in Mc?Mc[o]:Mc[o]="on"+o}function Ib(o,c){if(o.da)o=!0;else{c=new sn(c,this);var f=o.listener,_=o.ha||o.src;o.fa&&Vc(o),o=f.call(_,c)}return o}function Pc(o){return o=o[Oc],o instanceof Yo?o:null}var kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function ag(o){return typeof o=="function"?o:(o[kc]||(o[kc]=function(c){return o.handleEvent(c)}),o[kc])}function oe(){xe.call(this),this.i=new Yo(this),this.M=this,this.F=null}D(oe,xe),oe.prototype[Fo]=!0,oe.prototype.removeEventListener=function(o,c,f,_){rg(this,o,c,f,_)};function pe(o,c){var f,_=o.F;if(_)for(f=[];_;_=_.F)f.push(_);if(o=o.M,_=c.type||c,typeof c=="string")c=new Ut(c,o);else if(c instanceof Ut)c.target=c.target||o;else{var N=c;c=new Ut(_,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var z=c.g=f[M];N=Qo(z,_,!0,c)&&N}if(z=c.g=o,N=Qo(z,_,!0,c)&&N,N=Qo(z,_,!1,c)&&N,f)for(M=0;M<f.length;M++)z=c.g=f[M],N=Qo(z,_,!1,c)&&N}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],_=0;_<f.length;_++)Go(f[_]);delete o.g[c],o.h--}}this.F=null},oe.prototype.K=function(o,c,f,_){return this.i.add(String(o),c,!1,f,_)},oe.prototype.L=function(o,c,f,_){return this.i.add(String(o),c,!0,f,_)};function Qo(o,c,f,_){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var z=c[M];if(z&&!z.da&&z.capture==f){var yt=z.listener,te=z.ha||z.src;z.fa&&Nc(o.i,z),N=yt.call(te,_)!==!1&&N}}return N&&!_.defaultPrevented}function og(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function lg(o){o.g=og(()=>{o.g=null,o.i&&(o.i=!1,lg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Cb extends xe{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(o){xe.call(this),this.h=o,this.g={}}D(Ys,xe);var ug=[];function cg(o){j(o.g,function(c,f){this.g.hasOwnProperty(f)&&Vc(c)},o),o.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),cg(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uc=l.JSON.stringify,Nb=l.JSON.parse,Db=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Lc(){}Lc.prototype.h=null;function hg(o){return o.h||(o.h=o.i())}function fg(){}var Qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jc(){Ut.call(this,"d")}D(jc,Ut);function zc(){Ut.call(this,"c")}D(zc,Ut);var Gi={},dg=null;function Ko(){return dg=dg||new oe}Gi.La="serverreachability";function mg(o){Ut.call(this,Gi.La,o)}D(mg,Ut);function Ks(o){const c=Ko();pe(c,new mg(c))}Gi.STAT_EVENT="statevent";function gg(o,c){Ut.call(this,Gi.STAT_EVENT,o),this.stat=c}D(gg,Ut);function ye(o){const c=Ko();pe(c,new gg(c,o))}Gi.Ma="timingevent";function pg(o,c){Ut.call(this,Gi.Ma,o),this.size=c}D(pg,Ut);function Xs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function Ob(o,c,f,_,N,M){o.info(function(){if(o.g)if(M)for(var z="",yt=M.split("&"),te=0;te<yt.length;te++){var lt=yt[te].split("=");if(1<lt.length){var le=lt[0];lt=lt[1];var ue=le.split("_");z=2<=ue.length&&ue[1]=="type"?z+(le+"="+lt+"&"):z+(le+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function Mb(o,c,f,_,N,M,z){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+z})}function Cr(o,c,f,_){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Pb(o,f)+(_?" "+_:"")})}function Vb(o,c){o.info(function(){return"TIMEOUT: "+c})}$s.prototype.info=function(){};function Pb(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var _=f[o];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Uc(f)}catch{return c}}var Xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bc;function $o(){}D($o,Lc),$o.prototype.g=function(){return new XMLHttpRequest},$o.prototype.i=function(){return{}},Bc=new $o;function Zn(o,c,f,_){this.j=o,this.i=c,this.l=f,this.R=_||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}var vg={},qc={};function Hc(o,c,f){o.L=1,o.v=tl(An(c)),o.m=f,o.P=!0,Eg(o,null)}function Eg(o,c){o.F=Date.now(),Zo(o),o.A=An(o.v);var f=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),Vg(f.i,"t",_),o.C=0,f=o.j.J,o.h=new _g,o.g=Wg(o.j,f?c:null,!o.m),0<o.O&&(o.M=new Cb(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,_=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(ug[0]=N.toString()),N=ug);for(var M=0;M<N.length;M++){var z=ig(f,N[M],_||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ks(),Ob(o.i,o.u,o.A,o.l,o.R,o.m)}Zn.prototype.ca=function(o){o=o.target;const c=this.M;c&&wn(o)==3?c.j():this.Y(o)},Zn.prototype.Y=function(o){try{if(o==this.g)t:{const ue=wn(this.g);var c=this.g.Ba();const Or=this.g.Z();if(!(3>ue)&&(ue!=3||this.g&&(this.h.h||this.g.oa()||Bg(this.g)))){this.J||ue!=4||c==7||(c==8||0>=Or?Ks(3):Ks(2)),Fc(this);var f=this.g.Z();this.X=f;e:if(Tg(this)){var _=Bg(this.g);o="";var N=_.length,M=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Zs(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(_[c],{stream:!(M&&c==N-1)});_.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,Mb(this.i,this.u,this.A,this.l,this.R,ue,f),this.o){if(this.T&&!this.K){e:{if(this.g){var yt,te=this.g;if((yt=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(yt)){var lt=yt;break e}}lt=null}if(f=lt)Cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gc(this,f);else{this.o=!1,this.s=3,ye(12),Yi(this),Zs(this);break t}}if(this.P){f=!0;let Ze;for(;!this.J&&this.C<z.length;)if(Ze=kb(this,z),Ze==qc){ue==4&&(this.s=4,ye(14),f=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==vg){this.s=4,ye(15),Cr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Cr(this.i,this.l,Ze,null),Gc(this,Ze);if(Tg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||z.length!=0||this.h.h||(this.s=1,ye(16),f=!1),this.o=this.o&&f,!f)Cr(this.i,this.l,z,"[Invalid Chunked Response]"),Yi(this),Zs(this);else if(0<z.length&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.ba&&!le.M&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Zc(le),le.M=!0,ye(11))}}else Cr(this.i,this.l,z,null),Gc(this,z);ue==4&&Yi(this),this.o&&!this.J&&(ue==4?Kg(this.j,this):(this.o=!1,Zo(this)))}else Jb(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,ye(12)):(this.s=0,ye(13)),Yi(this),Zs(this)}}}catch{}finally{}};function Tg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function kb(o,c){var f=o.C,_=c.indexOf(`
`,f);return _==-1?qc:(f=Number(c.substring(f,_)),isNaN(f)?vg:(_+=1,_+f>c.length?qc:(c=c.slice(_,_+f),o.C=_+f,c)))}Zn.prototype.cancel=function(){this.J=!0,Yi(this)};function Zo(o){o.S=Date.now()+o.I,bg(o,o.I)}function bg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Xs(m(o.ba,o),c)}function Fc(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Zn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Vb(this.i,this.A),this.L!=2&&(Ks(),ye(17)),Yi(this),this.s=2,Zs(this)):bg(this,this.S-o)};function Zs(o){o.j.G==0||o.J||Kg(o.j,o)}function Yi(o){Fc(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,cg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Gc(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Yc(f.h,o))){if(!o.K&&Yc(f.h,o)&&f.G==3){try{var _=f.Da.g.parse(c)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)al(f),rl(f);else break t;$c(f),ye(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xs(m(f.Za,f),6e3));if(1>=wg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ki(f,11)}else if((o.K||f.g==o)&&al(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let lt=N[c];if(f.T=lt[0],lt=lt[1],f.G==2)if(lt[0]=="c"){f.K=lt[1],f.ia=lt[2];const le=lt[3];le!=null&&(f.la=le,f.j.info("VER="+f.la));const ue=lt[4];ue!=null&&(f.Aa=ue,f.j.info("SVER="+f.Aa));const Or=lt[5];Or!=null&&typeof Or=="number"&&0<Or&&(_=1.5*Or,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Ze=o.g;if(Ze){const ll=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var M=_.h;M.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Qc(M,M.h),M.h=null))}if(_.D){const Wc=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;Wc&&(_.ya=Wc,Tt(_.I,_.D,Wc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var z=o;if(_.qa=Zg(_,_.J?_.ia:null,_.W),z.K){Rg(_.h,z);var yt=z,te=_.L;te&&(yt.I=te),yt.B&&(Fc(yt),Zo(yt)),_.g=z}else Yg(_);0<f.i.length&&sl(f)}else lt[0]!="stop"&&lt[0]!="close"||Ki(f,7);else f.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Ki(f,7):Xc(f):lt[0]!="noop"&&f.l&&f.l.ta(lt),f.v=0)}}Ks(4)}catch{}}var Ub=class{constructor(o,c){this.g=o,this.map=c}};function Sg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ag(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function wg(o){return o.h?1:o.g?o.g.size:0}function Yc(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Qc(o,c){o.g?o.g.add(c):o.h=c}function Rg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Sg.prototype.cancel=function(){if(this.i=xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function xg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function Lb(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,_=0;_<f;_++)c.push(o[_]);return c}c=[],f=0;for(_ in o)c[f++]=o[_];return c}function jb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const _ in o)c[f++]=_;return c}}}function Ig(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=jb(o),_=Lb(o),N=_.length,M=0;M<N;M++)c.call(void 0,_[M],f&&f[M],o)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zb(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var _=o[f].indexOf("="),N=null;if(0<=_){var M=o[f].substring(0,_);N=o[f].substring(_+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Qi(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Qi){this.h=o.h,Wo(this,o.j),this.o=o.o,this.g=o.g,Jo(this,o.s),this.l=o.l;var c=o.i,f=new ta;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Ng(this,f),this.m=o.m}else o&&(c=String(o).match(Cg))?(this.h=!1,Wo(this,c[1]||"",!0),this.o=Ws(c[2]||""),this.g=Ws(c[3]||"",!0),Jo(this,c[4]),this.l=Ws(c[5]||"",!0),Ng(this,c[6]||"",!0),this.m=Ws(c[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}Qi.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Js(c,Dg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Js(c,Dg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Js(f,f.charAt(0)=="/"?Hb:qb,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Js(f,Gb)),o.join("")};function An(o){return new Qi(o)}function Wo(o,c,f){o.j=f?Ws(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Jo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Ng(o,c,f){c instanceof ta?(o.i=c,Yb(o.i,o.h)):(f||(c=Js(c,Fb)),o.i=new ta(c,o.h))}function Tt(o,c,f){o.i.set(c,f)}function tl(o){return Tt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ws(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Js(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Bb),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Bb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Dg=/[#\/\?@]/g,qb=/[#\?:]/g,Hb=/[#\?]/g,Fb=/[#\?@]/g,Gb=/#/g;function ta(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Wn(o){o.g||(o.g=new Map,o.h=0,o.i&&zb(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=ta.prototype,e.add=function(o,c){Wn(this),this.i=null,o=Nr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Og(o,c){Wn(o),c=Nr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Mg(o,c){return Wn(o),c=Nr(o,c),o.g.has(c)}e.forEach=function(o,c){Wn(this),this.g.forEach(function(f,_){f.forEach(function(N){o.call(c,N,_,this)},this)},this)},e.na=function(){Wn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let _=0;_<c.length;_++){const N=o[_];for(let M=0;M<N.length;M++)f.push(c[_])}return f},e.V=function(o){Wn(this);let c=[];if(typeof o=="string")Mg(this,o)&&(c=c.concat(this.g.get(Nr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Wn(this),this.i=null,o=Nr(this,o),Mg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Vg(o,c,f){Og(o,c),0<f.length&&(o.i=null,o.g.set(Nr(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var _=c[f];const M=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=M;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),o.push(N)}}return this.i=o.join("&")};function Nr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Yb(o,c){c&&!o.j&&(Wn(o),o.i=null,o.g.forEach(function(f,_){var N=_.toLowerCase();_!=N&&(Og(this,_),Vg(this,N,f))},o)),o.j=c}function Qb(o,c){const f=new $s;if(l.Image){const _=new Image;_.onload=E(Jn,f,"TestLoadImage: loaded",!0,c,_),_.onerror=E(Jn,f,"TestLoadImage: error",!1,c,_),_.onabort=E(Jn,f,"TestLoadImage: abort",!1,c,_),_.ontimeout=E(Jn,f,"TestLoadImage: timeout",!1,c,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else c(!1)}function Kb(o,c){const f=new $s,_=new AbortController,N=setTimeout(()=>{_.abort(),Jn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:_.signal}).then(M=>{clearTimeout(N),M.ok?Jn(f,"TestPingServer: ok",!0,c):Jn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Jn(f,"TestPingServer: error",!1,c)})}function Jn(o,c,f,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(f)}catch{}}function Xb(){this.g=new Db}function $b(o,c,f){const _=f||"";try{Ig(o,function(N,M){let z=N;h(N)&&(z=Uc(N)),c.push(_+M+"="+encodeURIComponent(z))})}catch(N){throw c.push(_+"type="+encodeURIComponent("_badmap")),N}}function el(o){this.l=o.Ub||null,this.j=o.eb||!1}D(el,Lc),el.prototype.g=function(){return new nl(this.l,this.j)},el.prototype.i=function(o){return function(){return o}}({});function nl(o,c){oe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(nl,oe),e=nl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,na(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ea(this):na(this),this.readyState==3&&Pg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ea(this))},e.Qa=function(o){this.g&&(this.response=o,ea(this))},e.ga=function(){this.g&&ea(this)};function ea(o){o.readyState=4,o.l=null,o.j=null,o.v=null,na(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function na(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function kg(o){let c="";return j(o,function(f,_){c+=_,c+=":",c+=f,c+=`\r
`}),c}function Kc(o,c,f){t:{for(_ in f){var _=!1;break t}_=!0}_||(f=kg(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Tt(o,c,f))}function Nt(o){oe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Nt,oe);var Zb=/^https?$/i,Wb=["POST","PUT"];e=Nt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bc.g(),this.v=this.o?hg(this.o):hg(Bc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){Ug(this,M);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)f.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())f.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Wb,c,void 0))||_||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of f)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){Ug(this,M)}};function Ug(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Lg(o),il(o)}function Lg(o){o.A||(o.A=!0,pe(o,"complete"),pe(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,pe(this,"complete"),pe(this,"abort"),il(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Nt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?jg(this):this.bb())},e.bb=function(){jg(this)};function jg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||wn(o)!=4||o.Z()!=2)){if(o.u&&wn(o)==4)og(o.Ea,0,o);else if(pe(o,"readystatechange"),wn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var _;if(_=z===0){var N=String(o.D).match(Cg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),_=!Zb.test(N?N.toLowerCase():"")}f=_}if(f)pe(o,"complete"),pe(o,"success");else{o.m=6;try{var M=2<wn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Lg(o)}}finally{il(o)}}}}function il(o,c){if(o.g){zg(o);const f=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||pe(o,"ready");try{f.onreadystatechange=_}catch{}}}function zg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function wn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Nb(c)}};function Bg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Jb(o){const c={};o=(o.g&&2<=wn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(v(o[_]))continue;var f=I(o[_]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}A(c,function(_){return _.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function qg(o){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,o),this.cb=ia("retryDelaySeedMs",1e4,o),this.Wa=ia("forwardChannelMaxRetries",2,o),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Sg(o&&o.concurrentRequestLimit),this.Da=new Xb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qg.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,_){ye(0),this.W=o,this.H=c||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Zg(this,null,this.W),sl(this)};function Xc(o){if(Hg(o),o.G==3){var c=o.U++,f=An(o.I);if(Tt(f,"SID",o.K),Tt(f,"RID",c),Tt(f,"TYPE","terminate"),ra(o,f),c=new Zn(o,o.j,c),c.L=2,c.v=tl(An(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Wg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Zo(c)}$g(o)}function rl(o){o.g&&(Zc(o),o.g.cancel(),o.g=null)}function Hg(o){rl(o),o.u&&(l.clearTimeout(o.u),o.u=null),al(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function sl(o){if(!Ag(o.h)&&!o.s){o.s=!0;var c=o.Ga;K||Mt(),$||(K(),$=!0),Et.add(c,o),o.B=0}}function tS(o,c){return wg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Xs(m(o.Ga,o,c),Xg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Zn(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break e}_=void 0}if(_===void 0)break;if(c+=_,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Gg(this,N,c),f=An(this.I),Tt(f,"RID",o),Tt(f,"CVER",22),this.D&&Tt(f,"X-HTTP-Session-Id",this.D),ra(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(kg(M)))+"&"+c:this.m&&Kc(f,this.m,M)),Qc(this.h,N),this.Ua&&Tt(f,"TYPE","init"),this.P?(Tt(f,"$req",c),Tt(f,"SID","null"),N.T=!0,Hc(N,f,null)):Hc(N,f,c),this.G=2}}else this.G==3&&(o?Fg(this,o):this.i.length==0||Ag(this.h)||Fg(this))};function Fg(o,c){var f;c?f=c.l:f=o.U++;const _=An(o.I);Tt(_,"SID",o.K),Tt(_,"RID",f),Tt(_,"AID",o.T),ra(o,_),o.m&&o.o&&Kc(_,o.m,o.o),f=new Zn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Gg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Qc(o.h,f),Hc(f,_,c)}function ra(o,c){o.H&&j(o.H,function(f,_){Tt(c,_,f)}),o.l&&Ig({},function(f,_){Tt(c,_,f)})}function Gg(o,c,f){f=Math.min(o.i.length,f);var _=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const z=["count="+f];M==-1?0<f?(M=N[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let yt=!0;for(let te=0;te<f;te++){let lt=N[te].g;const le=N[te].map;if(lt-=M,0>lt)M=Math.max(0,N[te].g-100),yt=!1;else try{$b(le,z,"req"+lt+"_")}catch{_&&_(le)}}if(yt){_=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,_}function Yg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;K||Mt(),$||(K(),$=!0),Et.add(c,o),o.v=0}}function $c(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Xs(m(o.Fa,o),Xg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Qg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Xs(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ye(10),rl(this),Qg(this))};function Zc(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Qg(o){o.g=new Zn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=An(o.qa);Tt(c,"RID","rpc"),Tt(c,"SID",o.K),Tt(c,"AID",o.T),Tt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Tt(c,"TO",o.ja),Tt(c,"TYPE","xmlhttp"),ra(o,c),o.m&&o.o&&Kc(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=tl(An(c)),f.m=null,f.P=!0,Eg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,rl(this),$c(this),ye(19))};function al(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Kg(o,c){var f=null;if(o.g==c){al(o),Zc(o),o.g=null;var _=2}else if(Yc(o.h,c))f=c.D,Rg(o.h,c),_=1;else return;if(o.G!=0){if(c.o)if(_==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;_=Ko(),pe(_,new pg(_,f)),sl(o)}else Yg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(_==1&&tS(o,c)||_==2&&$c(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Ki(o,5);break;case 4:Ki(o,10);break;case 3:Ki(o,6);break;default:Ki(o,2)}}}function Xg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Ki(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),_=o.Xa;const N=!_;_=new Qi(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Wo(_,"https"),tl(_),N?Qb(_.toString(),f):Kb(_.toString(),f)}else ye(2);o.G=0,o.l&&o.l.sa(c),$g(o),Hg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function $g(o){if(o.G=0,o.ka=[],o.l){const c=xg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Zg(o,c,f){var _=f instanceof Qi?An(f):new Qi(f);if(_.g!="")c&&(_.g=c+"."+_.g),Jo(_,_.s);else{var N=l.location;_=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Qi(null);_&&Wo(M,_),c&&(M.g=c),N&&Jo(M,N),f&&(M.l=f),_=M}return f=o.D,c=o.ya,f&&c&&Tt(_,f,c),Tt(_,"VER",o.la),ra(o,_),_}function Wg(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Nt(new el({eb:f})):new Nt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jg(){}e=Jg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ol(){}ol.prototype.g=function(o,c){return new Ie(o,c)};function Ie(o,c){oe.call(this),this.g=new qg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Dr(this)}D(Ie,oe),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){Xc(this.g)},Ie.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Uc(o),o=f);c.i.push(new Ub(c.Ya++,o)),c.G==3&&sl(c)},Ie.prototype.N=function(){this.g.l=null,delete this.j,Xc(this.g),delete this.g,Ie.aa.N.call(this)};function tp(o){jc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(tp,jc);function ep(){zc.call(this),this.status=1}D(ep,zc);function Dr(o){this.g=o}D(Dr,Jg),Dr.prototype.ua=function(){pe(this.g,"a")},Dr.prototype.ta=function(o){pe(this.g,new tp(o))},Dr.prototype.sa=function(o){pe(this.g,new ep)},Dr.prototype.ra=function(){pe(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,XT=function(){return new ol},KT=function(){return Ko()},QT=Gi,Zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Ql=Xo,yg.COMPLETE="complete",YT=yg,fg.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",oe.prototype.listen=oe.prototype.K,va=fg,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,GT=Nt}).apply(typeof wl<"u"?wl:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",s_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new dm("@firebase/firestore");function jr(){return yr.logLevel}function q(e,...t){if(yr.logLevel<=it.DEBUG){const n=t.map(Am);yr.debug(`Firestore (${qs}): ${e}`,...n)}}function Qn(e,...t){if(yr.logLevel<=it.ERROR){const n=t.map(Am);yr.error(`Firestore (${qs}): ${e}`,...n)}}function Rs(e,...t){if(yr.logLevel<=it.WARN){const n=t.map(Am);yr.warn(`Firestore (${qs}): ${e}`,...n)}}function Am(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,$T(e,i,n)}function $T(e,t,n){let i=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Qn(i),new Error(i)}function ht(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||$T(t,r,i)}function Z(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends $n{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class JI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(he.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eC{constructor(t){this.t=t,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ht(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Di,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Di)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new ZT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new he(t)}}class nC{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=he.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rC{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ge(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ht(this.o===void 0,3512);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=sC(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function rt(e,t){return e<t?-1:e>t?1:0}function Wf(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Bh(r)===Bh(s)?rt(r,s):Bh(r)?1:-1}return rt(e.length,t.length)}const aC=55296,oC=57343;function Bh(e){const t=e.charCodeAt(0);return t>=aC&&t<=oC}function xs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="__name__";class on{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return on.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof on?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=on.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return rt(t.length,n.length)}static compareSegments(t,n){const i=on.isNumericId(t),r=on.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?on.extractNumericId(t).compare(on.extractNumericId(n)):Wf(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ni.fromString(t.substring(4,t.length-2))}}class It extends on{construct(t,n,i){return new It(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new It(n)}static emptyPath(){return new It([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends on{construct(t,n,i){return new re(t,n,i)}static isValidIdentifier(t){return lC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o_}static keyField(){return new re([o_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new re(n)}static emptyPath(){return new re([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.path=t}static fromPath(t){return new F(It.fromString(t))}static fromName(t){return new F(It.fromString(t).popFirst(5))}static empty(){return new F(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return It.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new F(new It(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(e,t,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function cC(e,t,n,i){if(t===!0&&i===!0)throw new H(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function l_(e){if(!F.isDocumentKey(e))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function WT(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Rm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function lo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rm(e);throw new H(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(e,t){const n={typeString:e};return t&&(n.value=t),n}function jo(e,t){if(!WT(e))throw new H(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new H(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=-62135596800,c_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(t){return bt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*c_);return new bt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<u_)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c_}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(jo(t,bt._jsonSchema))return new bt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-u_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:zt("string",bt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(t){return new X(t)}static min(){return new X(new bt(0,0))}static max(){return new X(new bt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=-1;function hC(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=X.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new Pi(r,F.empty(),t)}function fC(e){return new Pi(e.readTime,e.key,uo)}class Pi{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Pi(X.min(),F.empty(),uo)}static max(){return new Pi(X.max(),F.empty(),uo)}}function dC(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=F.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==mC)throw e;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new k((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):k.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):k.reject(n)}static resolve(t){return new k((n,i)=>{n(t)})}static reject(t){return new k((n,i)=>{i(t)})}static waitFor(t){return new k((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=k.resolve(!1);for(const i of t)n=n.next(r=>r?k.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new k((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new k((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function pC(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fs(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_c.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=-1;function vc(e){return e==null}function Uu(e){return e===0&&1/e==-1/0}function yC(e){return typeof e=="number"&&Number.isInteger(e)&&!Uu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="";function _C(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=h_(t)),t=vC(e.get(n),t);return h_(t)}function vC(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case JT:n+="";break;default:n+=s}}return n}function h_(e){return e+JT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ar(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function t1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,n){this.comparator=t,this.root=n||ne.EMPTY}insert(t,n){return new Ct(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ne.BLACK,null,null))}remove(t){return new Ct(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ne.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rl(this.root,t,this.comparator,!0)}}class Rl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ne{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ne.RED,this.left=r??ne.EMPTY,this.right=s??ne.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ne(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ne.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ne.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}ne.EMPTY=null,ne.RED=!0,ne.BLACK=!1;ne.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ne(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(t){return new d_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Gt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Gt(this.comparator);return n.data=t,n}}class d_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.fields=t,t.sort(re.comparator)}static empty(){return new tn([])}unionWith(t){let n=new Gt(re.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new e1("Invalid base64 string: "+s):s}}(t);return new ae(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new ae(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ae.EMPTY_BYTE_STRING=new ae("");const EC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(e){if(ht(!!e,39018),typeof e=="string"){let t=0;const n=EC.exec(e);if(ht(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ui(e){return typeof e=="string"?ae.fromBase64String(e):ae.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="server_timestamp",i1="__type__",r1="__previous_value__",s1="__local_write_time__";function Im(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[i1])==null?void 0:i.stringValue)===n1}function Ec(e){const t=e.mapValue.fields[r1];return Im(t)?Ec(t):t}function co(e){const t=ki(e.mapValue.fields[s1].timestampValue);return new bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Lu="(default)";class ho{constructor(t,n){this.projectId=t,this.database=n||Lu}static empty(){return new ho("","")}get isDefaultDatabase(){return this.database===Lu}isEqual(t){return t instanceof ho&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__type__",bC="__max__",xl={mapValue:{}},o1="__vector__",ju="value";function Li(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Im(e)?4:AC(e)?9007199254740991:SC(e)?10:11:Y(28295,{value:e})}function vn(e,t){if(e===t)return!0;const n=Li(e);if(n!==Li(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return co(e).isEqual(co(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=ki(r.timestampValue),l=ki(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Ui(r.bytesValue).isEqual(Ui(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return kt(r.geoPointValue.latitude)===kt(s.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return kt(r.integerValue)===kt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=kt(r.doubleValue),l=kt(s.doubleValue);return a===l?Uu(a)===Uu(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return xs(e.arrayValue.values||[],t.arrayValue.values||[],vn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(f_(a)!==f_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!vn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function fo(e,t){return(e.values||[]).find(n=>vn(n,t))!==void 0}function Is(e,t){if(e===t)return 0;const n=Li(e),i=Li(t);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=kt(s.integerValue||s.doubleValue),u=kt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return m_(e.timestampValue,t.timestampValue);case 4:return m_(co(e),co(t));case 5:return Wf(e.stringValue,t.stringValue);case 6:return function(s,a){const l=Ui(s),u=Ui(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=rt(l[h],u[h]);if(d!==0)return d}return rt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=rt(kt(s.latitude),kt(a.latitude));return l!==0?l:rt(kt(s.longitude),kt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return g_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,E,D,O;const l=s.fields||{},u=a.fields||{},h=(m=l[ju])==null?void 0:m.arrayValue,d=(E=u[ju])==null?void 0:E.arrayValue,p=rt(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return p!==0?p:g_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===xl.mapValue&&a===xl.mapValue)return 0;if(s===xl.mapValue)return 1;if(a===xl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=Wf(u[p],d[p]);if(m!==0)return m;const E=Is(l[u[p]],h[d[p]]);if(E!==0)return E}return rt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function m_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=ki(e),i=ki(t),r=rt(n.seconds,i.seconds);return r!==0?r:rt(n.nanos,i.nanos)}function g_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Is(n[r],i[r]);if(s)return s}return rt(n.length,i.length)}function Cs(e){return Jf(e)}function Jf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ki(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ui(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return F.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Jf(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Jf(n.fields[a])}`;return r+"}"}(e.mapValue):Y(61005,{value:e})}function Kl(e){switch(Li(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ec(e);return t?16+Kl(t):16;case 5:return 2*e.stringValue.length;case 6:return Ui(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Kl(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Ar(i.fields,(s,a)=>{r+=s.length+Kl(a)}),r}(e.mapValue);default:throw Y(13486,{value:e})}}function td(e){return!!e&&"integerValue"in e}function Cm(e){return!!e&&"arrayValue"in e}function p_(e){return!!e&&"nullValue"in e}function y_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xl(e){return!!e&&"mapValue"in e}function SC(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[a1])==null?void 0:i.stringValue)===o1}function za(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ar(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=za(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=za(e.arrayValue.values[n]);return t}return{...e}}function AC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===bC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.value=t}static empty(){return new Ye({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Xl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=za(n)}setAll(t){let n=re.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=za(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return vn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Xl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Ar(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ye(za(this.value))}}function l1(e){const t=[];return Ar(e.fields,(n,i)=>{const r=new re([n]);if(Xl(i)){const s=l1(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new fe(t,0,X.min(),X.min(),X.min(),Ye.empty(),0)}static newFoundDocument(t,n,i,r){return new fe(t,1,n,X.min(),i,r,0)}static newNoDocument(t,n){return new fe(t,2,n,X.min(),X.min(),Ye.empty(),0)}static newUnknownDocument(t,n){return new fe(t,3,n,X.min(),X.min(),Ye.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n){this.position=t,this.inclusive=n}}function __(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),n.key):i=Is(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function v_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,n="asc"){this.field=t,this.dir=n}}function wC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class Ft extends u1{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new xC(t,n,i):n==="array-contains"?new NC(t,i):n==="in"?new DC(t,i):n==="not-in"?new OC(t,i):n==="array-contains-any"?new MC(t,i):new Ft(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new IC(t,i):new CC(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Is(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends u1{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new En(t,n)}matches(t){return c1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function c1(e){return e.op==="and"}function h1(e){return RC(e)&&c1(e)}function RC(e){for(const t of e.filters)if(t instanceof En)return!1;return!0}function ed(e){if(e instanceof Ft)return e.field.canonicalString()+e.op.toString()+Cs(e.value);if(h1(e))return e.filters.map(t=>ed(t)).join(",");{const t=e.filters.map(n=>ed(n)).join(",");return`${e.op}(${t})`}}function f1(e,t){return e instanceof Ft?function(i,r){return r instanceof Ft&&i.op===r.op&&i.field.isEqual(r.field)&&vn(i.value,r.value)}(e,t):e instanceof En?function(i,r){return r instanceof En&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&f1(a,r.filters[l]),!0):!1}(e,t):void Y(19439)}function d1(e){return e instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Cs(n.value)}`}(e):e instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(d1).join(" ,")+"}"}(e):"Filter"}class xC extends Ft{constructor(t,n,i){super(t,n,i),this.key=F.fromName(i.referenceValue)}matches(t){const n=F.comparator(t.key,this.key);return this.matchesComparison(n)}}class IC extends Ft{constructor(t,n){super(t,"in",n),this.keys=m1("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class CC extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=m1("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function m1(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class NC extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Cm(n)&&fo(n.arrayValue,this.value)}}class DC extends Ft{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&fo(this.value.arrayValue,n)}}class OC extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fo(this.value.arrayValue,n)}}class MC extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Cm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>fo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function E_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new VC(e,t,n,i,r,s,a)}function Nm(e){const t=Z(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>ed(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),vc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Cs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Cs(i)).join(",")),t.Te=n}return t.Te}function Dm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!f1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!v_(e.startAt,t.startAt)&&v_(e.endAt,t.endAt)}function nd(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PC(e,t,n,i,r,s,a,l){return new Tc(e,t,n,i,r,s,a,l)}function Om(e){return new Tc(e)}function T_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function kC(e){return e.collectionGroup!==null}function Ba(e){const t=Z(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Gt(re.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Bu(s,i))}),n.has(re.keyField().canonicalString())||t.Ie.push(new Bu(re.keyField(),i))}return t.Ie}function gn(e){const t=Z(e);return t.Ee||(t.Ee=UC(t,Ba(e))),t.Ee}function UC(e,t){if(e.limitType==="F")return E_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Bu(r.field,s)});const n=e.endAt?new zu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zu(e.startAt.position,e.startAt.inclusive):null;return E_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function id(e,t,n){return new Tc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bc(e,t){return Dm(gn(e),gn(t))&&e.limitType===t.limitType}function g1(e){return`${Nm(gn(e))}|lt:${e.limitType}`}function zr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>d1(r)).join(", ")}]`),vc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Cs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Cs(r)).join(",")),`Target(${i})`}(gn(e))}; limitType=${e.limitType})`}function Sc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):F.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Ba(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=__(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Ba(i),r)||i.endAt&&!function(a,l,u){const h=__(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Ba(i),r))}(e,t)}function LC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function p1(e){return(t,n)=>{let i=!1;for(const r of Ba(e)){const s=jC(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function jC(e,t,n){const i=e.field.isKeyField()?F.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Is(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ar(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return t1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Ct(F.comparator);function Kn(){return zC}const y1=new Ct(F.comparator);function Ea(...e){let t=y1;for(const n of e)t=t.insert(n.key,n);return t}function _1(e){let t=y1;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function tr(){return qa()}function v1(){return qa()}function qa(){return new wr(e=>e.toString(),(e,t)=>e.isEqual(t))}const BC=new Ct(F.comparator),qC=new Gt(F.comparator);function st(...e){let t=qC;for(const n of e)t=t.add(n);return t}const HC=new Gt(rt);function FC(){return HC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uu(t)?"-0":t}}function E1(e){return{integerValue:""+e}}function GC(e,t){return yC(t)?E1(t):Mm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this._=void 0}}function YC(e,t,n){return e instanceof qu?function(r,s){const a={fields:{[i1]:{stringValue:n1},[s1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Im(s)&&(s=Ec(s)),s&&(a.fields[r1]=s),{mapValue:a}}(n,t):e instanceof mo?b1(e,t):e instanceof go?S1(e,t):function(r,s){const a=T1(r,s),l=b_(a)+b_(r.Ae);return td(a)&&td(r.Ae)?E1(l):Mm(r.serializer,l)}(e,t)}function QC(e,t,n){return e instanceof mo?b1(e,t):e instanceof go?S1(e,t):n}function T1(e,t){return e instanceof Hu?function(i){return td(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class qu extends Ac{}class mo extends Ac{constructor(t){super(),this.elements=t}}function b1(e,t){const n=A1(t);for(const i of e.elements)n.some(r=>vn(r,i))||n.push(i);return{arrayValue:{values:n}}}class go extends Ac{constructor(t){super(),this.elements=t}}function S1(e,t){let n=A1(t);for(const i of e.elements)n=n.filter(r=>!vn(r,i));return{arrayValue:{values:n}}}class Hu extends Ac{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function b_(e){return kt(e.integerValue||e.doubleValue)}function A1(e){return Cm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function KC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof mo&&r instanceof mo||i instanceof go&&r instanceof go?xs(i.elements,r.elements,vn):i instanceof Hu&&r instanceof Hu?vn(i.Ae,r.Ae):i instanceof qu&&r instanceof qu}(e.transform,t.transform)}class XC{constructor(t,n){this.version=t,this.transformResults=n}}class zn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new zn}static exists(t){return new zn(void 0,t)}static updateTime(t){return new zn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $l(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class wc{}function w1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new x1(e.key,zn.none()):new zo(e.key,e.data,zn.none());{const n=e.data,i=Ye.empty();let r=new Gt(re.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Rr(e.key,i,new tn(r.toArray()),zn.none())}}function $C(e,t,n){e instanceof zo?function(r,s,a){const l=r.value.clone(),u=A_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Rr?function(r,s,a){if(!$l(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=A_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(R1(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Ha(e,t,n,i){return e instanceof zo?function(s,a,l,u){if(!$l(s.precondition,a))return l;const h=s.value.clone(),d=w_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Rr?function(s,a,l,u){if(!$l(s.precondition,a))return l;const h=w_(s.fieldTransforms,u,a),d=a.data;return d.setAll(R1(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return $l(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function ZC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=T1(i.transform,r||null);s!=null&&(n===null&&(n=Ye.empty()),n.set(i.field,s))}return n||null}function S_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&xs(i,r,(s,a)=>KC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zo extends wc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rr extends wc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function R1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function A_(e,t,n){const i=new Map;ht(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,QC(a,l,n[r]))}return i}function w_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,YC(s,a,t))}return i}class x1 extends wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WC extends wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&$C(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Ha(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Ha(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=v1();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=w1(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),st())}isEqual(t){return this.batchId===t.batchId&&xs(this.mutations,t.mutations,(n,i)=>S_(n,i))&&xs(this.baseMutations,t.baseMutations,(n,i)=>S_(n,i))}}class Vm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ht(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return BC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Vm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,at;function nN(e){switch(e){case L.OK:return Y(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function I1(e){if(e===void 0)return Qn("GRPC error has no .code"),L.UNKNOWN;switch(e){case Lt.OK:return L.OK;case Lt.CANCELLED:return L.CANCELLED;case Lt.UNKNOWN:return L.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return L.INTERNAL;case Lt.UNAVAILABLE:return L.UNAVAILABLE;case Lt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Lt.NOT_FOUND:return L.NOT_FOUND;case Lt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Lt.ABORTED:return L.ABORTED;case Lt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Lt.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:e})}}(at=Lt||(Lt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Ni([4294967295,4294967295],0);function R_(e){const t=iN().encode(e),n=new FT;return n.update(t),new Uint8Array(n.digest())}function x_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ni([n,i],0),new Ni([r,s],0)]}class Pm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ta(`Invalid padding: ${n}`);if(i<0)throw new Ta(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ni.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Ni.fromNumber(i)));return r.compare(rN)===1&&(r=new Ni([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=R_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Pm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=R_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Bo.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Rc(X.min(),r,new Ct(rt),Kn(),st())}}class Bo{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Bo(i,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class C1{constructor(t,n){this.targetId=t,this.Ce=n}}class N1{constructor(t,n,i=ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class I_{constructor(){this.ve=0,this.Fe=C_(),this.Me=ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=st(),n=st(),i=st();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y(38017,{changeType:s})}}),new Bo(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=C_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sN{constructor(t){this.Ge=t,this.ze=new Map,this.je=Kn(),this.Je=Il(),this.He=Il(),this.Ye=new Ct(rt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(nd(s))if(i===0){const a=new F(s.path);this.et(n,a,fe.newNoDocument(a,X.min()))}else ht(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Ui(i).toUint8Array()}catch(u){if(u instanceof e1)return Rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Pm(a,r,s)}catch(u){return Rs(u instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&nd(l.target)){const u=new F(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,fe.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=st();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Rc(t,n,this.Ye,this.je,i);return this.je=Kn(),this.Je=Il(),this.He=Il(),this.Ye=new Ct(rt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new I_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Gt(rt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Gt(rt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||q("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new I_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Il(){return new Ct(F.comparator)}function C_(){return new Ct(F.comparator)}const aN={asc:"ASCENDING",desc:"DESCENDING"},oN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lN={and:"AND",or:"OR"};class uN{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function rd(e,t){return e.useProto3Json||vc(t)?t:{value:t}}function Fu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function D1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function cN(e,t){return Fu(e,t.toTimestamp())}function pn(e){return ht(!!e,49232),X.fromTimestamp(function(n){const i=ki(n);return new bt(i.seconds,i.nanos)}(e))}function km(e,t){return sd(e,t).canonicalString()}function sd(e,t){const n=function(r){return new It(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function O1(e){const t=It.fromString(e);return ht(U1(t),10190,{key:t.toString()}),t}function ad(e,t){return km(e.databaseId,t.path)}function qh(e,t){const n=O1(t);if(n.get(1)!==e.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new F(V1(n))}function M1(e,t){return km(e.databaseId,t)}function hN(e){const t=O1(e);return t.length===4?It.emptyPath():V1(t)}function od(e){return new It(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function V1(e){return ht(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function N_(e,t,n){return{name:ad(e,t),fields:n.value.mapValue.fields}}function fN(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ht(d===void 0||typeof d=="string",58123),ae.fromBase64String(d||"")):(ht(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ae.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?L.UNKNOWN:I1(h.code);return new H(d,h.message||"")}(a);n=new N1(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=qh(e,i.document.name),s=pn(i.document.updateTime),a=i.document.createTime?pn(i.document.createTime):X.min(),l=new Ye({mapValue:{fields:i.document.fields}}),u=fe.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Zl(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=qh(e,i.document),s=i.readTime?pn(i.readTime):X.min(),a=fe.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Zl([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=qh(e,i.document),s=i.removedTargetIds||[];n=new Zl([],s,r,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new eN(r,s),l=i.targetId;n=new C1(l,a)}}return n}function dN(e,t){let n;if(t instanceof zo)n={update:N_(e,t.key,t.value)};else if(t instanceof x1)n={delete:ad(e,t.key)};else if(t instanceof Rr)n={update:N_(e,t.key,t.data),updateMask:bN(t.fieldMask)};else{if(!(t instanceof WC))return Y(16599,{Vt:t.type});n={verify:ad(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof qu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof mo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof go)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:cN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(e,t.precondition)),n}function mN(e,t){return e&&e.length>0?(ht(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?pn(r.updateTime):pn(s);return a.isEqual(X.min())&&(a=pn(s)),new XC(a,r.transformResults||[])}(n,t))):[]}function gN(e,t){return{documents:[M1(e,t.path)]}}function pN(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=M1(e,r);const s=function(h){if(h.length!==0)return k1(En.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Br(m.field),direction:vN(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=rd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function yN(e){let t=hN(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ht(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=P1(p);return m instanceof En&&h1(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(D){return new Bu(qr(D.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,vc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,E=p.values||[];return new zu(E,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,E=p.values||[];return new zu(E,m)}(n.endAt)),PC(t,r,a,s,l,"F",u,h)}function _N(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function P1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=qr(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=qr(n.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qr(n.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qr(n.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ft.create(qr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(i=>P1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function vN(e){return aN[e]}function EN(e){return oN[e]}function TN(e){return lN[e]}function Br(e){return{fieldPath:e.canonicalString()}}function qr(e){return re.fromServerFormat(e.fieldPath)}function k1(e){return e instanceof Ft?function(n){if(n.op==="=="){if(y_(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NAN"}};if(p_(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y_(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NAN"}};if(p_(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(n.field),op:EN(n.op),value:n.value}}}(e):e instanceof En?function(n){const i=n.getFilters().map(r=>k1(r));return i.length===1?i[0]:{compositeFilter:{op:TN(n.op),filters:i}}}(e):Y(54877,{filter:e})}function bN(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function U1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,n,i,r,s=X.min(),a=X.min(),l=ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new _i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t){this.yt=t}}function AN(e){const t=yN({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?id(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.Cn=new RN}addToCollectionParentIndex(t,n){return this.Cn.add(n),k.resolve()}getCollectionParents(t,n){return k.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return k.resolve()}deleteFieldIndex(t,n){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,n){return k.resolve()}getDocumentsMatchingTarget(t,n){return k.resolve(null)}getIndexType(t,n){return k.resolve(0)}getFieldIndexes(t,n){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,n){return k.resolve(Pi.min())}getMinOffsetFromCollectionGroup(t,n){return k.resolve(Pi.min())}updateCollectionGroup(t,n,i){return k.resolve()}updateIndexEntries(t,n){return k.resolve()}}class RN{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Gt(It.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Gt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L1=41943040;class Ae{static withCacheSize(t){return new Ae(t,Ae.DEFAULT_COLLECTION_PERCENTILE,Ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ae.DEFAULT_COLLECTION_PERCENTILE=10,Ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ae.DEFAULT=new Ae(L1,Ae.DEFAULT_COLLECTION_PERCENTILE,Ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ae.DISABLED=new Ae(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ns(0)}static cr(){return new Ns(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LruGarbageCollector",xN=1048576;function M_([e,t],[n,i]){const r=rt(e,n);return r===0?rt(t,i):r}class IN{constructor(t){this.Ir=t,this.buffer=new Gt(M_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();M_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CN{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){q(O_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fs(n)?q(O_,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Vr(3e5)})}}class NN{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return k.resolve(_c.ce);const i=new IN(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(D_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),jr()<=it.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function DN(e,t){return new NN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.changes=new wr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,fe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&Ha(i.mutation,r,tn.empty(),bt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,st()).next(()=>i))}getLocalViewOfDocuments(t,n,i=st()){const r=tr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ea();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=tr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,st()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=Kn();const a=qa(),l=function(){return qa()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Rr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Ha(d.mutation,h,d.mutation.getFieldMask(),bt.now())):a.set(h.key,tn.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new MN(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=qa();let r=new Ct((a,l)=>a-l),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||tn.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(r.get(l.batchId)||st()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=v1();d.forEach(m=>{if(!s.has(m)){const E=w1(n.get(m),i.get(m));E!==null&&p.set(m,E),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return k.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):kC(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):k.resolve(tr());let l=uo,u=s;return a.next(h=>k.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,st())).next(d=>({batchId:l,changes:_1(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new F(n)).next(i=>{let r=Ea();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ea();return this.indexManager.getCollectionParents(t,s).next(l=>k.forEach(l,u=>{const h=function(p,m){return new Tc(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,fe.newInvalidDocument(d)))});let l=Ea();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Ha(d.mutation,h,tn.empty(),bt.now()),Sc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return k.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:pn(r.createTime)}}(n)),k.resolve()}getNamedQuery(t,n){return k.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:AN(r.bundledQuery),readTime:pn(r.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.overlays=new Ct(F.comparator),this.qr=new Map}getOverlay(t,n){return k.resolve(this.overlays.get(n))}getOverlays(t,n){const i=tr();return k.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),k.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),k.resolve()}getOverlaysForCollection(t,n,i){const r=tr(),s=n.length+1,a=new F(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ct((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=tr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=tr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return k.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new tN(n,i));let s=this.qr.get(n);s===void 0&&(s=st(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=ae.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,k.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Qr=new Gt(Kt.$r),this.Ur=new Gt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Kt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Kt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new F(new It([])),i=new Kt(n,t),r=new Kt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new F(new It([])),i=new Kt(n,t),r=new Kt(n,t+1);let s=st();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Kt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Kt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return F.comparator(t.key,n.key)||rt(t.Yr,n.Yr)}static Kr(t,n){return rt(t.Yr,n.Yr)||F.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Kt.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new JC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Kt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return k.resolve(a)}lookupMutationBatch(t,n){return k.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?xm:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Kt(n,0),r=new Kt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Gt(rt);return n.forEach(r=>{const s=new Kt(r,0),a=new Kt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),k.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;F.isDocumentKey(s)||(s=s.child(""));const a=new Kt(new F(s),0);let l=new Gt(rt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),k.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return k.forEach(n.mutations,r=>{const s=new Kt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Kt(n,0),r=this.Zr.firstAfterOrEqual(i);return k.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t){this.ri=t,this.docs=function(){return new Ct(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():fe.newInvalidDocument(n))}getEntries(t,n){let i=Kn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():fe.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Kn();const a=n.path,l=new F(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||dC(fC(d),i)<=0||(r.has(d.key)||Sc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Y(9500)}ii(t,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new zN(this)}getSize(t){return k.resolve(this.size)}}class zN extends ON{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),k.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(t){this.persistence=t,this.si=new wr(n=>Nm(n),Dm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new Um,this.targetCount=0,this.ai=Ns.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),k.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ns(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,k.resolve()}updateTargetData(t,n){return this.Pr(n),k.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return k.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),k.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),k.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return k.resolve(i)}containsKey(t,n){return k.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t,n){this.ui={},this.overlays={},this.ci=new _c(0),this.li=!1,this.li=!0,this.hi=new UN,this.referenceDelegate=t(this),this.Pi=new BN(this),this.indexManager=new wN,this.remoteDocumentCache=function(r){return new jN(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new SN(n),this.Ii=new PN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new kN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new LN(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){q("MemoryPersistence","Starting transaction:",t);const r=new qN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return k.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class qN extends gC{constructor(t){super(),this.currentSequenceNumber=t}}class Lm{constructor(t){this.persistence=t,this.Ri=new Um,this.Vi=null}static mi(t){return new Lm(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),k.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),k.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),k.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,i=>{const r=F.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,X.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return k.or([()=>k.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Gu{constructor(t,n){this.persistence=t,this.pi=new wr(i=>_C(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=DN(this,n)}static mi(t,n){return new Gu(t,n)}Ei(){}di(t){return k.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return k.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?k.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,X.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Kl(t.data.value)),n}br(t,n,i){return k.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return k.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=st(),r=st();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new jm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _2()?8:pC(ge())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new HN;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(jr()<=it.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(jr()<=it.DEBUG&&q("QueryEngine","Query:",zr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(jr()<=it.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gn(n))):k.resolve())}ys(t,n){if(T_(n))return k.resolve(null);let i=gn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=id(n,null,"F"),i=gn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=st(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,id(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return T_(n)||r.isEqual(X.min())?k.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?k.resolve(null):(jr()<=it.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zr(n)),this.vs(t,a,n,hC(r,uo)).next(l=>l))})}Ds(t,n){let i=new Gt(p1(t));return n.forEach((r,s)=>{Sc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return jr()<=it.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",zr(n)),this.ps.getDocumentsMatchingQuery(t,n,Pi.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="LocalStore",GN=3e8;class YN{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ct(rt),this.xs=new wr(s=>Nm(s),Dm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new VN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function QN(e,t,n,i){return new YN(e,t,n,i)}async function z1(e,t){const n=Z(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=st();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function KN(e,t){const n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let E=k.resolve();return m.forEach(D=>{E=E.next(()=>d.getEntry(u,D)).next(O=>{const V=h.docVersions.get(D);ht(V!==null,48541),O.version.compareTo(V)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=st();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function B1(e){const t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function XN(e,t){const n=Z(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let E=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(ae.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,i)),r=r.insert(p,E),function(O,V,b){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=GN?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,E,d)&&l.push(n.Pi.updateTargetData(s,E))});let u=Kn(),h=st();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push($N(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(X.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return k.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function $N(e,t,n){let i=st(),r=st();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=Kn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):q(zm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function ZN(e,t){const n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=xm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function WN(e,t){const n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,k.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new _i(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function ld(e,t,n){const i=Z(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Fs(a))throw a;q(zm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function V_(e,t,n){const i=Z(e);let r=X.min(),s=st();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=Z(u),m=p.xs.get(d);return m!==void 0?k.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(i,a,gn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:X.min(),n?s:st())).next(l=>(JN(i,LC(t),l),{documents:l,Qs:s})))}function JN(e,t,n){let i=e.Os.get(t)||X.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class P_{constructor(){this.activeTargetIds=FC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tD{constructor(){this.Mo=new P_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new P_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="ConnectivityMonitor";class U_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(k_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){q(k_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=null;function ud(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="RestConnection",nD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Lu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=ud(),l=this.zo(t,n.toUriEncodedString());q(Hh,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=js(h);return this.Jo(t,l,u,i,d).then(p=>(q(Hh,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Rs(Hh,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=nD[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce="WebChannelConnection";class sD extends iD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=ud();return new Promise((l,u)=>{const h=new GT;h.setWithCredentials(!0),h.listenOnce(YT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ql.NO_ERROR:const p=h.getResponseJson();q(ce,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ql.TIMEOUT:q(ce,`RPC '${t}' ${a} timed out`),u(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ql.HTTP_ERROR:const m=h.getStatus();if(q(ce,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const D=E==null?void 0:E.error;if(D&&D.status&&D.message){const O=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(D.status);u(new H(O,D.message))}else u(new H(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{q(ce,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);q(ce,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=ud(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=XT(),l=KT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");q(ce,`Creating RPC '${t}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,E=!1;const D=new rD({Yo:V=>{E?q(ce,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(m||(q(ce,`Opening RPC '${t}' stream ${r} transport.`),p.open(),m=!0),q(ce,`RPC '${t}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),O=(V,b,v)=>{V.listen(b,S=>{try{v(S)}catch(x){setTimeout(()=>{throw x},0)}})};return O(p,va.EventType.OPEN,()=>{E||(q(ce,`RPC '${t}' stream ${r} transport opened.`),D.o_())}),O(p,va.EventType.CLOSE,()=>{E||(E=!0,q(ce,`RPC '${t}' stream ${r} transport closed`),D.a_(),this.E_(p))}),O(p,va.EventType.ERROR,V=>{E||(E=!0,Rs(ce,`RPC '${t}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),D.a_(new H(L.UNAVAILABLE,"The operation could not be completed")))}),O(p,va.EventType.MESSAGE,V=>{var b;if(!E){const v=V.data[0];ht(!!v,16349);const S=v,x=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(x){q(ce,`RPC '${t}' stream ${r} received error:`,x);const P=x.status;let j=function(T){const w=Lt[T];if(w!==void 0)return I1(w)}(P),A=x.message;j===void 0&&(j=L.INTERNAL,A="Unknown error status: "+P+" with message "+x.message),E=!0,D.a_(new H(j,A)),p.close()}else q(ce,`RPC '${t}' stream ${r} received:`,v),D.u_(v)}}),O(l,QT.STAT_EVENT,V=>{V.stat===Zf.PROXY?q(ce,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===Zf.NOPROXY&&q(ce,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(e){return new uN(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="PersistentStream";class H1{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q1(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new H(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return q(L_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(q(L_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aD extends H1{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=fN(this.serializer,t),i=function(s){if(!("targetChange"in s))return X.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?pn(a.readTime):X.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=od(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=nd(u)?{documents:gN(s,u)}:{query:pN(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=D1(s,a.resumeToken);const h=rd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=Fu(s,a.snapshotVersion.toTimestamp());const h=rd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=_N(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=od(this.serializer),n.removeTarget=t,this.q_(n)}}class oD extends H1{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=mN(t.writeResults,t.commitTime),i=pn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=od(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>dN(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{}class uD extends lD{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,sd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(L.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,sd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(L.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class cD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="RemoteStore";class hD{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{xr(this)&&(q(_r,"Restarting streams for network reachability change."),await async function(u){const h=Z(u);h.Ea.add(4),await qo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ic(h)}(this))})}),this.Ra=new cD(i,r)}}async function Ic(e){if(xr(e))for(const t of e.da)await t(!0)}async function qo(e){for(const t of e.da)await t(!1)}function F1(e,t){const n=Z(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Fm(n)?Hm(n):Gs(n).O_()&&qm(n,t))}function Bm(e,t){const n=Z(e),i=Gs(n);n.Ia.delete(t),i.O_()&&G1(n,t),n.Ia.size===0&&(i.O_()?i.L_():xr(n)&&n.Ra.set("Unknown"))}function qm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Gs(e).Y_(t)}function G1(e,t){e.Va.Ue(t),Gs(e).Z_(t)}function Hm(e){e.Va=new sN({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Gs(e).start(),e.Ra.ua()}function Fm(e){return xr(e)&&!Gs(e).x_()&&e.Ia.size>0}function xr(e){return Z(e).Ea.size===0}function Y1(e){e.Va=void 0}async function fD(e){e.Ra.set("Online")}async function dD(e){e.Ia.forEach((t,n)=>{qm(e,t)})}async function mD(e,t){Y1(e),Fm(e)?(e.Ra.ha(t),Hm(e)):e.Ra.set("Unknown")}async function gD(e,t,n){if(e.Ra.set("Online"),t instanceof N1&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){q(_r,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Yu(e,i)}else if(t instanceof Zl?e.Va.Ze(t):t instanceof C1?e.Va.st(t):e.Va.tt(t),!n.isEqual(X.min()))try{const i=await B1(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(ae.EMPTY_BYTE_STRING,d.snapshotVersion)),G1(s,u);const p=new _i(d.target,u,h,d.sequenceNumber);qm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){q(_r,"Failed to raise snapshot:",i),await Yu(e,i)}}async function Yu(e,t,n){if(!Fs(t))throw t;e.Ea.add(1),await qo(e),e.Ra.set("Offline"),n||(n=()=>B1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{q(_r,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ic(e)})}function Q1(e,t){return t().catch(n=>Yu(e,n,t))}async function Cc(e){const t=Z(e),n=ji(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:xm;for(;pD(t);)try{const r=await ZN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,yD(t,r)}catch(r){await Yu(t,r)}K1(t)&&X1(t)}function pD(e){return xr(e)&&e.Ta.length<10}function yD(e,t){e.Ta.push(t);const n=ji(e);n.O_()&&n.X_&&n.ea(t.mutations)}function K1(e){return xr(e)&&!ji(e).x_()&&e.Ta.length>0}function X1(e){ji(e).start()}async function _D(e){ji(e).ra()}async function vD(e){const t=ji(e);for(const n of e.Ta)t.ea(n.mutations)}async function ED(e,t,n){const i=e.Ta.shift(),r=Vm.from(i,t,n);await Q1(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Cc(e)}async function TD(e,t){t&&ji(e).X_&&await async function(i,r){if(function(a){return nN(a)&&a!==L.ABORTED}(r.code)){const s=i.Ta.shift();ji(i).B_(),await Q1(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Cc(i)}}(e,t),K1(e)&&X1(e)}async function j_(e,t){const n=Z(e);n.asyncQueue.verifyOperationInProgress(),q(_r,"RemoteStore received new credentials");const i=xr(n);n.Ea.add(3),await qo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ic(n)}async function bD(e,t){const n=Z(e);t?(n.Ea.delete(2),await Ic(n)):t||(n.Ea.add(2),await qo(n),n.Ra.set("Unknown"))}function Gs(e){return e.ma||(e.ma=function(n,i,r){const s=Z(n);return s.sa(),new aD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:fD.bind(null,e),t_:dD.bind(null,e),r_:mD.bind(null,e),H_:gD.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Fm(e)?Hm(e):e.Ra.set("Unknown")):(await e.ma.stop(),Y1(e))})),e.ma}function ji(e){return e.fa||(e.fa=function(n,i,r){const s=Z(n);return s.sa(),new oD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:_D.bind(null,e),r_:TD.bind(null,e),ta:vD.bind(null,e),na:ED.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Cc(e)):(await e.fa.stop(),e.Ta.length>0&&(q(_r,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Gm(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(e,t){if(Qn("AsyncQueue",`${t}: ${e}`),Fs(e))return new H(L.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{static emptySet(t){return new ds(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=Ea(),this.sortedSet=new Ct(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ds)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new ds;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.ga=new Ct(F.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Ds{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ds(t,n,ds.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class AD{constructor(){this.queries=B_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=B_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function B_(){return new wr(e=>g1(e),bc)}async function wD(e,t){const n=Z(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new SD,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ym(a,`Initialization of query '${zr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Qm(n)}async function RD(e,t){const n=Z(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xD(e,t){const n=Z(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&Qm(n)}function ID(e,t,n){const i=Z(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function Qm(e){e.Ca.forEach(t=>{t.next()})}var cd,q_;(q_=cd||(cd={})).Ma="default",q_.Cache="cache";class CD{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Ds(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ds.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t){this.key=t}}class Z1{constructor(t){this.key=t}}class ND{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=p1(t),this.tu=new ds(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new z_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const m=r.get(d),E=Sc(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let V=!1;m&&E?m.data.isEqual(E.data)?D!==O&&(i.track({type:3,doc:E}),V=!0):this.su(m,E)||(i.track({type:2,doc:E}),V=!0,(u&&this.eu(E,u)>0||h&&this.eu(E,h)<0)&&(l=!0)):!m&&E?(i.track({type:0,doc:E}),V=!0):m&&!E&&(i.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(E?(a=a.add(E),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,p)=>function(E,D){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:V})}};return O(E)-O(D)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Ds(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=st(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new Z1(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new $1(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=st();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ds.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Km="SyncEngine";class DD{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class OD{constructor(t){this.key=t,this.hu=!1}}class MD{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new wr(l=>g1(l),bc),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(F.comparator),this.Au=new Map,this.Ru=new Um,this.Vu={},this.mu=new Map,this.fu=Ns.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VD(e,t,n=!0){const i=ib(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await W1(i,t,n,!0),r}async function PD(e,t){const n=ib(e);await W1(n,t,!0,!1)}async function W1(e,t,n,i){const r=await WN(e.localStore,gn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await kD(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&F1(e.remoteStore,r),l}async function kD(e,t,n,i,r){e.pu=(p,m,E)=>async function(O,V,b,v){let S=V.view.ru(b);S.Cs&&(S=await V_(O.localStore,V.query,!1).then(({documents:A})=>V.view.ru(A,S)));const x=v&&v.targetChanges.get(V.targetId),P=v&&v.targetMismatches.get(V.targetId)!=null,j=V.view.applyChanges(S,O.isPrimaryClient,x,P);return F_(O,V.targetId,j.au),j.snapshot}(e,p,m,E);const s=await V_(e.localStore,t,!0),a=new ND(t,s.Qs),l=a.ru(s.documents),u=Bo.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);F_(e,n,h.au);const d=new DD(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function UD(e,t,n){const i=Z(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!bc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ld(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Bm(i.remoteStore,r.targetId),hd(i,r.targetId)}).catch(Hs)):(hd(i,r.targetId),await ld(i.localStore,r.targetId,!0))}async function LD(e,t){const n=Z(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Bm(n.remoteStore,i.targetId))}async function jD(e,t,n){const i=YD(e);try{const r=await function(a,l){const u=Z(a),h=bt.now(),d=l.reduce((E,D)=>E.add(D.key),st());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let D=Kn(),O=st();return u.Ns.getEntries(E,d).next(V=>{D=V,D.forEach((b,v)=>{v.isValidDocument()||(O=O.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,D)).next(V=>{p=V;const b=[];for(const v of l){const S=ZC(v,p.get(v.key).overlayedDocument);S!=null&&b.push(new Rr(v.key,S,l1(S.value.mapValue),zn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,b,l)}).next(V=>{m=V;const b=V.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(E,V.batchId,b)})}).then(()=>({batchId:m.batchId,changes:_1(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ct(rt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Ho(i,r.changes),await Cc(i.remoteStore)}catch(r){const s=Ym(r,"Failed to persist write");n.reject(s)}}async function J1(e,t){const n=Z(e);try{const i=await XN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ht(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ht(a.hu,14607):r.removedDocuments.size>0&&(ht(a.hu,42227),a.hu=!1))}),await Ho(n,i,t)}catch(i){await Hs(i)}}function H_(e,t,n){const i=Z(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=Z(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Qm(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function zD(e,t,n){const i=Z(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ct(F.comparator);a=a.insert(s,fe.newNoDocument(s,X.min()));const l=st().add(s),u=new Rc(X.min(),new Map,new Ct(rt),a,l);await J1(i,u),i.du=i.du.remove(s),i.Au.delete(t),Xm(i)}else await ld(i.localStore,t,!1).then(()=>hd(i,t,n)).catch(Hs)}async function BD(e,t){const n=Z(e),i=t.batch.batchId;try{const r=await KN(n.localStore,t);eb(n,i,null),tb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ho(n,r)}catch(r){await Hs(r)}}async function qD(e,t,n){const i=Z(e);try{const r=await function(a,l){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(ht(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);eb(i,t,n),tb(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Ho(i,r)}catch(r){await Hs(r)}}function tb(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function eb(e,t,n){const i=Z(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function hd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||nb(e,i)})}function nb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Bm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Xm(e))}function F_(e,t,n){for(const i of n)i instanceof $1?(e.Ru.addReference(i.key,t),HD(e,i)):i instanceof Z1?(q(Km,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||nb(e,i.key)):Y(19791,{wu:i})}function HD(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(q(Km,"New document in limbo: "+n),e.Eu.add(i),Xm(e))}function Xm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new F(It.fromString(t)),i=e.fu.next();e.Au.set(i,new OD(n)),e.du=e.du.insert(n,i),F1(e.remoteStore,new _i(gn(Om(n.path)),i,"TargetPurposeLimboResolution",_c.ce))}}async function Ho(e,t,n){const i=Z(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=jm.As(u.targetId,h);s.push(p)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=Z(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(h,m=>k.forEach(m.Es,E=>d.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>k.forEach(m.ds,E=>d.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!Fs(p))throw p;q(zm,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const E=d.Ms.get(m),D=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,s))}async function FD(e,t){const n=Z(e);if(!n.currentUser.isEqual(t)){q(Km,"User change. New user:",t.toKey());const i=await z1(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(L.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ho(n,i.Ls)}}function GD(e,t){const n=Z(e),i=n.Au.get(t);if(i&&i.hu)return st().add(i.key);{let r=st();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function ib(e){const t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=J1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zD.bind(null,t),t.Pu.H_=xD.bind(null,t.eventManager),t.Pu.yu=ID.bind(null,t.eventManager),t}function YD(e){const t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qD.bind(null,t),t}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=xc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return QN(this.persistence,new FN,t.initialUser,this.serializer)}Cu(t){return new j1(Lm.mi,this.serializer)}Du(t){return new tD}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class QD extends Qu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ht(this.persistence.referenceDelegate instanceof Gu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new CN(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ae.withCacheSize(this.cacheSizeBytes):Ae.DEFAULT;return new j1(i=>Gu.mi(i,n),this.serializer)}}class fd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>H_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FD.bind(null,this.syncEngine),await bD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new AD}()}createDatastore(t){const n=xc(t.databaseInfo.databaseId),i=function(s){return new sD(s)}(t.databaseInfo);return function(s,a,l,u){return new uD(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new hD(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>H_(this.syncEngine,n,0),function(){return U_.v()?new U_:new eD}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const p=new MD(r,s,a,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=Z(r);q(_r,"RemoteStore shutting down."),s.Ea.add(5),await qo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}fd.provider={build:()=>new fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Qn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="FirestoreClient";class XD{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=he.UNAUTHENTICATED,this.clientId=wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{q(zi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(q(zi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Ym(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Gh(e,t){e.asyncQueue.verifyOperationInProgress(),q(zi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await z1(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function G_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $D(e);q(zi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>j_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>j_(t.remoteStore,r)),e._onlineComponents=t}async function $D(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){q(zi,"Using user provided OfflineComponentProvider");try{await Gh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===L.FAILED_PRECONDITION||r.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Rs("Error using user provided cache. Falling back to memory cache: "+n),await Gh(e,new Qu)}}else q(zi,"Using default OfflineComponentProvider"),await Gh(e,new QD(void 0));return e._offlineComponents}async function rb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(q(zi,"Using user provided OnlineComponentProvider"),await G_(e,e._uninitializedComponentsProvider._online)):(q(zi,"Using default OnlineComponentProvider"),await G_(e,new fd))),e._onlineComponents}function ZD(e){return rb(e).then(t=>t.syncEngine)}async function WD(e){const t=await rb(e),n=t.eventManager;return n.onListen=VD.bind(null,t.syncEngine),n.onUnlisten=UD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=PD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=LD.bind(null,t.syncEngine),n}function JD(e,t,n={}){const i=new Di;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new KD({next:m=>{d.Nu(),a.enqueueAndForget(()=>RD(s,p));const E=m.docs.has(l);!E&&m.fromCache?h.reject(new H(L.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?h.reject(new H(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new CD(Om(l.path),d,{includeMetadataChanges:!0,qa:!0});return wD(s,p)}(await WD(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firestore.googleapis.com",Q_=!0;class K_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ab,this.ssl=Q_}else this.host=t.host,this.ssl=t.ssl??Q_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=L1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xN)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}cC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sb(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $m{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new JI;switch(i.type){case"firstParty":return new iC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Y_.get(n);i&&(q("ComponentProvider","Removing Datastore"),Y_.delete(n),i.terminate())}(this),Promise.resolve()}}function t4(e,t,n,i={}){var h;e=lo(e,$m);const r=js(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(nT(`https://${l}`),iT("Firestore",!0)),s.host!==ab&&s.host!==l&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!dr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=he.MOCK_USER;else{d=u2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new he(m)}e._authCredentials=new tC(new ZT(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Zm(this.firestore,t,this._query)}}class Wt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wt(this.firestore,t,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(jo(n,Wt._jsonSchema))return new Wt(t,i||null,new F(It.fromString(n.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:zt("string",Wt._jsonSchemaVersion),referencePath:zt("string")};class po extends Zm{constructor(t,n,i){super(t,n,Om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wt(this.firestore,null,new F(t))}withConverter(t){return new po(this.firestore,t,this._path)}}function Wm(e,t,...n){if(e=Le(e),arguments.length===1&&(t=wm.newId()),uC("doc","path",t),e instanceof $m){const i=It.fromString(t,...n);return l_(i),new Wt(e,null,new F(i))}{if(!(e instanceof Wt||e instanceof po))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(It.fromString(t,...n));return l_(i),new Wt(e.firestore,e instanceof po?e.converter:null,new F(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="AsyncQueue";class $_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q1(this,"async_queue_retry"),this._c=()=>{const i=Fh();i&&q(X_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Di;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Fs(t))throw t;q(X_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",Z_(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Gm.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Y(47125,{Pc:Z_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Z_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Jm extends $m{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new $_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $_(t),this._firestoreClient=void 0,await t}}}function e4(e,t){const n=typeof e=="object"?e:oT(),i=typeof e=="string"?e:Lu,r=gm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=o2("firestore");s&&t4(r,...s)}return r}function ob(e){if(e._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||n4(e),e._firestoreClient}function n4(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new TC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new XD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qe(ae.fromBase64String(t))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Qe(ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(jo(t,Qe._jsonSchema))return Qe.fromBase64String(t.bytes)}}Qe._jsonSchemaVersion="firestore/bytes/1.0",Qe._jsonSchema={type:zt("string",Qe._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yn._jsonSchemaVersion}}static fromJSON(t){if(jo(t,yn._jsonSchema))return new yn(t.latitude,t.longitude)}}yn._jsonSchemaVersion="firestore/geoPoint/1.0",yn._jsonSchema={type:zt("string",yn._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(jo(t,_n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new _n(t.vectorValues);throw new H(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:zt("string",_n._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=/^__.*__$/;class r4{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Rr(t,this.data,this.fieldMask,n,this.fieldTransforms):new zo(t,this.data,n,this.fieldTransforms)}}function ub(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class eg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new eg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ku(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(ub(this.Ac)&&i4.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class s4{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||xc(t)}Cc(t,n,i,r=!1){return new eg({Ac:t,methodName:n,Dc:i,path:re.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a4(e){const t=e._freezeSettings(),n=xc(e._databaseId);return new s4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function o4(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);db("Data must be an object, but it was:",a,i);const l=hb(i,a);let u,h;if(s.merge)u=new tn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=l4(t,p,n);if(!a.contains(m))throw new H(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);c4(d,m)||d.push(m)}u=new tn(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new r4(new Ye(l),u,h)}function cb(e,t){if(fb(e=Le(e)))return db("Unsupported field value:",t,e),hb(e,t);if(e instanceof lb)return function(i,r){if(!ub(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=cb(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=Le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return GC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=bt.fromDate(i);return{timestampValue:Fu(r.serializer,s)}}if(i instanceof bt){const s=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fu(r.serializer,s)}}if(i instanceof yn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qe)return{bytesValue:D1(r.serializer,i._byteString)};if(i instanceof Wt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:km(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof _n)return function(a,l){return{mapValue:{fields:{[a1]:{stringValue:o1},[ju]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Mm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Rm(i)}`)}(e,t)}function hb(e,t){const n={};return t1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ar(e,(i,r)=>{const s=cb(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function fb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof bt||e instanceof yn||e instanceof Qe||e instanceof Wt||e instanceof lb||e instanceof _n)}function db(e,t,n){if(!fb(n)||!WT(n)){const i=Rm(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function l4(e,t,n){if((t=Le(t))instanceof tg)return t._internalPath;if(typeof t=="string")return mb(e,t);throw Ku("Field path arguments must be of type string or ",e,!1,void 0,n)}const u4=new RegExp("[~\\*/\\[\\]]");function mb(e,t,n){if(t.search(u4)>=0)throw Ku(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new tg(...t.split("."))._internalPath}catch{throw Ku(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ku(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H(L.INVALID_ARGUMENT,l+e+u)}function c4(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new h4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pb("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h4 extends gb{data(){return super.data()}}function pb(e,t){return typeof t=="string"?mb(e,t):t instanceof tg?t._internalPath:t._delegate._internalPath}class f4{convertValue(t,n="none"){switch(Li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ui(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ar(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[ju].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>kt(a.doubleValue));return new _n(n)}convertGeoPoint(t){return new yn(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Ec(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(co(t));default:return null}}convertTimestamp(t){const n=ki(t);return new bt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=It.fromString(t);ht(U1(i),9688,{name:t});const r=new ho(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(n)||Qn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class ba{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lr extends gb{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(pb("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=lr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",lr._jsonSchema={type:zt("string",lr._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Wl extends lr{data(t={}){return super.data(t)}}class Fa{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ba(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Wl(this._firestore,this._userDataWriter,i.key,i,new ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Wl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ba(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Wl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ba(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:m4(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function m4(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(e){e=lo(e,Wt);const t=lo(e.firestore,Jm);return JD(ob(t),e._key).then(n=>_4(t,e,n))}Fa._jsonSchemaVersion="firestore/querySnapshot/1.0",Fa._jsonSchema={type:zt("string",Fa._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class p4 extends f4{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function yb(e,t,n){e=lo(e,Wt);const i=lo(e.firestore,Jm),r=d4(e.converter,t);return y4(i,[o4(a4(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,zn.none())])}function y4(e,t){return function(i,r){const s=new Di;return i.asyncQueue.enqueueAndForget(async()=>jD(await ZD(i),r,s)),s.promise}(ob(e),t)}function _4(e,t,n){const i=n.docs.get(t._key),r=new p4(e);return new lr(e,r,t._key,i,new ba(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){qs=r})(zs),ws(new mr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Jm(new eC(i.getProvider("auth-internal")),new rC(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ci(r_,s_,t),Ci(r_,s_,"esm2020")})();const v4={apiKey:"AIzaSyD_t9Kaj9eOjISp33Wqj_k9YqZETb21vBw",authDomain:"trainer-crm-be9ea.firebaseapp.com",projectId:"trainer-crm-be9ea",storageBucket:"trainer-crm-be9ea.firebasestorage.app",messagingSenderId:"499615107271",appId:"1:499615107271:web:370531703a115d4daa96e2",measurementId:"G-1Y9Q2S7GRZ"},_b=aT(v4),Xu=ZI(_b),ng=e4(_b),E4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),T4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),b4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 13a5.975 5.975 0 013 1.803M15 21a9 9 0 00-9-5.197"})}),S4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),A4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),w4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),vb=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),g.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),Eb=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),Tb=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),R4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),x4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),I4=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500 absolute top-0.5 right-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5m-5 7h5.5a3.5 3.5 0 000-7H9.5"})}),C4=()=>{const[e,t]=et.useState(""),[n,i]=et.useState(""),[r,s]=et.useState(!0),[a,l]=et.useState(""),u=async h=>{h.preventDefault(),l("");try{if(r)await kx(Xu,e,n);else{const p=(await Px(Xu,e,n)).user,m={blocks:[{id:0,name:"Без оплаты",cost:0,trainingCount:0},{id:1,name:"Блок 10 тренировок",cost:25e3,trainingCount:10},{id:2,name:"Блок 8 тренировок",cost:2e4,trainingCount:8},{id:3,name:"Блок 5 тренировок",cost:14e3,trainingCount:5},{id:4,name:"Разовая",cost:3e3,trainingCount:1}],participants:[],attendance:{},rentAmount:5e4};await yb(Wm(ng,"users",p.uid),m)}}catch(d){l(d.message)}};return g.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:g.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-lg shadow-lg border border-gray-700",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white",children:r?"Вход в VisitFlow":"Регистрация в VisitFlow"}),g.jsxs("form",{onSubmit:u,className:"space-y-6",children:[g.jsx("input",{type:"email",value:e,onChange:h=>t(h.target.value),placeholder:"Email",className:"w-full px-4 py-2 text-gray-300 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 border border-gray-600",required:!0}),g.jsx("input",{type:"password",value:n,onChange:h=>i(h.target.value),placeholder:"Пароль",className:"w-full px-4 py-2 text-gray-300 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 border border-gray-600",required:!0}),g.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-orange-500 rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50 transition-colors",children:r?"Войти":"Зарегистрироваться"}),a&&g.jsx("p",{className:"text-sm text-center text-red-500",children:a})]}),g.jsxs("p",{className:"text-sm text-center text-gray-300",children:[r?"Нет аккаунта?":"Уже есть аккаунт?",g.jsx("button",{onClick:()=>s(!r),className:"ml-1 font-bold text-orange-400 hover:underline",children:r?"Зарегистрироваться":"Войти"})]})]})})},dd=({show:e,onClose:t,title:n,children:i})=>e?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center",children:g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md border border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-xl font-semibold text-white",children:n}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),g.jsx("div",{children:i})]})}):null,bb=({show:e,onClose:t,onConfirm:n,title:i,children:r})=>e?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center",children:g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm border border-gray-700",children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:i}),g.jsx("div",{className:"text-gray-300 mb-6",children:r}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Отмена"}),g.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Удалить"})]})]})}):null,W_=({participants:e,blocks:t,attendance:n,selectedDate:i,rentAmount:r})=>{const s=i.getFullYear(),a=i.getMonth(),l=Object.keys(n).filter(p=>{const m=p.split("-");if(m.length!==4)return!1;const E=parseInt(m[1],10),D=parseInt(m[2],10);return n[p]===!0&&E===s&&D===a}).length,u=typeof r=="number"&&r>0?r:5e4;console.log("Dashboard rentAmount:",r,"currentRentAmount:",u);const h=e.reduce((p,m)=>{const D=(m.payments||[]).filter(O=>{const V=new Date(O.paymentDate);return V.getFullYear()===s&&V.getMonth()===a}).reduce((O,V)=>{const b=t.find(v=>v.id===V.blockId);return O+(b?b.cost:0)},0);return p+D},0),d=h-u;return console.log("Расчет дохода:",{paymentsIncome:h,currentRentAmount:u,incomeThisMonth:d}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-baseline space-x-2 mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"Дашборд"}),g.jsxs("span",{className:"text-lg text-gray-400",children:["(",i.toLocaleString("ru-RU",{month:"long",year:"numeric"}),")"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Активные участники"}),g.jsx("p",{className:"text-4xl font-bold text-orange-500 mt-2",children:e.length})]}),g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Проведено тренировок"}),g.jsx("p",{className:"text-4xl font-bold text-orange-500 mt-2",children:l})]}),g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Доход (Оплаты)"}),g.jsxs("p",{className:`text-4xl font-bold mt-2 ${d>=0?"text-green-500":"text-red-500"}`,children:[d.toLocaleString("ru-RU")," ₽"]}),g.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Отладка: rentAmount=",r,", currentRentAmount=",u]})]})]})]})},N4=({participants:e,blocks:t,attendance:n,setAttendance:i,selectedDate:r,setSelectedDate:s})=>{const[a,l]=et.useState(null),u=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),h=Array.from({length:u},(b,v)=>v+1),d=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],m=(new Date(r.getFullYear(),r.getMonth(),1).getDay()+6)%7,E=(b,v)=>{const S=`${b}-${r.getFullYear()}-${r.getMonth()}-${v}`;i(x=>({...x,[S]:!x[S]}))},[D,O]=et.useState([]);et.useEffect(()=>{const b={};Object.keys(n).forEach(S=>{if(!n[S])return;const x=S.split("-");if(x.length!==4)return;const P=x[0];b[P]||(b[P]=[]),b[P].push({year:parseInt(x[1],10),month:parseInt(x[2],10),day:parseInt(x[3],10)})});const v=e.map(S=>{const x=S.payments||[],P=x.reduce((C,R)=>{const pt=t.find(Qt=>Qt.id===R.blockId);return C+(pt?pt.trainingCount:0)},0),j=b[S.id]||[],A=j.length,y=P-A,T=j.filter(C=>C.year===r.getFullYear()&&C.month===r.getMonth()).length,w=x.length>0?x[x.length-1]:null,I=w?t.find(C=>C.id===w.blockId):null;return{...S,blockName:I?I.name:"Блок не назначен",attendedThisMonth:T,remainingSessions:y}});O(v)},[r,e,t,n]);const V=b=>{s(v=>{const S=new Date(v);return b(S),S})};return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Календарь посещений"}),g.jsxs("div",{className:"flex justify-between items-center mb-6 bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-700",children:[g.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[g.jsx("button",{onClick:()=>V(b=>b.setFullYear(b.getFullYear()-1)),className:"px-2 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 font-bold",children:"«"}),g.jsx("button",{onClick:()=>V(b=>b.setMonth(b.getMonth()-1)),className:"px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"<"})]}),g.jsx("h2",{className:"text-lg sm:text-2xl font-semibold w-36 sm:w-48 text-center capitalize text-white",children:r.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),g.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[g.jsx("button",{onClick:()=>V(b=>b.setMonth(b.getMonth()+1)),className:"px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:">"}),g.jsx("button",{onClick:()=>V(b=>b.setFullYear(b.getFullYear()+1)),className:"px-2 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 font-bold",children:"»"})]})]}),g.jsx("div",{className:"space-y-4",children:D.map(b=>{const v=a===b.id,S=b.payments||[];return g.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden border border-gray-700 hover:border-teal-500 transition-colors",children:[g.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>l(v?null:b.id),children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-white",children:b.name}),g.jsx("p",{className:"text-sm text-gray-300",children:b.blockName})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"text-sm font-semibold text-gray-300",children:["Посещений в этом месяце: ",b.attendedThisMonth]}),g.jsxs("p",{className:"text-sm font-bold text-orange-400",children:["Осталось тренировок: ",b.remainingSessions]})]}),g.jsx("div",{className:`ml-4 transition-transform duration-300 text-white ${v?"transform rotate-180":""}`,children:g.jsx(x4,{})})]}),v&&g.jsxs("div",{className:"p-4 border-t border-gray-700 bg-gray-900",children:[g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs font-bold text-gray-400 mb-2",children:d.map(x=>g.jsx("div",{children:x},x))}),g.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:m}).map((x,P)=>g.jsx("div",{},`empty-${P}`)),h.map(x=>{const P=`${b.id}-${r.getFullYear()}-${r.getMonth()}-${x}`,j=!!n[P],A=S.some(y=>{const T=new Date(y.paymentDate);return T.getFullYear()===r.getFullYear()&&T.getMonth()===r.getMonth()&&T.getDate()===x});return g.jsxs("div",{className:`relative flex items-center justify-center p-2 rounded-lg cursor-pointer transition-colors ${j?"bg-orange-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>E(b.id,x),children:[A&&g.jsx(I4,{}),g.jsx("span",{className:"font-bold text-sm",children:x})]},x)})]})]})]},b.id)})})]})},D4=({participants:e,setParticipants:t,blocks:n,attendance:i,setAttendance:r})=>{const[s,a]=et.useState(!1),[l,u]=et.useState(!1),[h,d]=et.useState(null),[p,m]=et.useState(null),[E,D]=et.useState({name:""}),[O,V]=et.useState({blockId:"",paymentDate:""}),b=()=>{D({name:""}),a(!0)},v=y=>{var w;d(y);const T=new Date().toISOString().split("T")[0];V({blockId:((w=n[0])==null?void 0:w.id)||"",paymentDate:T}),u(!0)},S=()=>{a(!1),u(!1),d(null)},x=y=>{y.preventDefault(),t(T=>[...T,{...E,id:Date.now(),payments:[]}]),S()},P=y=>{y.preventDefault(),t(T=>T.map(w=>{if(w.id===h.id){const I={...O,blockId:parseInt(O.blockId),paymentId:Date.now()},C=w.payments||[];return{...w,payments:[...C,I]}}return w})),S()},j=y=>m(y),A=()=>{p&&(t(y=>y.filter(T=>T.id!==p)),r(y=>{const T={...y};return Object.keys(T).forEach(w=>{w.startsWith(`${p}-`)&&delete T[w]}),T}),m(null))};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"Управление участниками"}),g.jsx("button",{onClick:b,className:"px-5 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Добавить участника"})]}),g.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-x-auto border border-gray-700",children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"ФИО"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Дата последней оплаты"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Последний блок"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Действия"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-700",children:e.map(y=>{const T=y.payments&&y.payments.length>0?y.payments[y.payments.length-1]:null,w=T?n.find(I=>I.id===T.blockId):null;return g.jsxs("tr",{className:"hover:bg-gray-700",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:y.name}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:T?new Date(T.paymentDate).toLocaleDateString("ru-RU"):"---"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:w?w.name:"N/A"}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[g.jsx("button",{onClick:()=>v(y),className:"text-orange-400 hover:text-orange-500 mr-4",children:g.jsx(vb,{})}),g.jsx("button",{onClick:()=>j(y.id),className:"text-red-500 hover:text-red-600",children:g.jsx(Eb,{})})]})]},y.id)})})]})}),g.jsx(dd,{show:s,onClose:S,title:"Добавить участника",children:g.jsxs("form",{onSubmit:x,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"name",value:E.name,onChange:y=>D({name:y.target.value}),placeholder:"ФИО",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gray-700 rounded-lg",children:"Отмена"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Добавить"})]})]})}),g.jsx(dd,{show:l,onClose:S,title:`Добавить оплату для: ${h==null?void 0:h.name}`,children:g.jsxs("form",{onSubmit:P,className:"space-y-4",children:[g.jsxs("select",{name:"blockId",value:O.blockId,onChange:y=>V({...O,blockId:y.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0,children:[g.jsx("option",{value:"",disabled:!0,children:"Выберите блок"}),n.map(y=>g.jsx("option",{value:y.id,children:y.name},y.id))]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-300",children:"Дата оплаты"}),g.jsx("input",{type:"date",id:"paymentDate",name:"paymentDate",value:O.paymentDate,onChange:y=>V({...O,paymentDate:y.target.value}),className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0})]}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gray-700 rounded-lg",children:"Отмена"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Добавить оплату"})]})]})}),g.jsx(bb,{show:p!==null,onClose:()=>m(null),onConfirm:A,title:"Подтвердите удаление",children:"Вы уверены, что хотите удалить этого участника?"})]})},O4=({blocks:e,setBlocks:t,participants:n,setParticipants:i,rentAmount:r,setRentAmount:s})=>{const[a,l]=et.useState(!1),[u,h]=et.useState(null),[d,p]=et.useState(null),[m,E]=et.useState({name:"",cost:"",trainingCount:""}),D=(x=null)=>{h(x),E(x?{...x}:{name:"",cost:"",trainingCount:""}),l(!0)},O=()=>{l(!1),h(null)},V=x=>{const{name:P,value:j}=x.target;E(A=>({...A,[P]:j}))},b=x=>{x.preventDefault();const P={...m,cost:parseFloat(m.cost),trainingCount:parseInt(m.trainingCount,10)};t(u?e.map(j=>j.id===u.id?{...j,...P}:j):[...e,{...P,id:Date.now()}]),O()},v=x=>{x!==0&&p(x)},S=()=>{d&&(i(x=>x.map(P=>{const j=(P.payments||[]).filter(A=>A.blockId!==d);return{...P,payments:j}})),t(x=>x.filter(P=>P.id!==d)),p(null))};return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Управление блоками"}),g.jsx("div",{className:"flex justify-end items-center mb-6",children:g.jsx("button",{onClick:()=>D(),className:"px-5 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Создать блок"})}),g.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-x-auto border border-gray-700",children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Название блока"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Стоимость"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Кол-во тренировок"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Действия"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-700",children:e.map(x=>g.jsxs("tr",{className:"hover:bg-gray-700",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:x.name}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[x.cost.toLocaleString("ru-RU")," ₽"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:x.trainingCount}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:x.id!==0&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>D(x),className:"text-orange-400 hover:text-orange-500 mr-4",children:g.jsx(vb,{})}),g.jsx("button",{onClick:()=>v(x.id),className:"text-red-500 hover:text-red-600",children:g.jsx(Eb,{})})]})})]},x.id))})]})}),g.jsxs("div",{className:"mt-8 bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Расходы"}),g.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Сумма аренды в месяц"}),g.jsx("input",{type:"number",value:r,onChange:x=>s(parseFloat(x.target.value)||0),className:"mt-1 block w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",placeholder:"Введите сумму аренды"})]}),g.jsx(dd,{show:a,onClose:O,title:u?"Редактировать блок":"Создать блок",children:g.jsxs("form",{onSubmit:b,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"name",value:m.name,onChange:V,placeholder:"Название блока",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsx("input",{type:"number",name:"cost",value:m.cost,onChange:V,placeholder:"Стоимость",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsx("input",{type:"number",name:"trainingCount",value:m.trainingCount,onChange:V,placeholder:"Количество тренировок",className:"w-full p-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-300 focus:ring-orange-500 focus:border-orange-500",required:!0}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-gray-700 rounded-lg",children:"Отмена"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:u?"Сохранить":"Добавить"})]})]})}),g.jsx(bb,{show:d!==null,onClose:()=>p(null),onConfirm:S,title:"Подтвердите удаление",children:"Вы уверены, что хотите удалить этот блок? Все участники, приписанные к этому блоку, будут откреплены."})]})},M4=({onBack:e,detailType:t,reportData:n,totalSales:i,netProfit:r,rentAmount:s,totalTrainings:a,avgTrainingCost:l,reportDate:u,changeDate:h})=>{const d={participantSales:"Отчет: Реализация по участникам",totalSales:"Отчет: Общая прибыль",netProfit:"Отчет: Чистая прибыль",avgCost:"Отчет: Средняя стоимость тренировки"},p=()=>{switch(t){case"participantSales":return g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"ФИО Участника"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Блок"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Стоимость 1 тренировки"}),g.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Посещено (месяц)"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Реализация (месяц)"})]})}),g.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:n.map(m=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:m.name}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:m.blockName}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[m.costPerTraining.toFixed(2)," ₽"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300 text-center font-bold",children:m.attendedThisMonth}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white text-right font-bold",children:[m.salesThisMonth.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})," ₽"]})]},m.id))})]})});case"totalSales":return g.jsxs("div",{className:"p-8 text-center border border-gray-700 rounded-lg",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Общая прибыль за месяц"}),g.jsxs("p",{className:"mt-2 text-5xl font-bold text-orange-500",children:[i.toLocaleString("ru-RU")," ₽"]})]});case"netProfit":return g.jsx("div",{className:"p-8 border border-gray-700 rounded-lg",children:g.jsxs("dl",{className:"divide-y divide-gray-700",children:[g.jsxs("div",{className:"flex justify-between py-3",children:[g.jsx("dt",{className:"text-lg text-gray-300",children:"Общая прибыль"}),g.jsxs("dd",{className:"text-lg font-medium text-orange-500",children:[i.toLocaleString("ru-RU")," ₽"]})]}),g.jsxs("div",{className:"flex justify-between py-3",children:[g.jsx("dt",{className:"text-lg text-gray-300",children:"Сумма аренды"}),g.jsxs("dd",{className:"text-lg font-medium text-red-500",children:["- ",s.toLocaleString("ru-RU")," ₽"]})]}),g.jsxs("div",{className:"flex justify-between py-4",children:[g.jsx("dt",{className:"text-xl font-bold text-white",children:"Чистая прибыль"}),g.jsxs("dd",{className:`text-xl font-bold ${r>=0?"text-green-500":"text-red-500"}`,children:[r.toLocaleString("ru-RU")," ₽"]})]})]})});case"avgCost":return g.jsx("div",{className:"p-8 border border-gray-700 rounded-lg",children:g.jsxs("dl",{className:"divide-y divide-gray-700",children:[g.jsxs("div",{className:"flex justify-between py-3",children:[g.jsx("dt",{className:"text-lg text-gray-300",children:"Общая прибыль"}),g.jsxs("dd",{className:"text-lg font-medium text-white",children:[i.toLocaleString("ru-RU")," ₽"]})]}),g.jsxs("div",{className:"flex justify-between py-3",children:[g.jsx("dt",{className:"text-lg text-gray-300",children:"Количество тренировок"}),g.jsx("dd",{className:"text-lg font-medium text-white",children:a})]}),g.jsxs("div",{className:"flex justify-between py-4",children:[g.jsx("dt",{className:"text-xl font-bold text-white",children:"Средняя стоимость тренировки"}),g.jsxs("dd",{className:"text-xl font-bold text-teal-500",children:[l.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})," ₽"]})]})]})});default:return null}};return g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[g.jsxs("button",{onClick:e,className:"flex items-center mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:[g.jsx(Tb,{}),"Назад к отчетам"]}),g.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:d[t]}),g.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[g.jsx("button",{onClick:()=>h(m=>m.setMonth(m.getMonth()-1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"<"}),g.jsx("h3",{className:"text-xl font-semibold w-48 text-center text-white",children:u.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),g.jsx("button",{onClick:()=>h(m=>m.setMonth(m.getMonth()+1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:">"})]}),p()]})},V4=({participants:e,blocks:t,attendance:n,rentAmount:i,selectedDate:r,setSelectedDate:s})=>{const[a,l]=et.useState("overview"),[u,h]=et.useState(null),d=r.getFullYear(),p=r.getMonth(),m=x=>{s(P=>{const j=new Date(P);return x(j),j})},E=x=>{h(x),l("details")},D=e.map(x=>{const P=x.payments||[];let j=0,A=0;P.forEach(R=>{const pt=t.find(Qt=>Qt.id===R.blockId);pt&&(j+=pt.cost,A+=pt.trainingCount)});const y=A>0?j/A:0,T=Object.keys(n).filter(R=>{const pt=R.split("-");return pt.length===4&&pt[0]===String(x.id)&&n[R]===!0&&parseInt(pt[1],10)===d&&parseInt(pt[2],10)===p}).length,w=y*T,I=P.length>0?P[P.length-1]:null,C=I?t.find(R=>R.id===I.blockId):null;return{...x,blockName:C?C.name:"N/A",costPerTraining:y,attendedThisMonth:T,salesThisMonth:w}}),O=D.reduce((x,P)=>x+P.salesThisMonth,0),V=typeof i=="number"&&i>0?i:5e4,b=O-V,v=D.reduce((x,P)=>x+P.attendedThisMonth,0),S=v>0?O/v:0;return a==="details"?g.jsx(M4,{onBack:()=>l("overview"),detailType:u,reportData:D,totalSales:O,netProfit:b,rentAmount:V,totalTrainings:v,avgTrainingCost:S,reportDate:r,changeDate:m}):g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Отчеты"}),g.jsx("div",{className:"flex items-center space-x-2 mb-6",children:g.jsx("h3",{className:"text-xl font-semibold w-full text-center text-white",children:r.toLocaleString("ru-RU",{month:"long",year:"numeric"})})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsxs("div",{onClick:()=>E("totalSales"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Общая прибыль"}),g.jsxs("p",{className:"text-4xl font-bold text-orange-500 mt-2",children:[O.toLocaleString("ru-RU")," ₽"]})]}),g.jsxs("div",{onClick:()=>E("netProfit"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Чистая прибыль"}),g.jsxs("p",{className:`text-4xl font-bold mt-2 ${b>=0?"text-green-500":"text-red-500"}`,children:[b.toLocaleString("ru-RU")," ₽"]})]}),g.jsxs("div",{onClick:()=>E("avgCost"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Средняя стоимость тренировки"}),g.jsxs("p",{className:"text-4xl font-bold text-teal-500 mt-2",children:[S.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})," ₽"]})]}),g.jsxs("div",{onClick:()=>E("participantSales"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Реализация по участникам"}),g.jsx("p",{className:"text-gray-400 mt-2",children:"Нажмите, чтобы посмотреть детали"})]})]})]})},P4=({participants:e,blocks:t,attendance:n,rentAmount:i,selectedDate:r,setSelectedDate:s})=>{const[a,l]=et.useState("overview"),[u,h]=et.useState(""),d=v=>{h(v),l("details")},p=v=>{s(S=>{const x=new Date(S);return v(x),x})},E=(()=>{const v=r.getFullYear();return Array.from({length:12},(S,x)=>{const P=e.reduce((y,T)=>{const w=T.payments||[];let I=0,C=0;w.forEach(Qt=>{const B=t.find(K=>K.id===Qt.blockId);B&&(I+=B.cost,C+=B.trainingCount)});const R=C>0?I/C:0,pt=Object.keys(n).filter(Qt=>{const B=Qt.split("-");return B.length===4&&B[0]===String(T.id)&&n[Qt]&&parseInt(B[1],10)===v&&parseInt(B[2],10)===x}).length;return y+pt*R},0),j=e.reduce((y,T)=>{const w=(T.payments||[]).filter(I=>{const C=new Date(I.paymentDate);return C.getFullYear()===v&&C.getMonth()===x});return y+w.reduce((I,C)=>{const R=t.find(pt=>pt.id===C.blockId);return I+(R?R.cost:0)},0)},0),A=typeof i=="number"&&i>0?i:5e4;return{month:new Date(v,x).toLocaleString("ru-RU",{month:"short"}),income:j-A,netProfit:P-A}})})(),D=E.reduce((v,S)=>S.netProfit>0?v+S.netProfit:v,0),O=E.reduce((v,S)=>S.income>0?v+S.income:v,0),V=Math.max(...E.flatMap(v=>[v.income,v.netProfit]),0),b=Math.min(...E.flatMap(v=>[v.income,v.netProfit]),0);if(a==="details"){const v=u==="netProfitByMonth",S=v?`Чистая прибыль по месяцам за ${r.getFullYear()} год`:`Доход (оплаты) за вычетом аренды за ${r.getFullYear()} год`,x=v?"netProfit":"income",P="Итого (прибыльные месяцы):",j=v?D:O;return g.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700",children:[g.jsxs("button",{onClick:()=>l("overview"),className:"flex items-center mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:[g.jsx(Tb,{}),"Назад к графикам"]}),g.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:S}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("div",{className:"w-full h-96 p-4 pt-10 border border-gray-700 rounded-lg flex justify-between items-center relative",style:{minWidth:"600px"},children:[g.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-gray-700"}),E.map((A,y)=>{const T=A[x],w=T<0,I=Math.max(Math.abs(b),V,i),C=I===0?0:Math.abs(T)/I*100;return g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center h-full relative px-1 group",children:[g.jsx("div",{className:`w-full h-1/2 flex flex-col ${w?"justify-start":"justify-end"} items-center`,children:!w&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-xs font-semibold text-gray-300 mb-1",children:T.toLocaleString("ru-RU")}),g.jsxs("div",{className:"w-5/6 relative transition-transform duration-200 ease-in-out group-hover:-translate-y-1",style:{height:`${C/2}%`},children:[g.jsx("div",{className:"absolute inset-0 bg-green-500 border border-green-600"}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-green-600 opacity-70 transform -skew-x-[45deg] -translate-y-1.5"}),g.jsx("div",{className:"absolute top-0 right-0 w-3 h-full bg-green-700 opacity-70 transform -skew-y-[45deg] translate-x-1.5"})]})]})}),g.jsx("div",{className:`w-full h-1/2 flex flex-col ${w?"justify-start":"justify-end"} items-center`,children:w&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-5/6 relative transition-transform duration-200 ease-in-out group-hover:translate-y-1",style:{height:`${C/2}%`},children:[g.jsx("div",{className:"absolute inset-0 bg-red-500 border border-red-600"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-full h-3 bg-red-600 opacity-70 transform -skew-x-[45deg] translate-y-1.5"}),g.jsx("div",{className:"absolute top-0 right-0 w-3 h-full bg-red-700 opacity-70 transform -skew-y-[45deg] translate-x-1.5"})]}),g.jsx("span",{className:"text-xs font-semibold text-gray-300 mt-1",children:T.toLocaleString("ru-RU")})]})}),g.jsx("span",{className:"absolute -bottom-1 text-xs text-gray-400",children:A.month.toUpperCase()})]},y)})]})}),g.jsx("div",{className:"mt-6 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full",children:[g.jsx("thead",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Месяц"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:v?"Чистая прибыль":"Доход (за вычетом аренды)"})]})}),g.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:E.map((A,y)=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:new Date(r.getFullYear(),y).toLocaleString("ru-RU",{month:"long"})}),g.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-bold ${A[x]>=0?"text-green-500":"text-red-500"}`,children:[A[x].toLocaleString("ru-RU")," ₽"]})]},y))}),g.jsx("tfoot",{className:"bg-gray-900",children:g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-gray-300 uppercase",children:P}),g.jsxs("td",{className:"px-6 py-4 text-right text-sm font-extrabold text-green-500",children:[j.toLocaleString("ru-RU")," ₽"]})]})})]})})]})}return g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Графики"}),g.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[g.jsx("button",{onClick:()=>p(v=>v.setFullYear(v.getFullYear()-1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"<"}),g.jsx("h3",{className:"text-xl font-semibold w-48 text-center text-white",children:r.getFullYear()}),g.jsx("button",{onClick:()=>p(v=>v.setFullYear(v.getFullYear()+1)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:">"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{onClick:()=>d("incomeByMonth"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Доход (оплаты) по месяцам"}),g.jsx("p",{className:"text-gray-400 mt-2",children:"Динамика дохода (за вычетом аренды) за год"})]}),g.jsxs("div",{onClick:()=>d("netProfitByMonth"),className:"bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-teal-500 transition-colors cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Чистая прибыль (реализация) по месяцам"}),g.jsx("p",{className:"text-gray-400 mt-2",children:"Динамика чистой прибыли за год"})]})]})]})},k4=({user:e,initialData:t})=>{const[n,i]=et.useState("dashboard"),[r,s]=et.useState(new Date),[a,l]=et.useState(!1),[u,h]=et.useState(t.blocks||[]),[d,p]=et.useState(t.participants||[]),[m,E]=et.useState(t.attendance||{}),[D,O]=et.useState(()=>{const S=t==null?void 0:t.rentAmount;return typeof S=="number"&&S>0?S:5e4});et.useEffect(()=>{(typeof D!="number"||D<=0)&&O(5e4)},[D]),et.useEffect(()=>{const S=async()=>{if(e){const P={blocks:u,participants:d,attendance:m,rentAmount:D};await yb(Wm(ng,"users",e.uid),P)}},x=setTimeout(()=>{S()},1e3);return()=>{clearTimeout(x)}},[u,d,m,D,e]);const V=async()=>{try{await zx(Xu)}catch(S){console.error("Ошибка выхода:",S)}},b=()=>{const S={participants:d,setParticipants:p,blocks:u,setBlocks:h,attendance:m,setAttendance:E,rentAmount:D,setRentAmount:O,selectedDate:r,setSelectedDate:s};switch(n){case"dashboard":return g.jsx(W_,{...S});case"calendar":return g.jsx(N4,{...S});case"participants":return g.jsx(D4,{...S});case"blocks":return g.jsx(O4,{...S});case"reports":return g.jsx(V4,{...S});case"charts":return g.jsx(P4,{...S});default:return g.jsx(W_,{...S})}},v=({page:S,icon:x,children:P})=>g.jsxs("button",{onClick:()=>{i(S),l(!1)},className:`flex items-center space-x-3 px-4 py-3 rounded-lg w-full text-left transition-colors ${n===S?"bg-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[x,g.jsx("span",{className:"font-medium",children:P})]});return g.jsxs("div",{className:"relative min-h-screen md:flex bg-gray-900 font-sans text-gray-300",children:[g.jsxs("div",{className:"md:hidden flex justify-between items-center p-4 bg-gray-800 border-b border-gray-700",children:[g.jsxs("div",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[g.jsx("span",{children:"✅"}),g.jsx("span",{children:"VisitFlow"})]}),g.jsx("button",{onClick:()=>l(!a),className:"text-gray-300 hover:text-white",children:g.jsx(R4,{})})]}),g.jsxs("aside",{className:`w-64 bg-gray-800 p-4 flex flex-col border-r border-gray-700 fixed inset-y-0 left-0 z-30 transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 ${a?"translate-x-0":"-translate-x-full"}`,children:[g.jsxs("div",{className:"text-2xl font-bold text-white mb-8 items-center space-x-2 hidden md:flex",children:[g.jsx("span",{children:"✅"}),g.jsx("span",{children:"VisitFlow"})]}),g.jsx("nav",{className:"flex-grow",children:g.jsxs("div",{className:"flex flex-col space-y-2",children:[g.jsx(v,{page:"dashboard",icon:g.jsx(E4,{}),children:"Дашборд"}),g.jsx(v,{page:"calendar",icon:g.jsx(T4,{}),children:"Календарь"}),g.jsx(v,{page:"participants",icon:g.jsx(b4,{}),children:"Участники"}),g.jsx(v,{page:"blocks",icon:g.jsx(S4,{}),children:"Блоки"}),g.jsx(v,{page:"reports",icon:g.jsx(A4,{}),children:"Отчеты"}),g.jsx(v,{page:"charts",icon:g.jsx(w4,{}),children:"Графики"})]})}),g.jsx("div",{className:"mt-auto",children:g.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-900",children:[g.jsx("img",{className:"h-10 w-10 rounded-full",src:`https://placehold.co/100x100/374151/D1D5DB?text=${e.email[0].toUpperCase()}`,alt:"User"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white text-sm truncate",children:e.email}),g.jsx("button",{onClick:V,className:"text-sm text-orange-400 hover:underline",children:"Выйти"})]})]})})]}),g.jsx("main",{className:"flex-1 p-4 sm:p-8 overflow-y-auto",children:b()})]})};function U4(){const[e,t]=et.useState(null),[n,i]=et.useState(!0),[r,s]=et.useState(null);return et.useEffect(()=>{const a=jx(Xu,async l=>{if(l){const u=Wm(ng,"users",l.uid),h=await g4(u);h.exists()?s(h.data()):console.log("No such document for user!"),t(l)}else t(null),s(null);i(!1)});return()=>a()},[]),n||e&&!r?g.jsx("div",{className:"flex justify-center items-center h-screen font-bold text-xl bg-gray-900 text-white",children:"Загрузка..."}):e?g.jsx(k4,{user:e,initialData:r}):g.jsx(C4,{})}Ww.createRoot(document.getElementById("root")).render(g.jsx(_S.StrictMode,{children:g.jsx(U4,{})}));
